function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_nonIterableRest()}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _construct(e,t,n){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"6Joi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("mrSG"),a=n("q/0M"),s=n("zVF4"),u=n("S+S0"),c=n("x7I3"),l=i.SDK_VERSION,h=new a.Logger("@firebase/firestore"),f=function(e){return e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT",e}({});function d(){return h.logLevel===a.LogLevel.DEBUG?f.DEBUG:h.logLevel===a.LogLevel.SILENT?f.SILENT:f.ERROR}function p(e){switch(e){case f.DEBUG:h.logLevel=a.LogLevel.DEBUG;break;case f.ERROR:h.logLevel=a.LogLevel.ERROR;break;case f.SILENT:h.logLevel=a.LogLevel.SILENT;break;default:h.error("Firestore ("+l+"): Invalid value passed to `setLogLevel`")}}function v(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(h.logLevel<=a.LogLevel.DEBUG){var i=n.map(y);h.debug.apply(h,o.__spreadArrays(["Firestore ("+l+") ["+e+"]: "+t],i))}}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(h.logLevel<=a.LogLevel.ERROR){var r=t.map(y);h.error.apply(h,o.__spreadArrays(["Firestore ("+l+"): "+e],r))}}function y(e){if("string"==typeof e)return e;var t=b.getPlatform();try{return t.formatJSON(e)}catch(n){return e}}function g(e){var t="FIRESTORE ("+l+") INTERNAL ASSERTION FAILED: "+e;throw m(t),new Error(t)}function _(e,t){e||g(t)}var b=function(){function e(){}return e.setPlatform=function(t){e.platform&&g("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||g("Platform not set"),e.platform},e}();function w(){return b.getPlatform().emptyByteString}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},C=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(t,e),t}(Error);function S(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new C(k.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T(e,t){return void 0!==e?e:t}function I(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function A(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function N(e){for(var t in _(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function D(e,t){if(0!==t.length)throw new C(k.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Y(t.length,"argument")+".")}function R(e,t,n){if(t.length!==n)throw new C(k.INVALID_ARGUMENT,"Function "+e+"() requires "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function x(e,t,n){if(t.length<n)throw new C(k.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function O(e,t,n,r){if(t.length<n||t.length>r)throw new C(k.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Y(t.length,"argument")+".")}function P(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new C(k.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+Y(r,"element")+".")}function M(e,t,n,r){j(e,t,Q(n)+" argument",r)}function L(e,t,n,r){void 0!==r&&M(e,t,n,r)}function F(e,t,n,r){j(e,t,n+" option",r)}function V(e,t,n,r){void 0!==r&&F(e,t,n,r)}function U(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(z(u))}var c=z(r);throw new C(k.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function B(e,t,n,r){if(!t.some((function(e){return e===r})))throw new C(k.INVALID_ARGUMENT,"Invalid value "+z(r)+" provided to function "+e+"() for its "+Q(n)+" argument. Acceptable values: "+t.join(", "))}function j(e,t,n,r){if(!("object"===t?q(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=z(r);throw new C(k.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function q(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function z(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":g("Unknown wrong type: "+typeof e)}function H(e,t,n){if(void 0===n)throw new C(k.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+Q(t)+" argument, but it was undefined.")}function K(e,t,n){A(t,(function(t,r){if(n.indexOf(t)<0)throw new C(k.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function W(e,t,n,r){var i=z(r);return new C(k.INVALID_ARGUMENT,"Function "+e+"() requires its "+Q(n)+" argument to be a "+t+", but it was: "+i)}function G(e,t,n){if(n<=0)throw new C(k.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+Q(t)+" argument to be a positive number, but it was: "+n+".")}function Q(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Y(e,t){return e+" "+t+(1===e?"":"s")}var X=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return _(20===t.length,"Invalid auto ID: "+t),t},e}();function Z(e,t){return e<t?-1:e>t?1:0}function J(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function $(e){return e+"\0"}function ee(){if("undefined"==typeof Uint8Array)throw new C(k.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function te(){if(!b.getPlatform().base64Available)throw new C(k.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ne=function(){function e(e){te(),this._binaryString=e}return e.fromBase64String=function(t){R("Blob.fromBase64String",arguments,1),M("Blob.fromBase64String","string",1,t),te();try{var n=b.getPlatform().atob(t);return new e(n)}catch(r){throw new C(k.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+r)}},e.fromUint8Array=function(t){if(R("Blob.fromUint8Array",arguments,1),ee(),!(t instanceof Uint8Array))throw W("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return R("Blob.toBase64",arguments,0),te(),b.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){R("Blob.toUint8Array",arguments,0),ee();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._approximateByteSize=function(){return 2*this._binaryString.length},e.prototype._compareTo=function(e){return Z(this._binaryString,e._binaryString)},e}(),re=S(ne,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ie=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},oe=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return Z(this.projectId,e.projectId)||Z(this.database,e.database)},e}(),ae=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),se=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&g("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&g("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return _(this.length>=(e=void 0===e?1:e),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return _(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return _(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return _(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new C(k.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(se),ce=/^[_a-zA-Z][_a-zA-Z0-9]*$/,le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return ce.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new C(k.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new C(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new C(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new C(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(se),he=function(){function e(t){this.path=t,_(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===ue.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ue.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new ue(t.slice()))},e.fromPathString=function(t){return new e(ue.fromString(t))},e.EMPTY=new e(new ue([])),e}(),fe=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},de=function(e){return e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction",e}({}),pe=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new fe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new C(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),ve=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw m("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),_(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=pe.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&g("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){_(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){_(e===de.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==de.All&&i.timerId===e)break}return t.drain()}))},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);_(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}();function me(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ge(t)),t=ye(e.get(n),t);return ge(t)}function ye(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ge(e){return e+"\x01\x01"}function _e(e){var t=e.length;if(_(t>=2,"Invalid path "+e),2===t)return _("\x01"===e.charAt(0)&&"\x01"===e.charAt(1),"Non-empty path "+e+" had length 2"),ue.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&g('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:g('Invalid encoded resource path: "'+e+'"')}o=a+2}return new ue(r)}var be=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new C(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new C(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new C(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),we=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new be(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new be(0,0)),e}(),ke=function(){function e(e,t){this.comparator=e,this.root=t||Se.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Se.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Se.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Ce(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Ce(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ce(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Ce(this.root,e,this.comparator,!0)},e}(),Ce=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){_(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Se=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw g("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw g("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Ee=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw g("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw g("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw g("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw g("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw g("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Se(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();Se.EMPTY=new Ee;var Te=function(){function e(e){this.comparator=e,this.data=new ke(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Ie(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Ie(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Ie=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Ae=new ke(he.comparator);function Ne(){return Ae}function De(){return Ne()}var Re=new ke(he.comparator);function xe(){return Re}var Oe=new ke(he.comparator);function Pe(){return Oe}var Me=new Te(he.comparator);function Le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Me,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Fe=new Te(Z);function Ve(){return Fe}var Ue=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,_(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&_(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;_(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=o.applyToRemoteDocument(t,r[i]))}return t},e.prototype.applyToLocalView=function(e,t){t&&_(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Le())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&J(this.mutations,e.mutations)&&J(this.baseMutations,e.baseMutations)},e}(),Be=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){_(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Pe(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),je=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&g("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),qe="SimpleDb",ze=function(){function e(t){this.db=t,12.2===e.getIOSVersion(s.getUA())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return _(e.isAvailable(),"IndexedDB not supported in current environment."),v(qe,"Opening database:",t),new je((function(i,o){var a=window.indexedDB.open(t,n);a.onsuccess=function(t){i(new e(t.target.result))},a.onblocked=function(){o(new C(k.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;o("VersionError"===t.name?new C(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):t)},a.onupgradeneeded=function(e){v(qe,'Database "'+t+'" requires upgrade from version:',e.oldVersion),r.createOrUpgrade(e.target.result,a.transaction,e.oldVersion,Jt).next((function(){v(qe,"Database upgrade to version "+Jt+" complete")}))}})).toPromise()},e.delete=function(e){return v(qe,"Removing database:",e),Ge(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(e.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var t=s.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,i=e.getAndroidVersion(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.isMockPersistence=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.USE_MOCK_PERSISTENCE)},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},e.prototype.runTransaction=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c;return o.__generator(this,(function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),a=0,s=function(){var e,s,c,l;return o.__generator(this,(function(o){switch(o.label){case 0:++a,e=Ke.open(u.db,r?"readonly":"readwrite",t),o.label=1;case 1:return o.trys.push([1,3,,4]),(s=n(e).catch((function(t){return e.abort(t),je.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return o.sent(),[2,{value:s}];case 3:return c=o.sent(),v(qe,"Transaction failed with error: %s. Retrying: %s.",c.message,l=i&&"FirebaseError"!==c.name&&a<3),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),He=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return Ge(this.dbCursor.delete())},e}(),Ke=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new fe,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=Ye(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(v(qe,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return _(!!t,"Object store not part of transaction: "+e),new We(t)},e}(),We=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(v(qe,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(v(qe,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ge(n)},e.prototype.add=function(e){return v(qe,"ADD",this.store.name,e,e),Ge(this.store.add(e))},e.prototype.get=function(e){var t=this;return Ge(this.store.get(e)).next((function(n){return void 0===n&&(n=null),v(qe,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return v(qe,"DELETE",this.store.name,e),Ge(this.store.delete(e))},e.prototype.count=function(){return v(qe,"COUNT",this.store.name),Ge(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){v(qe,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new je((function(n,r){t.onerror=function(e){var t=Ye(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new je((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new He(i),a=t(i.primaryKey,i.value,o);if(a instanceof je){var s=a.catch((function(e){return o.done(),je.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return je.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(_(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Ge(e){return new je((function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=Ye(e.target.error);n(t)}}))}var Qe=!1;function Ye(e){var t=ze.getIOSVersion(s.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new C("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Qe||(Qe=!0,setTimeout((function(){throw r}),0)),r}}return e}var Xe=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return _(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return et(e).iterate({index:rn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=$e(n),nt(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=$e(t),nt(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=tt(e),a=et(e);return a.add({}).next((function(s){_("number"==typeof s,"Auto-generated key is not a number");for(var u=new Ue(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new Te((function(e,t){return Z(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=on.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,on.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),je.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return et(e).get(t).next((function(e){return e?(_(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?je.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return et(e).iterate({index:rn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(_(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return et(e).iterate({index:rn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return et(e).loadAll(rn.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=on.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return tt(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[2],c=_e(r[1]);if(s===n.userId&&t.path.isEqual(c))return et(e).get(u).next((function(e){if(!e)throw g("Dangling document-mutation reference found: "+r+" which points to "+u);_(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Te(Z),i=[];return t.forEach((function(t){var o=on.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=tt(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[2],u=_e(e[1]);a===n.userId&&t.path.isEqual(u)?r=r.add(s):o.done()}));i.push(s)})),je.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;_(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),_(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=on.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Te(Z);return tt(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[2],c=_e(e[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(et(e).get(t).next((function(e){if(null===e)throw g("Dangling document-mutation reference found, which points to "+t);_(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),je.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return Je(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),je.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return je.resolve();var r=IDBKeyRange.lowerBound(on.prefixForUser(t.userId)),i=[];return tt(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=_e(e[1]);i.push(o)}else r.done()})).next((function(){_(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return Ze(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return nt(e).get(this.userId).next((function(e){return e||new nn(t.userId,-1,"")}))},e}();function Ze(e,t,n){var r=on.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return tt(e).iterate({range:o,keysOnly:!0},(function(e,n,r){e[0]===t&&e[1]===i&&(a=!0),r.done()})).next((function(){return a}))}function Je(e,t,n){var r=e.store(rn.store),i=e.store(on.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){_(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=on.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return je.waitFor(o).next((function(){return c}))}function $e(e){return e instanceof Uint8Array?(_(ze.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function et(e){return Bn.getStore(e,rn.store)}function tt(e){return Bn.getStore(e,on.store)}function nt(e){return Bn.getStore(e,nn.store)}var rt=function(e){return e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine",e}({}),it=function(){function e(e,t){this.generatorId=e,_((1&e)===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},e.prototype.after=function(e){return this.seek(e+2),this.next()},e.prototype.seek=function(e){_((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){return new e(rt.QueryCache,2)},e.forSyncEngine=function(){return new e(rt.SyncEngine)},e}(),ot=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=it.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return we.fromTimestamp(new be(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return ut(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return at(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return _(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return at(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return je.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){var n=this;return at(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},e.prototype.retrieveMetadata=function(e){return st(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Bn.getStore(n,fn.store)).put(fn.key,t);var n},e.prototype.saveTargetData=function(e,t){return at(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return at(e).iterate({range:i,index:ln.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=ct(e);return t.forEach((function(t){var a=me(t.path);i.push(o.put(new hn(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),je.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=ct(e);return je.forEach(t,(function(t){var o=me(t.path);return je.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=ct(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ct(e),i=Le();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=_e(e[1]),o=new he(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=me(t.path),r=IDBKeyRange.bound([n],[$(n)],!1,!0),i=0;return ct(e).iterate({index:hn.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){0!==e[0]&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return at(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();function at(e){return Bn.getStore(e,ln.store)}function st(e){return ze.getStore(e,fn.store).get(fn.key).next((function(e){return _(null!==e,"Missing metadata row."),e}))}function ut(e){return st(e).next((function(e){return e.highestListenSequenceNumber}))}function ct(e){return Bn.getStore(e,hn.store)}var lt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new Te(le.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),ht=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),ft=function(e,t){this.version=e,this.transformResults=t},dt=function(e){return e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete",e[e.Verify=4]="Verify",e}({}),pt=function(){function e(e,t){this.updateTime=e,this.exists=t,_(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Bt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Bt:(_(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return n=e.updateTime,(null!=(t=this.updateTime)?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),vt=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&_(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Bt?e.version:we.MIN},e}(),mt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=dt.Set,i}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),_(null==t.transformResults,"Transform results received by SetMutation."),new Bt(this.key,t.version,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=vt.getPostMutationVersion(e);return new Bt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(vt),yt=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=dt.Patch,o}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),_(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new qt(this.key,t.version);var n=this.patchDocument(e);return new Bt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=vt.getPostMutationVersion(e),i=this.patchDocument(e);return new Bt(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Bt?e.data():Ft.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},t}(vt),gt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=dt.Transform,r.precondition=pt.exists(!0),r}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),_(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new qt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Bt(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Bt(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Bt?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?Ft.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&J(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){return _(e instanceof Bt,"Unknown MaybeDocument type "+e),_(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},t.prototype.serverTransformResults=function(e,t){var n=[];_(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Bt&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Bt&&(u=t.field(a.field)),null===u&&n instanceof Bt&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){_(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)e=e.set(this.fieldTransforms[n].field,t[n]);return e},t}(vt),_t=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=dt.Delete,r}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),_(null==t.transformResults,"Transform results received by DeleteMutation."),new jt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&_(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new jt(this.key,we.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(vt),bt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=dt.Verify,r}return o.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){g("VerifyMutation should only be used in Transactions.")},t.prototype.applyToLocalView=function(e,t,n){g("VerifyMutation should only be used in Transactions.")},t.prototype.extractBaseValue=function(e){g("VerifyMutation should only be used in Transactions.")},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(vt),wt=function(e){return e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue",e}({}),kt=function(e){return e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous",e}({}),Ct=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(kt.Estimate,n);case"previous":return new e(kt.Previous,n);case"none":case void 0:return new e(kt.Default,n);default:return g("fromSnapshotOptions() called with invalid options.")}},e}(),St=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return _(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Z(this.typeOrder,e.typeOrder)},e}(),Et=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=wt.NullValue,t.internalValue=null,t}return o.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 4},t.INSTANCE=new t,t}(St),Tt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BooleanValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Z(this,e):this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 4},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(St),It=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.NumberValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue)<(r=e.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(e);var n,r},t.prototype.approximateByteSize=function(){return 8},t}(St);function At(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&At(this.internalValue,e.internalValue)},t}(It),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&At(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(It),Rt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.StringValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Z(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 2*this.internalValue.length},t}(St),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.TimestampValue,n}return o.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Ot?-1:this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 16},t}(St),Ot=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=wt.TimestampValue,r}return o.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===kt.Estimate?new xt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===kt.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof xt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t.prototype.approximateByteSize=function(){return 16+(this.previousValue?this.previousValue.approximateByteSize():0)},t}(St),Pt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BlobValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return this.internalValue._approximateByteSize()},t}(St),Mt=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=wt.RefValue,r}return o.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:he.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return this.databaseId.projectId.length+this.databaseId.database.length+this.key.toString().length},t}(St),Lt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.GeoPointValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return 16},t}(St),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ObjectValue,n}return o.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=Z(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return Z(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(_(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(_(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){_(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t?n.internalValue.get(e):null})),n},t.prototype.fieldMask=function(){var e=new Te(le.comparator);return this.internalValue.forEach((function(n,r){var i=new le([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach((function(t){e=e.add(i.child(t))}))}else e=e.add(i)})),lt.fromSet(e)},t.prototype.approximateByteSize=function(){var e=0;return this.internalValue.inorderTraversal((function(t,n){e+=t.length+n.approximateByteSize()})),e},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new ke(Z)),t}(St),Vt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ArrayValue,n}return o.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return Z(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.approximateByteSize=function(){return this.internalValue.reduce((function(e,t){return e+t.approximateByteSize()}),0)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(St),Ut=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return he.comparator(e.key,t.key)},e}(),Bt=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,_(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return o.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=Ft.EMPTY;A(this.proto.fields||{},(function(n,r){t=t.set(new le([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){_(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):g("Trying to compare documents on fields that don't exist")},t}(Ut),jt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Ut),qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Ut),zt=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(o[0].isEqual(e))return a}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){A(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];e(o[0],o[1])}}))},e.prototype.isEmpty=function(){return N(this.inner)},e}(),Ht=function(){function e(){this.changes=new zt((function(e){return e.toString()})),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return _(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){_(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?je.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){_(!this.changesApplied,"Changes have already been applied.")},e}(),Kt=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){return Gt(e).put(Qt(t),n)},e.prototype.removeEntry=function(e,t){var n=Gt(e),r=Qt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return Gt(e).get(Qt(t)).next((function(e){return n.maybeDecodeDocument(e)}))},e.prototype.getSizedEntry=function(e,t){var n=this;return Gt(e).get(Qt(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:Yt(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=De();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=De(),i=new ke(he.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);o?(r=r.insert(e,o),i=i.insert(e,Yt(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return je.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Gt(e).iterate({range:r},(function(e,t,r){for(var a=he.fromSegments(e);o&&he.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;_(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=xe(),o=t.path.length+1,a={};if(n.isEqual(we.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=un.collectionReadTimeIndex}return Gt(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof Bt&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Ne(),i=this.serializer.toDbTimestampKey(t),o=Gt(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:un.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},e.prototype.getLastReadTime=function(e){var t=this,n=Gt(e),r=we.MIN;return n.iterate({index:un.readTimeIndex,reverse:!0},(function(e,n,i){n.readTime&&(r=t.serializer.fromDbTimestampKey(n.readTime)),i.done()})).next((function(){return r}))},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Wt(e).get(cn.key).next((function(e){return _(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return Wt(e).put(cn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof jt&&t.version.isEqual(we.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new zt((function(e){return e.toString()})),r}return o.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Te((function(e,t){return Z(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(_(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){_(!t.readTime.isEqual(we.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=Yt(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new jt(o,we.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),je.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},t}(Ht),e}();function Wt(e){return Bn.getStore(e,cn.store)}function Gt(e){return Bn.getStore(e,un.store)}function Qt(e){return e.path.toArray()}function Yt(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw g("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Xt=function(){function e(){this.collectionParentIndex=new Zt}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),je.resolve()},e.prototype.getCollectionParents=function(e,t){return je.resolve(this.collectionParentIndex.getEntries(t))},e}(),Zt=function(){function e(){this.index={}}return e.prototype.add=function(e){_(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Te(ue.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Te(ue.comparator)).toArray()},e}(),Jt=9,$t=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;_(n<r&&n>=0&&r<=Jt,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Ke(t);n<1&&r>=1&&(function(e){e.createObjectStore(tn.store)}(e),function(e){e.createObjectStore(nn.store,{keyPath:nn.keyPath}),e.createObjectStore(rn.store,{keyPath:rn.keyPath,autoIncrement:!0}).createIndex(rn.userMutationsIndex,rn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(on.store)}(e),pn(e),function(e){e.createObjectStore(un.store)}(e));var a=je.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(hn.store),e.deleteObjectStore(ln.store),e.deleteObjectStore(fn.store)}(e),pn(e)),a=a.next((function(){return function(e){var t=e.store(fn.store),n=new fn(0,0,we.MIN.toTimestamp(),0);return t.put(fn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(rn.store).loadAll().next((function(n){e.deleteObjectStore(rn.store),e.createObjectStore(rn.store,{keyPath:rn.keyPath,autoIncrement:!0}).createIndex(rn.userMutationsIndex,rn.userMutationsKeyPath,{unique:!0});var r=t.store(rn.store),i=n.map((function(e){return r.put(e)}));return je.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(vn.store,{keyPath:vn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(cn.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(un.store);t.createIndex(un.readTimeIndex,un.readTimeIndexPath,{unique:!1}),t.createIndex(un.collectionReadTimeIndex,un.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(un.store).iterate((function(e,n){t+=Yt(n)})).next((function(){var n=new cn(t);return e.store(cn.store).put(cn.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(nn.store),r=e.store(rn.store);return n.loadAll().next((function(n){return je.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(rn.userMutationsIndex,i).next((function(r){return je.forEach(r,(function(r){_(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return Je(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(hn.store),n=e.store(un.store);return ut(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new ue(n),a=function(e){return[0,me(e)]}(o);r.push(t.get(a).next((function(n){return n?je.resolve():function(n){return t.put(new hn(0,me(n),e))}(o)})))})).next((function(){return je.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(dn.store,{keyPath:dn.keyPath});var n=t.store(dn.store),r=new Zt,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:me(i)})}};return t.store(un.store).iterate({keysOnly:!0},(function(e,t){var n=new ue(e);return i(n.popLast())})).next((function(){return t.store(on.store).iterate({keysOnly:!0},(function(e,t){var n=_e(e[1]);return i(n.popLast())}))}))},e}(),en=function(e,t){this.seconds=e,this.nanoseconds=t},tn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),nn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),rn=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),on=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,me(t)]},e.key=function(e,t,n){return[e,me(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),an=function(e,t){this.path=e,this.readTime=t},sn=function(e,t){this.path=e,this.version=t},un=function(){function e(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),cn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),ln=function(){function e(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),hn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,_(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),fn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),dn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function pn(e){e.createObjectStore(hn.store,{keyPath:hn.keyPath}).createIndex(hn.documentTargetsIndex,hn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(ln.store,{keyPath:ln.keyPath}).createIndex(ln.queryTargetsIndexName,ln.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(fn.store)}var vn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}(),mn=o.__spreadArrays([nn.store,rn.store,on.store,un.store,ln.store,tn.store,fn.store,hn.store],[vn.store]),yn=o.__spreadArrays(mn,[cn.store]),gn=o.__spreadArrays(yn,[dn.store]),_n=function(){function e(){this.collectionParentsCache=new Zt}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(_(t.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:me(i)};return bn(e).put(o)}return je.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[$(t),""],!1,!0);return bn(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(_e(o.parent))}return n}))},e}();function bn(e){return Bn.getStore(e,dn.store)}var wn=function(e){return e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution",e}({}),kn=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=we.MIN),void 0===o&&(o=we.MIN),void 0===a&&(a=w()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),Cn=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=he.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new jt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=he.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new qt(t,n)):g("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Bt){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e);return new un(null,null,i,s=e.hasCommittedMutations,n,r)}if(e instanceof jt){var o=e.key.path.toArray(),a=this.toDbTimestamp(e.version),s=e.hasCommittedMutations;return new un(null,new an(o,a),null,s,n,r)}if(e instanceof qt){o=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new un(new sn(o,u),null,null,!0,n,r)}return g("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new be(e[0],e[1]);return we.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new en(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new be(e.seconds,e.nanoseconds);return we.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new rn(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=be.fromMillis(e.localWriteTimeMs);return new Ue(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(me(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=Le(),n=0,r=e;n<r.length;n++)t=t.add(new he(_e(r[n])));return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):we.MIN,i=e.resumeToken;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new kn(t,e.targetId,wn.Listen,e.lastListenSequenceNumber,n,r,i)},e.prototype.toDbTarget=function(e){_(wn.Listen===e.purpose,"Only queries with purpose "+wn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(_(ze.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new ln(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},e}(),Sn=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=De();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Ne();return i.forEach((function(e,t){t||(t=new jt(e,we.forDeletedDoc())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new he(t)).next((function(e){var t=xe();return e instanceof Bt&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;_(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=xe();return this.indexManager.getCollectionParents(e,i).next((function(a){return je.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return o.addMissingBaseDocuments(e,i=t,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Bt?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Le(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof yt&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Bt&&(c=c.insert(e,t))})),c}))},e}(),En="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tn=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),In=function(){function e(){this.refsByKey=new Te(An.compareByKey),this.refsByTarget=new Te(An.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new An(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new An(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=he.EMPTY,r=new An(n,e),i=new An(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=he.EMPTY,n=new An(t,e),r=new An(t,e+1),i=Le();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new An(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),An=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return he.comparator(e.key,t.key)||Z(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return Z(e.targetOrBatchId,t.targetOrBatchId)||he.comparator(e.key,t.key)},e}(),Nn=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new In,this.targetDataByTarget=new ke(Z),this.targetIdByTarget=new zt((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=we.MIN,_(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new Sn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i=this;return o.__generator(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new Sn(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=Le(),s=0,u=o;s<u.length;s++){t.push((d=u[s]).batchId);for(var c=0,l=d.mutations;c<l.length;c++)a=a.add(l[c].key)}for(var h=0,f=e;h<f.length;h++){var d;i.push((d=f[h]).batchId);for(var p=0,v=d.mutations;p<v.length;p++)a=a.add(v[p].key)}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},e.prototype.localWrite=function(e){var t,n=this,r=be.now(),i=e.reduce((function(e,t){return e.add(t.key)}),Le());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new yt(c.key,l,l.fieldMask(),pt.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):je.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return _(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var s=[];I(t.targetChanges,(function(t,a){var u=i.get(t);if(u){s.push(n.targetCache.removeMatchingKeys(o,a.removedDocuments,t).next((function(){return n.targetCache.addMatchingKeys(o,a.addedDocuments,t)})));var c=a.resumeToken;if(c.length>0){var l=u.withResumeToken(c,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(t,l),e.shouldPersistTargetData(u,l,a)&&s.push(n.targetCache.updateTargetData(o,l))}}}));var u=Ne(),c=Le();if(t.documentUpdates.forEach((function(e,t){c=c.add(e)})),s.push(a.getEntries(o,c).next((function(e){t.documentUpdates.forEach((function(i,c){var l=e.get(i);c instanceof jt&&c.version.isEqual(we.MIN)?(a.removeEntry(i,r),u=u.insert(i,c)):null==l||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(_(!we.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.addEntry(c,r),u=u.insert(i,c)):v("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(we.MIN)){var l=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(e){return _(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));s.push(l)}return je.waitFor(s).next((function(){return a.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,u)}))})).then((function(e){return n.targetDataByTarget=i,e}))},e.shouldPersistTargetData=function(e,t,n){return _(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);_(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.withLastLimboFreeSnapshotVersion(a.snapshotVersion);this.targetDataByTarget=this.targetDataByTarget.insert(o,s)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return je.forEach(e,(function(e){return je.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?je.resolve(r=i):t.targetCache.allocateTargetId(n).next((function(i){return r=new kn(e,i,wn.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?je.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);return _(null!==r,"Tried to release nonexistent target: "+e),this.persistence.runTransaction("Release target",t?"readwrite-idempotent":"readwrite-primary-idempotent",(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?je.resolve():je.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},e.prototype.executeQuery=function(e,t){var n=this,r=we.MIN,i=Le();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:we.MIN,t?i:Le())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=je.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);_(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):_(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs;return e.lastDocumentChangeReadTime=t.readTime,n}))},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t=this;return o.__generator(this,(function(n){switch(n.label){case 0:return e=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(e){return t.remoteDocuments.getLastReadTime(e)}))];case 1:return e.lastDocumentChangeReadTime=n.sent(),[2]}}))}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}();function Dn(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){if(e.code!==k.FAILED_PRECONDITION||e.message!==En)throw e;return v("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Rn(e,t){var n=e[1],r=t[1],i=Z(e[0],t[0]);return 0===i?Z(n,r):i}var xn=function(){function e(e){this.maxElements=e,this.buffer=new Te(Rn),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Rn(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),On={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pn=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Mn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){_(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Pn.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;_(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;v("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(de.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(Dn)}))},e}(),Ln=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return je.resolve(ae.INVALID);var r=new xn(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Pn.COLLECTION_DISABLED?(v("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(On)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(v("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),On):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(v("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),d()<=f.DEBUG&&v("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),je.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),Fn="IndexedDbPersistence",Vn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Un=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return o.__extends(t,e),t}(Tn),Bn=function(){function e(t,n,r,i,o,a,s,u){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new zn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new Cn(s),this.document=i.document,this.targetCache=new ot(this.referenceDelegate,this.serializer),this.indexManager=new _n,this.remoteDocumentCache=new Kt(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new C(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Un)return ze.getStore(e.simpleDbTransaction,t);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!e.isAvailable())throw new C(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){var e=this;return _(!this.started,"IndexedDbPersistence double-started!"),_(null!==this.window,"Expected 'window' to be defined"),ze.openOrCreate(this.dbName,Jt,new $t(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[fn.store],(function(e){return ut(e)}))})).then((function(t){e.listenSequence=new ae(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",gn,(function(t){return qn(t).put(new vn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return v(Fn,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return jn(e).get(tn.key).next((function(e){return je.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return qn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=e.getStore(n,vn.store);return r.loadAll().next((function(e){var n=t.filterActiveClients(e,18e5),i=e.filter((function(e){return-1===n.indexOf(e)}));return je.forEach(i,(function(e){return r.delete(e.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:n.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),n.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(de.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return jn(e).get(tn.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new C(k.FAILED_PRECONDITION,Vn);return!1}}return!(!t.networkEnabled||!t.inForeground)||qn(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){return!(t.clientId===e.clientId||!(!t.networkEnabled&&e.networkEnabled||!t.inForeground&&e.inForeground&&t.networkEnabled===e.networkEnabled))}))}))})).next((function(e){return t.isPrimary!==e&&v(Fn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[tn.store,vn.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[vn.store],(function(t){return qn(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},e.clearPersistence=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return e.isAvailable()?[4,ze.delete(t+e.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return _(this.started,"Cannot initialize MutationQueue before persistence is started."),Xe.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return _(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return _(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return _(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;v(Fn,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly");return this.simpleDb.runTransaction(a?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite",gn,(function(o){return i=new Un(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw m("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new C(k.FAILED_PRECONDITION,En);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return jn(e).get(tn.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new C(k.FAILED_PRECONDITION,Vn)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new tn(this.clientId,this.allowTabSynchronization,Date.now());return jn(e).put(tn.key,t)},e.isAvailable=function(){return ze.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=jn(e);return n.get(tn.key).next((function(e){return t.isLocalClient(e)?(v(Fn,"Releasing primary lease."),n.delete(tn.key)):je.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(m("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(_(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(_("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return v(Fn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(n){return m(Fn,"Failed to get zombied client id.",n),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){m("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function jn(e){return e.store(tn.store)}function qn(e){return e.store(vn.store)}var zn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Ln(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Hn(e,t)},e.prototype.removeReference=function(e,t){return Hn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Hn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?je.resolve(!0):function(e,t){var n=!1;return nt(e).iterateSerial((function(r){return Ze(e,r,t).next((function(e){return e&&(n=!0),je.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),ct(e).delete([0,me(a.path)])}))}));i.push(u)}})).next((function(){return je.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Hn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=ct(e),i=ae.INVALID;return r.iterate({index:hn.documentTargetsIndex},(function(e,r){var o=r.path,a=r.sequenceNumber;0===e[0]?(i!==ae.INVALID&&t(new he(_e(n)),i),i=a,n=o):i=ae.INVALID})).next((function(){i!==ae.INVALID&&t(new he(_e(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Hn(e,t){return ct(e).put(function(e,t){return new hn(0,me(e.path),t)}(t,e.currentSequenceNumber))}var Kn=Number,Wn=Kn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Gn=Kn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Qn=Kn.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Yn(e){return null==e}function Xn(e){return Qn(e)&&e<=Gn&&e>=Wn}var Zn=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";Yn(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Yn(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},e.prototype.isDocumentQuery=function(){return he.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}(),Jn=function(e){return e.First="F",e.Last="L",e}({}),$n=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Jn.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)this.memoizedOrderBy=e.isKeyField()?[hr]:[new lr(e),hr];else{_(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:ur.ASCENDING)===ur.ASCENDING?hr:fr)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){_(null==this.getInequalityFilterField()||!(t instanceof nr)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),_(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){_(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Jn.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Jn.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return _(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!Yn(this.limit)&&this.limitType===Jn.First},e.prototype.hasLimitToLast=function(){return!Yn(this.limit)&&this.limitType===Jn.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof nr&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof nr&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Jn.First)this.memoizedTarget=new Zn(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t];e.push(new lr(r.field,r.dir===ur.DESCENDING?ur.ASCENDING:ur.DESCENDING))}var i=this.endAt?new cr(this.endAt.position,!this.endAt.before):null,o=this.startAt?new cr(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new Zn(this.path,this.collectionGroup,e,this.filters,this.limit,i,o)}return this.memoizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):he.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){_(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),er=function(){},tr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return g("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),nr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return o.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===tr.IN?(_(r instanceof Vt,"Comparing on key with IN, but filter value not an ArrayValue"),_(r.internalValue.every((function(e){return e instanceof Mt})),"Comparing on key with IN, but an array value was not a RefValue"),new ir(e,r)):(_(r instanceof Mt,"Comparing on key, but filter value not a RefValue"),_(n!==tr.ARRAY_CONTAINS&&n!==tr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new rr(e,n,r));if(r.isEqual(Et.INSTANCE)){if(n!==tr.EQUAL)throw new C(k.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Dt.NAN)){if(n!==tr.EQUAL)throw new C(k.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===tr.ARRAY_CONTAINS?new or(e,r):n===tr.IN?(_(r instanceof Vt,"IN filter has invalid value: "+r.toString()),new ar(e,r)):n===tr.ARRAY_CONTAINS_ANY?(_(r instanceof Vt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new sr(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case tr.LESS_THAN:return e<0;case tr.LESS_THAN_OR_EQUAL:return e<=0;case tr.EQUAL:return 0===e;case tr.GREATER_THAN:return e>0;case tr.GREATER_THAN_OR_EQUAL:return e>=0;default:return g("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[tr.LESS_THAN,tr.LESS_THAN_OR_EQUAL,tr.GREATER_THAN,tr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(er),rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.matches=function(e){var t=he.comparator(e.key,this.value.key);return this.matchesComparison(t)},t}(nr),ir=function(e){function t(t,n){var r=e.call(this,t,tr.IN,n)||this;return r.value=n,r}return o.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},t}(nr),or=function(e){function t(t,n){return e.call(this,t,tr.ARRAY_CONTAINS,n)||this}return o.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Vt&&t.contains(this.value)},t}(nr),ar=function(e){function t(t,n){var r=e.call(this,t,tr.IN,n)||this;return r.value=n,r}return o.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(nr),sr=function(e){function t(t,n){var r=e.call(this,t,tr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return o.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Vt&&n.internalValue.some((function(e){return t.value.contains(e)}))},t}(nr),ur=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),cr=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},e.prototype.sortsBeforeDocument=function(e,t){_(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())_(o instanceof Mt,"Bound has a non-key value where the key path is being used."),n=he.comparator(o.key,t.key);else{var a=t.field(i.field);_(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===ur.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++)if(!this.position[t].isEqual(e.position[t]))return!1;return!0},e}(),lr=function(){function e(e,t){this.field=e,void 0===t&&(t=ur.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Bt.compareByKey(e,t):Bt.compareByField(this.field,e,t);switch(this.dir){case ur.ASCENDING:return n;case ur.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),hr=new lr(le.keyField(),ur.ASCENDING),fr=new lr(le.keyField(),ur.DESCENDING),dr=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return _(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(we.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(o){var a=i.applyQuery(t,o);return(t.hasLimitToFirst()||t.hasLimitToLast())&&i.needsRefill(t.limitType,a,r,n)?i.executeFullCollectionScan(e,t):(d()<=f.DEBUG&&v("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),i.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.applyQuery=function(e,t){var n=new Te((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof Bt&&e.matches(r)&&(n=n.add(r))})),n},e.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Jn.First?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.executeFullCollectionScan=function(e,t){return d()<=f.DEBUG&&v("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,we.MIN)},e}(),pr=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new Te(An.compareByKey)}return e.prototype.checkEmpty=function(e){return je.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");_(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return _(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,je.resolve()},e.prototype.getLastStreamToken=function(e){return je.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,je.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){_(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&_(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Ue(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new An(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return je.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return je.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return _(null!=n,"Failed to find local mutation batch."),je.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.indexOfBatchId(t+1),r=n<0?0:n;return je.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return je.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return je.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new An(t,0),i=new An(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){_(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);_(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),je.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Te(Z);return t.forEach((function(e){var t=new An(e,0),i=new An(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){_(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),je.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){_(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;he.isDocumentKey(i)||(i=i.child(""));var o=new An(new he(i),0),a=new Te(Z);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),je.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;_(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return je.forEach(t.mutations,(function(i){var o=new An(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new An(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return je.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&_(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),je.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return _(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return _(n.batchId===e,"If found batch must match"),n},e}(),vr=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new ke(he.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){_(!n.isEqual(we.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return je.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=De();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),je.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){_(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=xe(),i=new he(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.value,u=s.maybeDocument,c=s.readTime;if(!t.path.isPrefixOf(a.key.path))break;c.compareTo(n)<=0||u instanceof Bt&&t.matches(u)&&(r=r.insert(u.key,u))}return je.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return je.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.getLastReadTime=function(e){return je.resolve(we.MIN)},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return je.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return o.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),je.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Ht),e}(),mr=function(){function e(e){this.persistence=e,this.targets=new zt((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=we.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new In,this.targetCount=0,this.targetIdGenerator=it.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),je.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return je.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return je.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,je.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),je.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return _(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,je.resolve()},e.prototype.updateTargetData=function(e,t){return _(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),je.resolve()},e.prototype.removeTargetData=function(e,t){return _(this.targetCount>0,"Removing a target from an empty cache"),_(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,je.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),je.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return je.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return je.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return g("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),je.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),je.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),je.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return je.resolve(n)},e.prototype.containsKey=function(e,t){return je.resolve(this.references.containsKey(t))},e}(),yr=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new ae(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new mr(this),this.indexManager=new Xt,this.remoteDocumentCache=new vr(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n){return new e(t,(function(e){return new br(e,n)}))},e.createEagerPersistence=function(t){return new e(t,(function(e){return new _r(e)}))},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new pr(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;v("MemoryPersistence","Starting transaction:",e);var i=new gr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.mutationQueuesContainKey=function(e,t){return je.or((n=this.mutationQueues,r=[],A(n,(function(e,t){return r.push(t)})),r).map((function(n){return function(){return n.containsKey(e,t)}})));var n,r},e}(),gr=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return o.__extends(t,e),t}(Tn),_r=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw g("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),je.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),je.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),je.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return je.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return je.resolve(n.inMemoryPins.containsKey(t))}])},e}(),br=function(){function e(e,t){this.persistence=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new zt((function(e){return me(e.path)})),this.garbageCollector=new Ln(this,t)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return je.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return je.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?je.resolve():t(i)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),je.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),je.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),je.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),je.resolve()},e.prototype.documentSize=function(e){var t=e.key.toString().length;return e instanceof Bt&&(t+=e.data().approximateByteSize()),t},e.prototype.isPinned=function(e,t,n){var r=this;return je.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return je.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return je.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),wr=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&v("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),kr=function(e){return e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff",e}({}),Cr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=kr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new wr(e,t)}return e.prototype.isStarted=function(){return this.state===kr.Starting||this.state===kr.Open||this.state===kr.Backoff},e.prototype.isOpen=function(){return this.state===kr.Open},e.prototype.start=function(){this.state!==kr.Error?(_(this.state===kr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(kr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){_(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=kr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.isOpen()?[2,this.close(kr.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return _(this.isStarted(),"Only started streams should be closed."),_(e===kr.Error||Yn(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==kr.Error?this.backoff.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(m(t.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===k.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;_(this.state===kr.Initial,"Must be in initial state to auth"),this.state=kr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new C(k.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;_(this.state===kr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return _(t.state===kr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=kr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;_(this.state===kr.Error,"Should only perform backoff when in Error state"),this.state=kr.Backoff,this.backoff.backoffAndRun((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return _(this.state===kr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=kr.Initial,this.start(),_(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return _(this.isStarted(),"Can't handle server close on non-started stream"),v("PersistentStream","close with error: "+e),this.stream=null,this.close(kr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(v("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Sr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,de.ListenStreamConnectionBackoff,de.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return o.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Cr),Er=function(e){function t(t,n,r,i,o){var a=e.call(this,t,de.WriteStreamConnectionBackoff,de.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=w(),a}return o.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(_(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return _(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){_(this.isOpen(),"Writing handshake requires an opened stream"),_(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;_(this.isOpen(),"Writing mutations requires an opened stream"),_(this.handshakeComplete_,"Handshake must be complete before writing mutations"),_(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(Cr),Tr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Er(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Sr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Ne();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);_(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===k.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===k.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e}(),Ir=function(){function e(e){this.datastore=e,this.readVersions=Pe(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new C(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof jt||e instanceof Bt?n.recordVersion(e):g("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new _t(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t=this;return o.__generator(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),e.forEach((function(e,n){t.mutations.push(new bt(e,t.precondition(e)))})),[4,this.datastore.commit(this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof Bt)t=e.version;else{if(!(e instanceof jt))throw g("Document in a transaction was a "+e.constructor.name);t=we.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new C(k.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?pt.updateTime(t):pt.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(we.forDeletedDoc()))throw new C(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pt.updateTime(t)}return pt.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){_(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}(),Ar=function(e){return e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline",e}({}),Nr=function(e){return e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState",e}({}),Dr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Ar.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Ar.Unknown),_(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(de.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,_(e.state===Ar.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Ar.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===Ar.Online?(this.setAndBroadcast(Ar.Unknown),_(0===this.watchStreamFailures,"watchStreamFailures must be 0"),_(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Ar.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Ar.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(m(t),this.shouldWarnClientIsOffline=!1):v("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),Rr=function(e){return e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e}({});function xr(e){switch(e){case k.OK:return g("Treated status OK as error");case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return g("Unknown status code: "+e)}}function Or(e){if(void 0===e)return m("GRPC error has no .code"),k.UNKNOWN;switch(e){case Rr.OK:return k.OK;case Rr.CANCELLED:return k.CANCELLED;case Rr.UNKNOWN:return k.UNKNOWN;case Rr.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Rr.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Rr.INTERNAL:return k.INTERNAL;case Rr.UNAVAILABLE:return k.UNAVAILABLE;case Rr.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Rr.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Rr.NOT_FOUND:return k.NOT_FOUND;case Rr.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Rr.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Rr.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Rr.ABORTED:return k.ABORTED;case Rr.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Rr.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Rr.DATA_LOSS:return k.DATA_LOSS;default:return g("Unknown status code: "+e)}}function Pr(e){if(void 0===e)return Rr.OK;switch(e){case k.OK:return Rr.OK;case k.CANCELLED:return Rr.CANCELLED;case k.UNKNOWN:return Rr.UNKNOWN;case k.DEADLINE_EXCEEDED:return Rr.DEADLINE_EXCEEDED;case k.RESOURCE_EXHAUSTED:return Rr.RESOURCE_EXHAUSTED;case k.INTERNAL:return Rr.INTERNAL;case k.UNAVAILABLE:return Rr.UNAVAILABLE;case k.UNAUTHENTICATED:return Rr.UNAUTHENTICATED;case k.INVALID_ARGUMENT:return Rr.INVALID_ARGUMENT;case k.NOT_FOUND:return Rr.NOT_FOUND;case k.ALREADY_EXISTS:return Rr.ALREADY_EXISTS;case k.PERMISSION_DENIED:return Rr.PERMISSION_DENIED;case k.FAILED_PRECONDITION:return Rr.FAILED_PRECONDITION;case k.ABORTED:return Rr.ABORTED;case k.OUT_OF_RANGE:return Rr.OUT_OF_RANGE;case k.UNIMPLEMENTED:return Rr.UNIMPLEMENTED;case k.DATA_LOSS:return Rr.DATA_LOSS;default:return g("Unknown status code: "+e)}}var Mr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||he.comparator(t.key,n.key)}:function(e,t){return he.comparator(e.key,t.key)},this.keyedMap=xe(),this.sortedSet=new ke(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Lr=function(e){return e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata",e}({}),Fr=function(e){return e[e.Local=0]="Local",e[e.Synced=1]="Synced",e}({}),Vr=function(){function e(){this.changeMap=new ke(he.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Lr.Added&&n.type===Lr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Lr.Metadata&&n.type!==Lr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Lr.Modified&&n.type===Lr.Modified?this.changeMap=this.changeMap.insert(t,{type:Lr.Modified,doc:e.doc}):e.type===Lr.Modified&&n.type===Lr.Added?this.changeMap=this.changeMap.insert(t,{type:Lr.Added,doc:e.doc}):e.type===Lr.Removed&&n.type===Lr.Added?this.changeMap=this.changeMap.remove(t):e.type===Lr.Removed&&n.type===Lr.Modified?this.changeMap=this.changeMap.insert(t,{type:Lr.Removed,doc:n.doc}):e.type===Lr.Added&&n.type===Lr.Removed?this.changeMap=this.changeMap.insert(t,{type:Lr.Modified,doc:e.doc}):g("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Ur=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:Lr.Added,doc:e})})),new e(t,n,Mr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Br=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=jr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(we.MIN,i,Ve(),Ne(),Le())},e}(),jr=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(w(),n,Le(),Le(),Le())},e}(),qr=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},zr=function(e,t){this.targetId=e,this.existenceFilter=t},Hr=function(e){return e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset",e}({}),Kr=function(e,t,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Wr=function(){function e(){this.pendingResponses=0,this.documentChanges=Yr(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=Le(),t=Le(),n=Le();return this.documentChanges.forEach((function(r,i){switch(i){case Lr.Added:e=e.add(r);break;case Lr.Modified:t=t.add(r);break;case Lr.Removed:n=n.add(r);break;default:g("Encountered invalid change type: "+i)}})),new jr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Yr()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Gr=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Ne(),this.pendingDocumentTargetMapping=Qr(),this.pendingTargetResets=new Te(Z)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Bt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof jt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],e.key,e.newDoc)},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Hr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Hr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Hr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),_(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Hr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Hr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:g("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):I(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new he(i.path);this.removeDocumentFromTarget(t,o,new jt(o,we.forDeletedDoc()))}else _(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};I(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new he(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new jt(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=Le();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===wn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Br(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Ne(),this.pendingDocumentTargetMapping=Qr(),this.pendingTargetResets=new Te(Z),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Lr.Modified:Lr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Lr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Wr),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Te(Z),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||v("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;_(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Wr,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function Qr(){return new ke(he.comparator)}function Yr(){return new ke(he.comparator)}var Xr=function(){function e(e,t,n,r,i){var a=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return o.__awaiter(a,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(v("RemoteStore","Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Dr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Ar.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Ar.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(v("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return v("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Ar.Unknown),[2]}}))}))},e.prototype.listen=function(e){E(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){_(E(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),N(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Ar.Unknown))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){_(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Gr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!N(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(t){return I(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return void 0===e&&_(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Ar.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Ar.Online),e instanceof Kr&&e.state===Hr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof qr?this.watchChangeAggregator.handleDocumentChange(e):e instanceof zr?this.watchChangeAggregator.handleExistenceFilter(e):(_(e instanceof Kr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(we.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;_(!e.isEqual(we.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return I(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(w(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new kn(n.target,e,wn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;_(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return E(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(e=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){_(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){_(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++)e.writeStream.writeMutations(n[t].mutations)})).catch(Dn)},e.prototype.onMutationResult=function(e,t){var n=this;_(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Be.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(n){return void 0===e&&_(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},e.prototype.handleHandshakeError=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return xr(e.code)?(v("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(Dn)]):[2]}))}))},e.prototype.handleWriteError=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n=this;return o.__generator(this,(function(r){return xr(i=e.code)&&i!==k.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},e.prototype.createTransaction=function(){return new Ir(this.datastore)},e.prototype.restartNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Ar.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},e.prototype.handleCredentialChange=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(v("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Ar.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),Zr=function(){function e(e,t){if(R("GeoPoint",arguments,2),M("GeoPoint","number",1,e),M("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new C(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new C(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return Z(this._lat,e._lat)||Z(this._long,e._long)},e}(),Jr=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Ot(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),$r=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ni(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Vt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&J(t.elements,this.elements)},e}(),ei=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ni(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Vt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&J(t.elements,this.elements)},e}(),ti=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);return n instanceof Nt&&this.operand instanceof Nt?new Nt(n.internalValue+this.operand.internalValue):new Dt(n.internalValue+this.operand.internalValue)},e.prototype.applyToRemoteDocument=function(e,t){return _(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof It?e:new Nt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function ni(e){return e instanceof Vt?e.internalValue.slice():[]}var ri,ii,oi=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),ai=((ri={})[ur.ASCENDING.name]="ASCENDING",ri[ur.DESCENDING.name]="DESCENDING",ri),si=((ii={})[tr.LESS_THAN.name]="LESS_THAN",ii[tr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",ii[tr.GREATER_THAN.name]="GREATER_THAN",ii[tr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",ii[tr.EQUAL.name]="EQUAL",ii[tr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",ii[tr.IN.name]="IN",ii[tr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",ii),ui=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ci(e,t){_(!Yn(e),t+" is missing")}function li(e){return"number"==typeof e?e:"string"==typeof e?Number(e):g("can't parse "+e)}var hi=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?k.UNKNOWN:Or(e.code);return new C(t,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||Yn(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return Yn(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);_(!!e,"Cannot deserialize null or undefined timestamp.");var t=li(e.seconds||"0");return new be(t,e.nanos||0)},e.prototype.fromIso8601String=function(e){var t=0,n=ui.exec(e);if(_(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new be(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(_(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ne.fromBase64String(e)):(_(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ne.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return _(!!e,"Trying to deserialize version that isn't set"),we.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=ue.fromString(e);return _(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return _(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),_(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new he(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ue.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new ue(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new ue(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return _(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof Et)return{nullValue:"NULL_VALUE"};if(e instanceof Tt)return{booleanValue:e.value()};if(e instanceof Nt)return{integerValue:""+e.value()};if(e instanceof Dt){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Rt?{stringValue:e.value()}:e instanceof Ft?{mapValue:this.toMapValue(e)}:e instanceof Vt?{arrayValue:this.toArrayValue(e)}:e instanceof xt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Lt?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Pt?{bytesValue:this.toBytes(e.value())}:e instanceof Mt?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:g("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Et.INSTANCE;if("booleanValue"in e)return Tt.of(e.booleanValue);if("integerValue"in e)return new Nt(li(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Dt.NAN;if("Infinity"===e.doubleValue)return Dt.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Dt.NEGATIVE_INFINITY}return new Dt(e.doubleValue)}if("stringValue"in e)return new Rt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e)return ci(e.arrayValue,"arrayValue"),new Vt((e.arrayValue.values||[]).map((function(e){return t.fromValue(e)})));if("timestampValue"in e)return ci(e.timestampValue,"timestampValue"),new xt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e)return ci(e.geoPointValue,"geoPointValue"),new Lt(new Zr(e.geoPointValue.latitude||0,e.geoPointValue.longitude||0));if("bytesValue"in e){ci(e.bytesValue,"bytesValue");var n=this.fromBlob(e.bytesValue);return new Pt(n)}if("referenceValue"in e){ci(e.referenceValue,"referenceValue");var r=this.fromResourceName(e.referenceValue),i=new oe(r.get(1),r.get(3)),o=new he(this.extractLocalPathFromResourceName(r));return new Mt(i,o)}return g("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return _(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Bt(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=Ft.EMPTY;return A(e,(function(e,r){n=n.set(new le([e]),t.fromValue(r))})),n},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){var t=this;_(!!e.found,"Tried to deserialize a found document from a missing document."),ci(e.found.name,"doc.found.name"),ci(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Bt(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},e.prototype.fromMissing=function(e){_(!!e.missing,"Tried to deserialize a missing document from a found document."),_(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new jt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):g("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Hr.Added:return"ADD";case Hr.Current:return"CURRENT";case Hr.NoChange:return"NO_CHANGE";case Hr.Removed:return"REMOVE";case Hr.Reset:return"RESET";default:return g("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof zr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof qr){var t;if(e.newDoc instanceof Bt)return{documentChange:{document:{name:this.toName((t=e.newDoc).key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}};if(e.newDoc instanceof jt)return{documentDelete:{document:this.toName((t=e.newDoc).key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Kr){var n=void 0;return e.cause&&(n={code:Pr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){ci(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new Kr(r,i,o,s||null)}else if("documentChange"in e){ci(e.documentChange,"documentChange");var u=e.documentChange;ci(u.document,"documentChange.name"),ci(u.document.name,"documentChange.document.name"),ci(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Bt(c,l,{},void 0,u.document,(function(e){return n.fromValue(e)}));t=new qr(u.targetIds||[],u.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){ci(e.documentDelete,"documentDelete");var f=e.documentDelete;ci(f.document,"documentDelete.document"),c=this.fromName(f.document),l=f.readTime?this.fromVersion(f.readTime):we.forDeletedDoc(),h=new jt(c,l),t=new qr([],f.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){ci(e.documentRemove,"documentRemove");var d=e.documentRemove;ci(d.document,"documentRemove"),c=this.fromName(d.document),t=new qr([],d.removedTargetIds||[],c,null)}else{if(!("filter"in e))return g("Unknown change type "+JSON.stringify(e));ci(e.filter,"filter");var p=e.filter;ci(p.targetId,"filter.targetId");var v=new oi(p.count||0);t=new zr(p.targetId,v)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Hr.NoChange:"ADD"===e?Hr.Added:"REMOVE"===e?Hr.Removed:"CURRENT"===e?Hr.Current:"RESET"===e?Hr.Reset:g("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return we.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?we.MIN:t.readTime?this.fromVersion(t.readTime):we.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof mt)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof _t)t={delete:this.toName(e.key)};else if(e instanceof yt)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else if(e instanceof gt)t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}};else{if(!(e instanceof bt))return g("Unknown mutation type "+e.type);t={verify:this.toName(e.key)}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):pt.NONE;if(e.update){ci(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new yt(r,i,o,n)}return new mt(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new _t(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return _(!0===n.exists,'Transforms only support precondition "exists == true"'),new gt(r,a)}return e.verify?(r=this.fromName(e.verify),new bt(r,n)):g("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return _(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?pt.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?pt.exists(e.exists):pt.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=this.fromVersion(e.updateTime?e.updateTime:t);r.isEqual(we.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new ft(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(_(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof Jr)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $r)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof ei)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof ti)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw g("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)_("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=Jr.instance;else if("appendMissingElements"in e)n=new $r((e.appendMissingElements.values||[]).map((function(e){return t.fromValue(e)})));else if("removeAllFromArray"in e)n=new ei((e.removeAllFromArray.values||[]).map((function(e){return t.fromValue(e)})));else if("increment"in e){var r=this.fromValue(e.increment);_(r instanceof It,"NUMERIC_ADD transform requires a NumberValue"),n=new ti(r)}else g("Unknown transform proto: "+JSON.stringify(e));var i=le.fromServerFormat(e.fieldPath);return new ht(i,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;return _(1===t,"DocumentsTarget contained other than 1 document: "+t),$n.atPath(this.fromQueryPath(e.documents[0])).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(_(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(_(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new $n(t,i,s,a,u,Jn.First,c,l).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case wn.Listen:return null;case wn.ExistenceFilterMismatch:return"existence-filter-mismatch";case wn.LimboResolution:return"limbo-document";default:return g("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof nr?t.toUnaryOrFieldFilter(e):g("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):g("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new cr(r,n)},e.prototype.toDirection=function(e){return ai[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return ur.ASCENDING;case"DESCENDING":return ur.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return si[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return tr.EQUAL;case"GREATER_THAN":return tr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return tr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return tr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return tr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return tr.ARRAY_CONTAINS;case"IN":return tr.IN;case"ARRAY_CONTAINS_ANY":return tr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return g("Unspecified operator");default:return g("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return le.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new lr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return nr.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===tr.EQUAL){if(e.value.isEqual(Dt.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Et.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return nr.create(t,tr.EQUAL,Dt.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return nr.create(n,tr.EQUAL,Et.INSTANCE);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return le.fromServerFormat(e)}));return lt.fromArray(t)},e}(),fi=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},di=function(){function e(e){this.syncEngine=e,this.queries=new zt((function(e){return e.canonicalId()})),this.onlineState=Ar.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new fi,this.queries.set(t,r)),r.listeners.push(e),_(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap&&e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return o.__generator(this,(function(o){return n=!1,(r=this.queries.get(t=e.query))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=this.queries.get(i.query);if(o){for(var a=0,s=o.listeners;a<s.length;a++)s[a].onViewSnapshot(i)&&(t=!0);o.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)})),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},e}(),pi=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Ar.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(_(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Lr.Metadata&&t.push(i)}e=new Ur(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){return _(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache||(this.options.waitForSyncWhenOnline&&t!==Ar.Offline?(_(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Ar.Offline)},e.prototype.shouldRaiseEvent=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){_(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Ur.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),vi=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=Le(),i=Le(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Lr.Added:r=r.add(s.doc.key);break;case Lr.Removed:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),mi=function(e){this.key=e},yi=function(e){this.key=e},gi=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Le(),this.mutatedKeys=Le(),this.documentSet=new Mr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Vr,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof Bt?t:null;h&&(_(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:Lr.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:Lr.Modified,doc:h}),p=!0,(u&&n.query.docComparator(h,u)>0||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:Lr.Added,doc:h}),p=!0):l&&!h&&(r.track({type:Lr.Removed,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Lr.Removed,doc:l})}return _(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;_(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case Lr.Added:return 1;case Lr.Modified:case Lr.Metadata:return 2;case Lr.Removed:return 0;default:return g("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Fr.Synced:Fr.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Ur(this.query,e.documentSet,i,o,e.mutatedKeys,s===Fr.Local,u,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Ar.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Vr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return _(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Le(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new yi(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new mi(e))})),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=Le();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return Ur.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Fr.Local)},e}(),_i=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new wr(this.asyncQueue,de.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return o.__generator(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!Yn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(m){return this.deferred.reject(m),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!xr(t)}return!1},e}(),bi=function(e,t,n){this.query=e,this.targetId=t,this.view=n},wi=function(e){this.key=e,this.receivedDocument=!1},ki=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new zt((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new ke(he.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new In,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=it.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Ar.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){_(null!==e,"SyncEngine listener cannot be null"),_(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(this.sharedClientState.addLocalQueryTarget(t=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=o.sent(),a=this.sharedClientState.addLocalQueryTarget(i.targetId),[4,this.initializeViewAndComputeSnapshot(e,t=i.targetId,"current"===a)];case 3:n=o.sent(),this.isPrimary&&this.remoteStore.listen(i),o.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,u,c;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=o.sent(),i=new gi(e,r.remoteKeys),a=i.computeDocChanges(r.documents),s=jr.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Ar.Offline),_(0===(u=i.applyChanges(a,!0===this.isPrimary,s)).limboChanges.length,"View returned limbo docs before target ack from the server."),_(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new bi(e,t,i),this.queryViewsByQuery.set(e,c),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,u.snapshot]}}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},e.prototype.unlisten=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return o.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),_(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),(n=this.queriesByTarget[t.targetId]).length>1?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(Dn)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},e.prototype.runTransaction=function(e,t,n){new _i(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),A(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(_(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?_(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(_(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Dn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Nr.RemoteStore||!this.isPrimary&&t===Nr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);_(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a,s,u=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),(r=(n=this.limboResolutionsByTarget[e])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new ke(he.comparator)).insert(r,new jt(r,we.forDeletedDoc())),a=Le().add(r),s=new Br(we.MIN,{},new Te(Z),i,a),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return u.removeAndCleanupTarget(e,t)})).catch(Dn)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(v("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):g("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(t=e.batch.batchId,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Dn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.rejectFailedWrite=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Dn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.registerPendingWritesCallback=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||v("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}}))}))},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new C(k.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new ke(Z)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(_(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),_(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof mi?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof yi?(v("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):g("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){v("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=$n.atPath(t.path);this.limboResolutionsByTarget[n]=new wi(t),this.remoteStore.listen(new kn(r.toTarget(),n,wn.LimboResolution,ae.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a=this;return o.__generator(this,(function(o){switch(o.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(o,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?a.localStore.executeQuery(s.query,!1).then((function(e){return s.view.computeDocChanges(e.documents,t)})):t})).then((function(e){var i=s.view.applyChanges(e,!0===a.isPrimary,t&&t.targetChanges[s.targetId]);if(a.updateTrackedLimbos(s.targetId,i.limboChanges),i.snapshot){a.isPrimary&&a.sharedClientState.updateQueryState(s.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var o=vi.fromSnapshot(s.targetId,i.snapshot);r.push(o)}})))})),[4,Promise.all(i)];case 1:return o.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return o.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){_(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a,s,u=this;return o.__generator(this,(function(o){switch(o.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return o.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=o.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),I(this.queriesByTarget,(function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then((function(){return u.removeAndCleanupTarget(e),u.localStore.releaseTarget(e,!0)})),u.remoteStore.unlisten(e)})),[4,s]);case 4:return o.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return o.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;I(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new ke(he.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a,s,u,c,l,h,f,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:t=[],n=[],r=0,i=e,o.label=1;case 1:return r<i.length?(s=void 0,(u=this.queriesByTarget[a=i[r]])&&0!==u.length?[4,this.localStore.releaseTarget(a,!0)]:[3,8]):[3,14];case 2:return o.sent(),[4,this.localStore.allocateTarget(u[0].toTarget())];case 3:s=o.sent(),c=0,l=u,o.label=4;case 4:return c<l.length?(_(!!(f=this.queryViewsByQuery.get(h=l[c])),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(f)]):[3,7];case 5:(d=o.sent()).snapshot&&n.push(d.snapshot),o.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return _(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(a)];case 9:return _(!!(p=o.sent()),"Target for id "+a+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return s=o.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),a,!1)];case 11:o.sent(),o.label=12;case 12:t.push(s),o.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},e.prototype.synthesizeTargetToQuery=function(e){return new $n(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Jn.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return v("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=Br.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:g("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,l,h,f=this;return o.__generator(this,(function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,d.label=1;case 1:return n<r.length?(_(!this.queriesByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return _(!!(i=d.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return a=d.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),a.targetId,!1)];case 4:d.sent(),this.remoteStore.listen(a),d.label=5;case 5:return n++,[3,1];case 6:s=function(e){return o.__generator(this,(function(t){switch(t.label){case 0:return u.queriesByTarget[e]?[4,u.localStore.releaseTarget(e,!1).then((function(){f.remoteStore.unlisten(e),f.removeAndCleanupTarget(e)})).catch(Dn)]:[2,"continue"];case 1:return t.sent(),[2]}}))},u=this,c=0,l=t,d.label=7;case 7:return c<l.length?[5,s(h=l[c])]:[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return Le().add(t.key);var n=Le(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);_(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},e}(),Ci=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}();function Si(e,t){return _(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),"firestore_clients_"+e+"_"+t}function Ei(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Ti(e,t){return"firestore_targets_"+e+"_"+t}var Ii="SharedClientState",Ai=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,_(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new C(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(m(Ii,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ni=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,_(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new C(r.error.code,r.error.message)),i?new e(t,r.state,o):(m(Ii,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Di=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ve(),a=0;i&&a<r.activeTargetIds.length;++a)i=Xn(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(m(Ii,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Ri=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in Ar&&"string"==typeof n.clientId?new e(n.clientId,Ar[n.onlineState]):(m(Ii,"Failed to parse online state: "+t),null)},e}(),xi=function(){function e(){this.activeTargetIds=Ve()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Oi=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new C(k.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=Si(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new xi,this.clientStateKeyRe=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.onlineStateKey=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,u,c,l,h=this;return o.__generator(this,(function(o){switch(o.label){case 0:return _(!this.started,"WebStorageSharedClientState already started"),_(null!==this.syncEngine,"syncEngine property must be set before calling start()"),_(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=o.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(Si(this.persistenceKey,r)))&&(a=Di.fromWebStorageEntry(r,i))&&(this.activeClients[a.clientId]=a);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)this.handleWebStorageEvent(l[c]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=Ve();return A(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ti(this.persistenceKey,e));if(n){var r=Ni.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Ti(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return v(Ii,"READ",e,t),t},e.prototype.setItem=function(e,t){v(Ii,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){v(Ii,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(v(Ii,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,n,r,i,a,s;return o.__generator(this,(function(o){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(a=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(a)]}else e.key===this.sequenceNumberKey&&(_(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=ae.INVALID;if(null!=e)try{var n=JSON.parse(e);_("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(r){m(Ii,"Failed to read sequence number from WebStorage",r)}return t}(e.newValue))!==ae.INVALID&&this.sequenceNumberHandler(s));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Ai(this.currentUser,e,t,n),i=Ei(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=Ei(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:Ar[e]}))},e.prototype.persistQueryTargetState=function(e,t,n){var r=Ti(this.persistenceKey,e),i=new Ni(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return _(null!==n,"Cannot parse client state key '"+e+"'"),Di.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);_(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]);return Ai.fromWebStorageEntry(new Ci(void 0!==n[2]?n[2]:null),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);_(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Ni.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Ri.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(v(Ii,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),a=[],s=[];return i.forEach((function(e){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(t){return r.has(e)||a.push(e),[2]}))}))})),r.forEach((function(e){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(t){return i.has(e)||s.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(a,s)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),Pi=function(){function e(){this.localState=new xi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new xi,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Mi=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return Pn.withCacheSize(this.cacheSizeBytes)},e}(),Li=function(){},Fi=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=X.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new fe,r=new fe,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Mi?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof C?e.code===k.FAILED_PRECONDITION||e.code===k.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new C(k.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Bn.buildStoragePrefix(this.databaseInfo),i=new hi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,a;return o.__generator(this,(function(o){switch(o.label){case 0:if(t.synchronizeTabs&&!Oi.isAvailable(this.platform))throw new C(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Oi(this.asyncQueue,this.platform,r,this.clientId,e):new Pi,[4,Bn.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return a=o.sent(),this.persistence=a,[2,a.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=yr.createEagerPersistence(this.clientId),this.sharedClientState=new Pi,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return v("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return o.__awaiter(n,void 0,void 0,(function(){var n,i,a,s,u,c=this;return o.__generator(this,(function(l){switch(l.label){case 0:return n=new dr,this.localStore=new Nn(this.persistence,n,e),[4,this.localStore.start()];case 1:return l.sent(),t&&(this.lruScheduler=new Mn(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),a=this.platform.newSerializer(this.databaseInfo.databaseId),s=new Tr(this.asyncQueue,r,this.credentials,a),u=function(e){return c.syncEngine.applyOnlineStateChange(e,Nr.SharedClientState)},this.remoteStore=new Xr(this.localStore,s,this.asyncQueue,(function(e){return c.syncEngine.applyOnlineStateChange(e,Nr.RemoteStore)}),i),this.syncEngine=new ki(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new di(this.syncEngine),[4,this.sharedClientState.start()];case 2:return l.sent(),[4,this.remoteStore.start()];case 3:return l.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return o.__awaiter(c,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return o.__awaiter(c,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),v("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new fe;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new pi(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Bt)return e;if(e instanceof jt)return null;throw new C(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new gi(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new fe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new fe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},e}(),Vi=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Ui=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];P("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(M("FieldPath","string",n,e[n]),0===e[n].length)throw new C(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new le(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(le.keyField().canonicalString()),e}(),Bi=new RegExp("[~\\*/\\[\\]]"),ji=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},qi=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){_(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Ci.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){_(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),zi=function(){function e(e){var t=this;this.tokenListener=null,this.currentUser=Ci.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}return e.prototype.getToken=function(){var e=this;_(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new C(k.ABORTED,"getToken aborted due to token change.");return n?(_("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new ji(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){_(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){_(null!=this.tokenListener,"removeChangeListener() called twice"),_(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return _(null===e||"string"==typeof e,"Received invalid UID: "+e),new Ci(e)},e}(),Hi=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Ci.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),Ki=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new Hi(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Ci.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function Wi(e){if(!e)return new qi;switch(e.type){case"gapi":var t=e.client;return _(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Ki(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new C(k.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function Gi(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Qi=function(){function e(e){this._methodName=e}return e.delete=function(){return D("FieldValue.delete",arguments),Yi.instance},e.serverTimestamp=function(){return D("FieldValue.serverTimestamp",arguments),Xi.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return x("FieldValue.arrayUnion",arguments,1),new Zi(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return x("FieldValue.arrayRemove",arguments,1),new Ji(e)},e.increment=function(e){return M("FieldValue.increment","number",1,e),R("FieldValue.increment",arguments,1),new $i(e)},e.prototype.isEqual=function(e){return this===e},e}(),Yi=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return o.__extends(t,e),t.instance=new t,t}(Qi),Xi=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return o.__extends(t,e),t.instance=new t,t}(Qi),Zi=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return o.__extends(t,e),t}(Qi),Ji=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return o.__extends(t,e),t}(Qi),$i=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return o.__extends(t,e),t}(Qi),eo=S(Qi,"Use FieldValue.<field>() instead."),to=/^__.*__$/,no=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return n.push(null!==this.fieldMask?new yt(e,this.data,this.fieldMask,t):new mt(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new gt(e,this.fieldTransforms)),n},e}(),ro=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new yt(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new gt(e,this.fieldTransforms)),n},e}(),io=function(e){return e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e[e.ArrayArgument=4]="ArrayArgument",e}({});function oo(e){switch(e){case io.Set:case io.MergeSet:case io.Update:return!0;case io.Argument:case io.ArrayArgument:return!1;default:throw g("Unexpected case for UserDataSource: "+e)}}var ao=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new C(k.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(oo(this.dataSource)&&to.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),so=function(e,t){this.databaseId=e,this.key=t},uo=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new ao(io.Set,e,le.EMPTY_PATH);lo("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new no(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new ao(io.MergeSet,e,le.EMPTY_PATH);lo("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new Te(le.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Ui)h=l._internalPath;else{if("string"!=typeof l)throw g("Expected stringOrFieldPath to be a string or a FieldPath");h=fo(e,l)}if(!r.contains(h))throw new C(k.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=lt.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=lt.fromArray(r.fieldMask),o=r.fieldTransforms;return new no(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new ao(io.Update,e,le.EMPTY_PATH);lo("Data must be an object, but it was:",r,t);var i=new Te(le.comparator),o=Ft.EMPTY;A(t,(function(t,a){var s=fo(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Yi)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=lt.fromSet(i);return new ro(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new ao(io.Update,e,le.EMPTY_PATH),o=[ho(e,t)],a=[n];if(r.length%2!=0)throw new C(k.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(ho(e,r[s])),a.push(r[s+1]);var u=new Te(le.comparator),c=Ft.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof Yi)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=lt.fromSet(u);return new ro(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new ao(n?io.ArrayArgument:io.Argument,e,le.EMPTY_PATH),i=this.parseData(t,r);return _(null!=i,"Parsed data should not be null."),_(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(r){var n=po(r);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(co(e=this.runPreConverter(e,t)))return lo("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Qi)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==io.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new ke(Z);return N(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):A(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new Ft(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=this.parseData(o[i],t.childContextForArray(r));null==a&&(a=Et.INSTANCE),n.push(a),r++}return new Vt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!oo(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof Yi){if(t.dataSource!==io.MergeSet)throw t.dataSource===io.Update?(_(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof Xi)t.fieldTransforms.push(new ht(t.path,Jr.instance));else if(e instanceof Zi){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new $r(n);t.fieldTransforms.push(new ht(t.path,r))}else if(e instanceof Ji){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new ei(n);t.fieldTransforms.push(new ht(t.path,i))}else if(e instanceof $i){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new ti(o);t.fieldTransforms.push(new ht(t.path,a))}else g("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Et.INSTANCE;if("number"==typeof e)return Xn(e)?new Nt(e):new Dt(e);if("boolean"==typeof e)return Tt.of(e);if("string"==typeof e)return new Rt(e);if(e instanceof Date)return new xt(be.fromDate(e));if(e instanceof be)return new xt(new be(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Zr)return new Lt(e);if(e instanceof ne)return new Pt(e);if(e instanceof so)return new Mt(e.databaseId,e.key);throw t.createError("Unsupported field value: "+z(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new ao(io.Argument,e,le.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},e}();function co(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof be||e instanceof Zr||e instanceof ne||e instanceof so||e instanceof Qi)}function lo(e,t,n){if(!co(n)||!q(n)){var r=z(n);throw t.createError("an object"===r?e+" a custom object":e+" "+r)}}function ho(e,t){if(t instanceof Ui)return t._internalPath;if("string"==typeof t)return fo(e,t);throw new C(k.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function fo(e,t){try{return function(e){if(e.search(Bi)>=0)throw new C(k.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ui.bind.apply(Ui,o.__spreadArrays([void 0],e.split("."))))}catch(t){throw new C(k.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(r){var n=po(r);throw new C(k.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function po(e){return e instanceof Error?e.message:e.toString()}var vo=Pn.COLLECTION_DISABLED,mo=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new C(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else F("settings","non-empty string","host",e.host),this.host=e.host,V("settings","boolean","ssl",e.ssl),this.ssl=T(e.ssl,!0);if(K("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),V("settings","object","credentials",e.credentials),this.credentials=e.credentials,V("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?m("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&m("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=T(e.timestampsInSnapshots,!0),V("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Pn.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==vo&&e.cacheSizeBytes<Pn.MINIMUM_CACHE_SIZE_BYTES)throw new C(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Pn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}V("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),yo=function(){function e(t,n){var r=this;if(this._firebaseApp=null,this._queue=new ve,this.INTERNAL={delete:function(){return o.__awaiter(r,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var i=t;this._firebaseApp=i,this._databaseId=e.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new zi(n)}else{var a=t;if(!a.projectId)throw new C(k.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new oe(a.projectId,a.database),this._persistenceKey="[DEFAULT]",this._credentials=new qi}this._settings=new mo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(R("Firestore.settings",arguments,1),M("Firestore.settings","object",1,e),E(e,"persistence"))throw new C(k.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new mo(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new C(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=Wi(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new C(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&m("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=T(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Mi(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Bn.buildStoragePrefix(this.makeDatabaseInfo()),n=new fe;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return o.__awaiter(e,void 0,void 0,(function(){var e;return o.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new C(k.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Bn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){return this.ensureClientConfigured(),Gi(e)?this.onSnapshotsInSyncInternal(e):(M("Firestore.onSnapshotsInSync","function",1,e),this.onSnapshotsInSyncInternal({next:e}))},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Vi({next:function(){e.next&&e.next()},error:function(e){throw g("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Li),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new ie(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){_(!!this._settings.host,"FirestoreSettings.host is not set"),_(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Fi(b.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new uo((function(t){if(t instanceof bo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new C(k.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new so(e,t._key)}return t}))},e.databaseIdFromApp=function(e){var t=e.options;if(!E(t,"projectId"))throw new C(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new C(k.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new oe(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new C(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return R("Firestore.collection",arguments,1),M("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new To(ue.fromString(e),this)},e.prototype.doc=function(e){return R("Firestore.doc",arguments,1),M("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),bo.forPath(ue.fromString(e),this)},e.prototype.collectionGroup=function(e){if(R("Firestore.collectionGroup",arguments,1),M("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new C(k.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new So(new $n(ue.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return R("Firestore.runTransaction",arguments,1),M("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new go(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new _o(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(d()){case f.DEBUG:return"debug";case f.ERROR:return"error";case f.SILENT:return"silent";default:return g("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(R("Firestore.setLogLevel",arguments,1),M("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(f.DEBUG);break;case"error":p(f.ERROR);break;case"silent":p(f.SILENT);break;default:throw new C(k.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),go=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;R("Transaction.get",arguments,1);var n=Do("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return g("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof jt)return new ko(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Bt)return new ko(t._firestore,n._key,r,!1,!1,n._converter);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){O("Transaction.set",arguments,2,3);var r=Do("Transaction.set",e,this._firestore);n=Io("Transaction.set",n);var i=xo(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof Ui?(x("Transaction.update",arguments,3),r=Do("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(R("Transaction.update",arguments,2),r=Do("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){R("Transaction.delete",arguments,1);var t=Do("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),_o=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){O("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Do("WriteBatch.set",e,this._firestore);n=Io("WriteBatch.set",n);var i=xo(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,pt.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof t||t instanceof Ui?(x("WriteBatch.update",arguments,3),r=Do("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(R("WriteBatch.update",arguments,2),r=Do("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,pt.exists(!0))),this},e.prototype.delete=function(e){R("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Do("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new _t(t._key,pt.NONE)),this},e.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new C(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),bo=function(){function e(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n,r){if(t.length%2!=0)throw new C(k.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new he(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new To(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(R("DocumentReference.collection",arguments,1),M("DocumentReference.collection","non-empty string",1,e),!e)throw new C(k.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=ue.fromString(e);return new To(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},e.prototype.set=function(e,t){O("DocumentReference.set",arguments,1,2),t=Io("DocumentReference.set",t);var n=xo(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,pt.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof Ui?(x("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(R("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,pt.exists(!0)))},e.prototype.delete=function(){return R("DocumentReference.delete",arguments,0),this._firestoreClient.write([new _t(this._key,pt.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];O("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||Gi(e[i])||(K("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),V("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Gi(e[i])?n=e[i]:(M("DocumentReference.onSnapshot","function",i,e[i]),L("DocumentReference.onSnapshot","function",i+1,e[i+1]),L("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Vi({next:function(e){if(t.next){_(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new ko(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen($n.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return O("DocumentReference.get",arguments,0,1),No("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new ko(t.firestore,t._key,e,!0,e instanceof Bt&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new C(k.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new C(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e.prototype.withConverter=function(t){return new e(this._key,this.firestore,t)},e}(),wo=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),ko=function(){function e(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}return e.prototype.data=function(e){if(O("DocumentSnapshot.data",arguments,0,1),e=Ao("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new Co(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),Ct.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},e.prototype.get=function(e,t){if(O("DocumentSnapshot.get",arguments,1,2),t=Ao("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(ho("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,Ct.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new bo(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new wo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},e.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},e.prototype.toJSValue=function(e,t){if(e instanceof Ft)return this.toJSObject(e,t);if(e instanceof Vt)return this.toJSArray(e,t);if(e instanceof Mt){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||m("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new bo(n,this._firestore,this._converter)}return e.value(t)},e.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},e}(),Co=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return _(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},t}(ko),So=function(){function e(e,t,n){this._query=e,this.firestore=t,this._converter=n}return e.prototype.where=function(t,n,r){R("Query.where",arguments,3),H("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];B("Query.where",o,2,n);var a=ho("Query.where",t),s=tr.fromString(n);if(a.isKeyField()){if(s===tr.ARRAY_CONTAINS||s===tr.ARRAY_CONTAINS_ANY)throw new C(k.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===tr.IN){this.validateDisjunctiveFilterElements(r,s);for(var u=[],c=0,l=r;c<l.length;c++){var h=l[c];u.push(this.parseDocumentIdValue(h))}i=new Vt(u)}else i=this.parseDocumentIdValue(r)}else s!==tr.IN&&s!==tr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,s===tr.IN);var f=nr.create(a,s,i);return this.validateNewFilter(f),new e(this._query.addFilter(f),this.firestore,this._converter)},e.prototype.orderBy=function(t,n){var r;if(O("Query.orderBy",arguments,1,2),L("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=ur.ASCENDING;else{if("desc"!==n)throw new C(k.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=ur.DESCENDING}if(null!==this._query.startAt)throw new C(k.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new C(k.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=ho("Query.orderBy",t),o=new lr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore,this._converter)},e.prototype.limit=function(t){return R("Query.limit",arguments,1),M("Query.limit","number",1,t),G("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore,this._converter)},e.prototype.limitToLast=function(t){return R("Query.limitToLast",arguments,1),M("Query.limitToLast","number",1,t),G("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore,this._converter)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.withConverter=function(t){return new e(this._query,this.firestore,t)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(H(e,1,t),t instanceof ko){if(n.length>0)throw new C(k.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new C(k.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Mt(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Ot)throw new C(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new C(k.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new cr(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new C(k.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new C(k.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new C(k.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(ue.fromString(a));if(!he.isDocumentKey(s))throw new C(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new he(s);i.push(new Mt(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new cr(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];O("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||Gi(e[i])||(K("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),V("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Gi(e[i])?n=e[i]:(M("Query.onSnapshot","function",i,e[i]),L("Query.onSnapshot","function",i+1,e[i+1]),L("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Vi({next:function(e){t.next&&t.next(new Eo(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new C(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return O("Query.get",arguments,0,1),No("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new Eo(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new C(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new C(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new C(k.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(ue.fromString(e));if(!he.isDocumentKey(t))throw new C(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Mt(this.firestore._databaseId,new he(t))}if(e instanceof bo)return new Mt(this.firestore._databaseId,e._key);throw new C(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+z(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new C(k.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new C(k.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new C(k.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new C(k.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof nr){var t=[tr.ARRAY_CONTAINS,tr.ARRAY_CONTAINS_ANY],n=[tr.IN,tr.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new C(k.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw new C(k.INVALID_ARGUMENT,s===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new C(k.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Eo=function(){function e(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new wo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;O("QuerySnapshot.forEach",arguments,1,2),M("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new So(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(K("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),V("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new C(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new Co(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return _(t.type===Lr.Added,"Invalid event type for first snapshot"),_(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==Lr.Metadata})).map((function(t){var i=new Co(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==Lr.Added&&(_((o=a.indexOf(t.doc.key))>=0,"Index for document not found"),a=a.delete(t.doc.key)),t.type!==Lr.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:Ro(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},e.prototype.convertToDocumentImpl=function(e){return new Co(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},e}();o.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(Eo.prototype.docChanges,e,{get:function(){return function(){throw new C(k.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var To=function(e){function t(t,n,r){var i=e.call(this,$n.atPath(t),n,r)||this;if(i._path=t,t.length%2!=1)throw new C(k.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return i}return o.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new bo(new he(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(O("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=X.newId()),M("CollectionReference.doc","non-empty string",1,e),""===e)throw new C(k.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=ue.fromString(e);return bo.forPath(this._query.path.child(t),this.firestore,this._converter)},t.prototype.add=function(e){R("CollectionReference.add",arguments,1);var t=this._converter?this._converter.toFirestore(e):e;M("CollectionReference.add","object",1,t);var n=this.doc();return n.set(e).then((function(){return n}))},t.prototype.withConverter=function(e){return new t(this._path,this.firestore,e)},t}(So);function Io(e,t){if(void 0===t)return{merge:!1};if(K(e,t,["merge","mergeFields"]),V(e,"boolean","merge",t.merge),void 0!==(n=t.mergeFields)&&function(e,t,n,r,i){if(!(r instanceof Array))throw new C(k.INVALID_ARGUMENT,"Function "+e+"() requires its mergeFields option to be an array, but it was: "+z(r));for(var o=0;o<r.length;++o)if(!("string"==typeof(a=r[o])||a instanceof Ui))throw new C(k.INVALID_ARGUMENT,"Function "+e+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+z(r[o]));var a}(e,0,0,n),void 0!==t.mergeFields&&void 0!==t.merge)throw new C(k.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');var n;return t}function Ao(e,t){return void 0===t?{}:(K(e,t,["serverTimestamps"]),U(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function No(e,t){L(e,"object",1,t),t&&(K(e,t,["source"]),U(e,0,"source",t.source,["default","server","cache"]))}function Do(e,t,n){if(t instanceof bo){if(t.firestore!==n)throw new C(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw W(e,"DocumentReference",1,t)}function Ro(e){switch(e){case Lr.Added:return"added";case Lr.Modified:case Lr.Metadata:return"modified";case Lr.Removed:return"removed";default:return g("Unknown change type: "+e)}}function xo(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Oo=S(yo,"Use firebase.firestore() instead."),Po=S(go,"Use firebase.firestore().runTransaction() instead."),Mo=S(_o,"Use firebase.firestore().batch() instead."),Lo=S(bo,"Use firebase.firestore().doc() instead."),Fo=S(ko),Vo=S(Co),Uo=S(So),Bo=S(Eo),jo=S(To,"Use firebase.firestore().collection() instead."),qo={Firestore:Oo,GeoPoint:Zr,Timestamp:be,Blob:re,Transaction:Po,WriteBatch:Mo,DocumentReference:Lo,DocumentSnapshot:Fo,Query:Uo,QueryDocumentSnapshot:Vo,QuerySnapshot:Bo,CollectionReference:jo,FieldPath:Ui,FieldValue:eo,setLogLevel:yo.setLogLevel,CACHE_SIZE_UNLIMITED:vo},zo=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),Ho=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){v("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},e.prototype.onNetworkUnavailable=function(){v("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Ko=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){_(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){_(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){_(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){_(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){_(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){_(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),Wo="Connection",Go={BatchGetDocuments:"batchGet",Commit:"commit"},Qo="gl-js/ fire/"+l,Yo=function(){function e(e){this.databaseId=e.databaseId,this.baseUrl=(e.ssl?"https":"http")+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=Qo},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(a,s){var u=new c.XhrIo;u.listenOnce(c.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case c.ErrorCode.NO_ERROR:var t=u.getResponseJson();v(Wo,"XHR received:",JSON.stringify(t)),a(t);break;case c.ErrorCode.TIMEOUT:v(Wo,'RPC "'+e+'" timed out'),s(new C(k.DEADLINE_EXCEEDED,"Request time out"));break;case c.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(v(Wo,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(o=r.status.toLowerCase().replace("_","-"),Object.values(k).indexOf(o)>=0?o:k.UNKNOWN);s(new C(i,r.message))}else s(new C(k.UNKNOWN,"Server responded with status "+u.getStatus()))}else v(Wo,'RPC "'+e+'" failed'),s(new C(k.UNAVAILABLE,"Connection failed."));break;default:g('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{v(Wo,'RPC "'+e+'" completed.')}var o}));var l=o.__assign({},t);delete l.database;var h=JSON.stringify(l);v(Wo,"XHR sending: ",i+" "+h);var f={"Content-Type":"text/plain"};r.modifyHeadersForRequest(f,n),u.send(i,"POST",h,f,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=c.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),s.isReactNative()||s.isElectron()||s.isIE()||s.isUWP()||s.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");v(Wo,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,l=!1,h=new Ko({sendFn:function(e){l?v(Wo,"Not sending because WebChannel is closed:",e):(u||(v(Wo,"Opening WebChannel transport."),a.open(),u=!0),v(Wo,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),f=function(e,t){a.listen(e,(function(e){try{t(e)}catch(n){setTimeout((function(){throw n}),0)}}))};return f(c.WebChannel.EventType.OPEN,(function(){l||v(Wo,"WebChannel transport opened.")})),f(c.WebChannel.EventType.CLOSE,(function(){l||(l=!0,v(Wo,"WebChannel transport closed"),h.callOnClose())})),f(c.WebChannel.EventType.ERROR,(function(e){l||(l=!0,v(Wo,"WebChannel transport errored:",e),h.callOnClose(new C(k.UNAVAILABLE,"The operation could not be completed")))})),f(c.WebChannel.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];_(!!n,"Got a webchannel message without data.");var r=n.error||(null===(t=n[0])||void 0===t?void 0:t.error);if(r){v(Wo,"WebChannel received error:",r);var i=r.status,o=function(e){var t=Rr[e];if(void 0!==t)return Or(t)}(i),s=r.message;void 0===o&&(o=k.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,h.callOnClose(new C(o,s)),a.close()}else v(Wo,"WebChannel received:",n),h.callOnMessage(n)}})),setTimeout((function(){h.callOnOpen()}),0),h},e.prototype.makeUrl=function(e){var t=Go[e];return _(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}();function Xo(e){(function(e){e.INTERNAL.registerComponent(new u.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new yo(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){_(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(qo)))})(e),e.registerVersion("@firebase/firestore","1.10.2")}b.setPlatform(new(function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new Yo(e))},e.prototype.newConnectivityMonitor=function(){return Ho.isAvailable()?new Ho:new zo},e.prototype.newSerializer=function(e){return new hi(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}())),Xo(i),t.registerFirestore=Xo},"S+S0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("mrSG"),i=n("zVF4"),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:"[DEFAULT]",optional:!1},e),n=t.optional,i=this.normalizeInstanceIdentifier(t.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var c=this.getOrInitializeService(u);s.resolve(c)}catch(l){}}}catch(h){t={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e}(),s=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=s,t.Provider=a},Wcq6:function(e,t,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.8.2","app"),e.exports=i},mrSG:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return d})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return v})),n.d(t,"__spreadArrays",(function(){return m})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return g})),n.d(t,"__asyncDelegator",(function(){return _})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return k})),n.d(t,"__importDefault",(function(){return C}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function g(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}},"q/0M":function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(t),n.d(t,"LogLevel",(function(){return o})),n.d(t,"Logger",(function(){return u})),n.d(t,"setLogLevel",(function(){return c}));var i=[],o=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),a=o.INFO,s=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case o.DEBUG:case o.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case o.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case o.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case o.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,i.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function c(e){i.forEach((function(t){t.logLevel=e}))}},wj3C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n("mrSG"),a=n("zVF4"),s=n("S+S0"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Logger("@firebase/app"),p=function(){function e(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){d.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var v=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=f[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}u(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:"7.8.1",INTERNAL:{registerComponent:u,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(!a.contains(t,e=e||"[DEFAULT]"))throw l.create("no-app",{appName:e});return t[e]}function u(s){var u,c,h=s.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var f=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(f,s.serviceProps),r[h]=f,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?e:[])}}try{for(var p=o.__values(Object.keys(t)),v=p.next();!v.done;v=p.next())t[v.value]._addComponent(s)}catch(m){u={error:m}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(p);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),m=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t;return"VERSION"===(null===(t=e.getComponent())||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(a.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),g.apply(void 0,e)};var _=v;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new m(e)}),"PRIVATE")),e.registerVersion(h,"0.5.4",void 0),e.registerVersion("fire-js","")}(_),t.default=_,t.firebase=_},x7I3:function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorCode",(function(){return sr})),n.d(t,"EventType",(function(){return ur})),n.d(t,"WebChannel",(function(){return cr})),n.d(t,"XhrIo",(function(){return lr})),n.d(t,"createWebChannelTransport",(function(){return ar}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function f(e){return"array"==h(e)}function d(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function g(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _(e,t,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function k(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function C(){this.j=this.j,this.i=this.i}C.prototype.j=!1,C.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[v]||(this[v]=++m))},C.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},E=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function T(e){return Array.prototype.concat.apply([],arguments)}function I(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return/^[\s\xa0]*$/.test(e)}var N,D=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function R(e,t){return-1!=e.indexOf(t)}function x(e,t){return e<t?-1:e>t?1:0}e:{var O=a.navigator;if(O){var P=O.userAgent;if(P){N=P;break e}}N=""}function M(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e){var t,n={};for(t in e)n[t]=e[t];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function U(e){return U[" "](e),e}U[" "]=l;var B,j,q=R(N,"Opera"),z=R(N,"Trident")||R(N,"MSIE"),H=R(N,"Edge"),K=H||z,W=R(N,"Gecko")&&!(R(N.toLowerCase(),"webkit")&&!R(N,"Edge"))&&!(R(N,"Trident")||R(N,"MSIE"))&&!R(N,"Edge"),G=R(N.toLowerCase(),"webkit")&&!R(N,"Edge");function Q(){var e=a.document;return e?e.documentMode:void 0}e:{var Y="",X=(j=N,W?/rv:([^\);]+)(\)|;)/.exec(j):H?/Edge\/([\d\.]+)/.exec(j):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(j):G?/WebKit\/(\S+)/.exec(j):q?/(?:Version)[ \/]?(\S+)/.exec(j):void 0);if(X&&(Y=X?X[1]:""),z){var Z=Q();if(null!=Z&&Z>parseFloat(Y)){B=String(Z);break e}}B=Y}var J,$={};function ee(e){return function(e,t){var n=$;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=D(String(B)).split("."),r=D(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=x(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||x(0==a[2].length,0==s[2].length)||x(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var te=a.document;J=te&&z?Q()||("CSS1Compat"==te.compatMode?parseInt(B,10):5):void 0;var ne=!z||9<=Number(J),re=z&&!ee("9"),ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(n){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(W){e:{try{U(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:se[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ia=!1},k(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.b=function(){ae.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var ue="closure_listenable_"+(1e6*Math.random()|0),ce=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ce,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function fe(e){this.src=e,this.a={},this.b=0}function de(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=S(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}fe.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new le(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var ve="closure_lm_"+(1e6*Math.random()|0),me={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(f(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Se(r),t&&t[ue]?t.Aa(n,r,p(i)?!!i.capture:!!i,o):ge(t,n,r,!0,i,o)}(e,t,n,r,i);if(f(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Se(n),e&&e[ue]?e.za(t,n,p(r)?!!r.capture:!!r,i):ge(e,t,n,!1,r,i)}function ge(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!ne)return null;var s=ke(e);if(s||(e[ve]=s=new fe(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=we,t=ne?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function _e(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[ue])de(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ke(t))?(de(n,e),0==n.b&&(n.src=null,t[ve]=null)):he(e)}}}function be(e){return e in me?me[e]:me[e]="on"+e}function we(e,t){return!!e.X||function(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&_e(e),n.call(r,t)}(e,ne?new ae(t,this):t=new ae(t||c("window.event"),this))}function ke(e){return(e=e[ve])instanceof fe?e:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(e){return"function"==h(e)?e:(e[Ce]||(e[Ce]=function(t){return e.handleEvent(t)}),e[Ce])}function Ee(){C.call(this),this.c=new fe(this),this.J=this,this.B=null}function Te(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&de(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}k(Ee,C),Ee.prototype[ue]=!0,(r=Ee.prototype).addEventListener=function(e,t,n,r){ye(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(f(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Se(r),t&&t[ue]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=pe(a=t.a[n],r,i,o))&&(he(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):t&&(t=ke(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&_e(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;V(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Te(a,r,!0,e)&&i}if(i=Te(a=e.a=n,r,!0,e)&&i,i=Te(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Te(a=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(Ee.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ie=a.JSON.stringify;function Ae(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ne(){this.b=this.a=null}Ae.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var De,Re=new Ae((function(){return new Oe}),(function(e){e.reset()}));function xe(){var e=Fe,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Oe(){this.next=this.b=this.a=null}function Pe(e){a.setTimeout((function(){throw e}),0)}function Me(e,t){De||function(){var e=a.Promise.resolve(void 0);De=function(){e.then(Ve)}}(),Le||(De(),Le=!0),Fe.add(e,t)}Ne.prototype.add=function(e,t){var n=Re.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Oe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Oe.prototype.reset=function(){this.next=this.b=this.a=null};var Le=!1,Fe=new Ne;function Ve(){for(var e;e=xe();){try{e.a.call(e.b)}catch(n){Pe(n)}var t=Re;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Le=!1}function Ue(e,t){Ee.call(this),this.b=e||1,this.a=t||a,this.f=_(this.fb,this),this.g=w()}function Be(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function je(e,t,n){if("function"==h(e))n&&(e=_(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function qe(e,t,n){C.call(this),this.f=null!=n?_(e,n):e,this.c=t,this.b=_(this.$a,this),this.a=[]}function ze(e){e.U=je(e.b,e.c),e.f.apply(null,e.a)}function He(e){C.call(this),this.b=e,this.a={}}k(Ue,Ee),(r=Ue.prototype).ba=!1,r.L=null,r.fb=function(){if(this.ba){var e=w()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Be(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=w())},r.G=function(){Ue.N.G.call(this),Be(this),delete this.a},k(qe,C),(r=qe.prototype).ea=!1,r.U=null,r.Ta=function(e){this.a=arguments,this.U?this.ea=!0:ze(this)},r.G=function(){qe.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,ze(this))},k(He,C);var Ke=[];function We(e,t,n,r){f(n)||(n&&(Ke[0]=n.toString()),n=Ke);for(var i=0;i<n.length;i++){var o=ye(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Ge(e){M(e.a,(function(e,t){this.a.hasOwnProperty(t)&&_e(e)}),e),e.a={}}function Qe(){}He.prototype.G=function(){He.N.G.call(this),Ge(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=new Ee;function Xe(e){oe.call(this,"serverreachability",e)}function Ze(e){Ye.dispatchEvent(new Xe(Ye,e))}function Je(e){oe.call(this,"statevent",e)}function $e(e){Ye.dispatchEvent(new Je(Ye,e))}function et(e){oe.call(this,"timingevent",e)}function tt(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}k(Xe,oe),k(Je,oe),k(et,oe);var nt={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},rt={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function it(){}function ot(){}it.prototype.a=null;var at,st={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function ut(){oe.call(this,"d")}function ct(){oe.call(this,"c")}function lt(){}function ht(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new He(this),this.O=ft,this.P=new Ue(e=K?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}k(ut,oe),k(ct,oe),k(lt,it),at=new lt;var ft=45e3,dt={},pt={};function vt(e,t,n){e.F=1,e.f=Bt(Ot(t)),e.l=n,e.H=!0,yt(e,null)}function mt(e,t,n,r){e.F=1,e.f=Bt(Ot(t)),e.l=null,e.H=n,yt(e,r)}function yt(e,t){e.v=w(),bt(e),e.D=Ot(e.f),Ut(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new qe(_(e.Ja,e,e.a),e.J)),We(e.I,e.a,"readystatechange",e.cb),t=e.h?L(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),Ze(1)}function gt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=_t(e,n);if(i==pt){4==t&&(e.c=4,$e(14),r=!1);break}if(i==dt){e.c=4,$e(15),r=!1;break}Et(e,i)}4==t&&0==n.length&&(e.c=1,$e(16),r=!1),e.b=e.b&&r,r||(St(e),Ct(e))}function _t(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?pt:(n=Number(t.substring(n,r)),isNaN(n)?dt:(r+=1)+n>t.length?pt:(t=t.substr(r,n),e.A=r+n,t))}function bt(e){e.R=w()+e.O,wt(e,e.O)}function wt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=tt(_(e.ab,e),t)}function kt(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function Ct(e){e.g.Ca()||e.m||e.g.na(e)}function St(e){kt(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,Be(e.P),Ge(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Et(e,t){try{e.g.Fa(e,t),Ze(4)}catch(n){}}function Tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||s(e))E(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(d(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function It(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof It)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function At(e,t){Dt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Nt(e))}function Nt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Dt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Dt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ht.prototype).setTimeout=function(e){this.O=e},r.cb=function(e){e=e.target;var t=this.B;t&&3==On(e)?t.Ta():this.Ja(e)},r.Ja=function(e){try{if(e==this.a)e:{var t=On(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!K&&!this.a.aa())){this.m||4!=t||7==n||Ze(8==n||0>=r?3:2),kt(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=Pn(this.a,"X-HTTP-Initial-Response");if(a&&!A(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,$e(12),St(this),Ct(this);break e}this.s=!0,Et(this,s)}this.H?(gt(this,t,o),K&&this.b&&3==t&&(We(this.I,this.P,"tick",this.bb),this.P.start())):Et(this,o),4==t&&St(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,bt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,$e(12)):(this.c=0,$e(13)),St(this),Ct(this)}}}catch(u){}},r.bb=function(){if(this.a){var e=On(this.a),t=this.a.aa();this.A<t.length&&(kt(this),gt(this,e,t),this.b&&4!=e&&bt(this))}},r.cancel=function(){this.m=!0,St(this)},r.ab=function(){this.i=null;var e=w();0<=e-this.R?(2!=this.F&&(Ze(3),$e(17)),St(this),this.c=2,Ct(this)):wt(this,this.R-e)},(r=It.prototype).C=function(){Nt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return Nt(this),this.a.concat()},r.get=function(e,t){return Dt(this.b,e)?this.b[e]:t},r.set=function(e,t){Dt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Rt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof xt?(this.h=void 0!==t?t:e.h,Pt(this,e.f),this.j=e.j,Mt(this,e.b),Lt(this,e.i),this.a=e.a,Ft(this,en(e.c)),this.g=e.g):e&&(n=String(e).match(Rt))?(this.h=!!t,Pt(this,n[1]||"",!0),this.j=jt(n[2]||""),Mt(this,n[3]||"",!0),Lt(this,n[4]),this.a=jt(n[5]||"",!0),Ft(this,n[6]||"",!0),this.g=jt(n[7]||"")):(this.h=!!t,this.c=new Yt(null,this.h))}function Ot(e){return new xt(e)}function Pt(e,t,n){e.f=n?jt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Mt(e,t,n){e.b=n?jt(t,!0):t}function Lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ft(e,t,n){t instanceof Yt?(e.c=t,function(e,t){t&&!e.f&&(Xt(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zt(this,t),$t(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=qt(t,Gt)),e.c=new Yt(t,e.h))}function Vt(e,t,n){e.c.set(t,n)}function Ut(e,t,n){f(n)||(n=[String(n)]),$t(e.c,t,n)}function Bt(e){return Vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),e}function jt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,zt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(qt(t,Ht,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(qt(t,Ht,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(qt(n,"/"==n.charAt(0)?Wt:Kt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",qt(n,Qt)),e.join("")},xt.prototype.resolve=function(e){var t=Ot(this),n=!!e.f;n?Pt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Mt(t,e.b):n=null!=e.i;var r=e.a;if(n)Lt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(R(i,"./")||R(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ft(t,en(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Ht=/[#\/\?@]/g,Kt=/[#\?:]/g,Wt=/[#\?]/g,Gt=/[#\?@]/g,Qt=/#/g;function Yt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Xt(e){e.a||(e.a=new It,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zt(e,t){Xt(e),t=tn(e,t),Dt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,At(e.a,t))}function Jt(e,t){return Xt(e),t=tn(e,t),Dt(e.a.b,t)}function $t(e,t,n){Zt(e,t),0<n.length&&(e.c=null,e.a.set(tn(e,t),I(n)),e.b+=n.length)}function en(e){var t=new Yt;return t.c=e.c,e.a&&(t.a=new It(e.a),t.b=e.b),t}function tn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function nn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(e){var t=e.a.F.a;if(null!=t)$e(4),t?($e(10),Wn(e.a,e,!1)):($e(11),Wn(e.a,e,!0));else{e.b=new ht(e,void 0,void 0),e.b.h=e.h,t=Zn(t=e.a,t.Y()?e.f:null,e.i),$e(4),Ut(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Vt(t,n,r),mt(e.b,t,!1,e.f)}}function on(){this.a=this.b=null}function an(){this.a=new It}function sn(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[v]||(e[v]=++m)):t.charAt(0)+e}function un(e,t){this.b=e,this.a=t}function cn(e){this.g=e||ln,e=a.PerformanceNavigationTiming?0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new an),this.b=null,this.c=[]}(r=Yt.prototype).add=function(e,t){Xt(this),this.c=null,e=tn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){Xt(this),this.a.forEach((function(n,r){E(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){Xt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){Xt(this);var t=[];if(s(e))Jt(this,e)&&(t=T(t,this.a.get(tn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=T(t,e[n])}return t},r.set=function(e,t){return Xt(this),this.c=null,Jt(this,e=tn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},k((function(){}),(function(){})),(r=nn.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Pn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Pn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(i){return(t=this.a).m=this.c,void Yn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Yn(t,2)}else 1==this.M&&(this.g?$e(6):"11111"==t?($e(5),this.g=!0,(!z||10<=Number(J))&&(this.c=200,this.b.cancel(),$e(11),Wn(this.a,this,!0))):($e(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?($e(11),Wn(this.a,this,!0)):($e(10),Wn(this.a,this,!1)));else{0==this.M?$e(8):1==this.M&&$e(9);var e=this.a;e.m=this.c,Yn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},an.prototype.add=function(e){this.a.set(sn(e),e)},an.prototype.C=function(){return this.a.C()};var ln=10;function hn(e,t){!e.a&&(R(t,"spdy")||R(t,"quic")||R(t,"h2"))&&(e.f=e.g,e.a=new an,e.b&&(vn(e,e.b),e.b=null))}function fn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function dn(e){return e.b?1:e.a?e.a.a.c:0}function pn(e,t){return e.b?e=e.b==t:e.a?(t=sn(t),e=Dt(e.a.a.b,t)):e=!1,e}function vn(e,t){e.a?e.a.add(t):e.b=t}function mn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=sn(t),n=Dt(e.a.a.b,n)),n&&At(e.a.a,sn(t)))}function yn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return E(e.a.C(),(function(e){t=t.concat(e.j)})),t}return I(e.c)}function gn(){}function _n(){this.a=new gn}function bn(e,t,n){var r=n||"";try{Tt(e,(function(e,n){var i=e;p(e)&&(i=Ie(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function wn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}cn.prototype.cancel=function(){this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(E(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},gn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},gn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var kn=a.JSON.parse;function Cn(e){Ee.call(this),this.headers=new It,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Sn,this.D=this.F=!1}k(Cn,Ee);var Sn="",En=/^https?$/i,Tn=["POST","PUT"];function In(e){return"content-type"==e.toLowerCase()}function An(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Nn(e),Rn(e)}function Nn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Dn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=On(e)||2!=e.T()))if(e.l&&4==On(e))je(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==On(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(Rt)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!En.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var c=2<On(e)?e.a.statusText:""}catch(l){c=""}e.f=c+" ["+e.T()+"]",Nn(e)}}finally{Rn(e)}}}function Rn(e,t){if(e.a){xn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function xn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function On(e){return e.a?e.a.readyState:0}function Pn(e,t){return e.a?e.a.getResponseHeader(t):null}function Mn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return M(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Vt(e,t,n),e}function Ln(e){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!c("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=c("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=c("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=c("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new cn(e&&e.concurrentRequestLimit),this.ja=new _n,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(e){if(Vn(e),3==e.u){var t=e.P++,n=Ot(e.B);Vt(n,"SID",e.H),Vt(n,"RID",t),Vt(n,"TYPE","terminate"),qn(e,n),(t=new ht(e,t,void 0)).F=2,t.f=Bt(Ot(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=w(),bt(t)}Xn(e)}function Vn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Gn(e),e.b.cancel(),e.h&&(u(e.h)&&a.clearTimeout(e.h),e.h=null)}function Un(e,t){e.f.push(new un(e.Qa++,t)),3==e.u&&Bn(e)}function Bn(e){fn(e.b)||e.h||(e.h=!0,Me(e.Ha,e),e.A=0)}function jn(e,t){var n;n=t?t.W:e.P++;var r=Ot(e.B);Vt(r,"SID",e.H),Vt(r,"RID",n),Vt(r,"AID",e.O),qn(e,r),e.g&&e.i&&Mn(r,e.g,e.i),n=new ht(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=zn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),vn(e.b,n),vt(n,r,t)}function qn(e,t){e.c&&Tt({},(function(e,n){Vt(t,n,e)}))}function zn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?_(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{bn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Hn(e){e.a||e.l||(e.S=1,Me(e.Ga,e),e.v=0)}function Kn(e){return!(e.a||e.l||3<=e.v||(e.S++,e.l=tt(_(e.Ga,e),Qn(e,e.v)),e.v++,0))}function Wn(e,t,n){var r=t.l;r&&hn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Zn(e,null,e.ha),Bn(e)}function Gn(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function Qn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function Yn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=_(e.eb,e);n||(n=new xt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Pt(n,"https"),Bt(n)),function(e,t){var n=new Qe;if(a.Image){var r=new Image;r.onload=b(wn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(wn,n,r,"TestLoadImage: error",!1,t),r.onabort=b(wn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(wn,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else $e(2);e.u=0,e.c&&e.c.ta(t),Xn(e),Vn(e)}function Xn(e){e.u=0,e.m=-1,e.c&&(0==yn(e.b).length&&0==e.f.length||(e.b.c.length=0,I(e.f),e.f.length=0),e.c.sa())}function Zn(e,t,n){var r=function(e){return e instanceof xt?Ot(e):new xt(e,void 0)}(n);if(""!=r.b)t&&Mt(r,t+"."+r.b),Lt(r,r.i);else{var i=a.location;r=function(e,t,n,r){var i=new xt(null,void 0);return e&&Pt(i,e),t&&Mt(i,t),n&&Lt(i,n),r&&(i.a=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&M(e.V,(function(e,t){Vt(r,t,e)})),n=e.I,(t=e.j)&&n&&Vt(r,t,n),Vt(r,"VER",e.wa),qn(e,r),r}function Jn(){}function $n(){if(z&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function er(e,t){Ee.call(this),this.a=new Ln(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!A(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new rr(this)}function tr(e){ut.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function nr(){ct.call(this),this.status=1}function rr(e){this.a=e}(r=Cn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(e){var t;return(t=e.a)||(t=e.a={}),t}(this.H?this.H:at),this.a.onreadystatechange=_(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(o){return void An(this,o)}e=n||"";var i=new It(this.headers);r&&Tt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=In,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(i.K()),n=a.FormData&&e instanceof a.FormData,!(0<=S(Tn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.D=function(e){return z&&ee(9)&&u(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=_(this.Ba,this)):this.m=je(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){An(this,o)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Rn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Rn(this,!0)),Cn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?Dn(this):this.Za())},r.Za=function(){Dn(this)},r.T=function(){try{return 2<On(this)?this.a.status:-1}catch(j){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(j){return""}},r.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),kn(t)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Ln.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ht(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?V(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=zn(this,n,t),Vt(i=Ot(this.B),"RID",e),Vt(i,"CVER",22),this.o&&this.j&&Vt(i,"X-HTTP-Session-Id",this.j),qn(this,i),this.g&&r&&Mn(i,this.g,r),vn(this.b,n),this.W?(Vt(i,"$req",t),Vt(i,"SID","null"),n.S=!0,vt(n,i,null)):vt(n,i,t),this.u=2}}else 3==this.u&&(e?jn(this,e):0==this.f.length||fn(this.b)||jn(this))},r.Ga=function(){this.l=null,this.a=new ht(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Ot(this.pa);Vt(e,"RID","rpc"),Vt(e,"SID",this.H),Vt(e,"CI",this.ia?"0":"1"),Vt(e,"AID",this.O),qn(this,e),Vt(e,"TYPE","xmlhttp"),this.g&&this.i&&Mn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),mt(this.a,e,!0,this.ga)},r.Fa=function(e,t){if(0!=this.u&&(this.a==e||pn(this.b,e)))if(this.m=e.o,!e.s&&pn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(o){n=null}if(f(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Gn(this),this.a.cancel(),this.a=null}Kn(this),$e(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=tt(_(this.Ya,this),6e3));if(1>=dn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Yn(this,11)}else if((e.s||this.a==e)&&Gn(this),!A(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Pn(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=Pn(r,"X-HTTP-Session-Id")))&&(this.I=r,Vt(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Zn(this,this.Y()?this.ga:null,this.ha),r.s?(mn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(kt(r),bt(r)),this.a=r):Hn(this),0<this.f.length&&Bn(this)}else"stop"!=r[0]&&"close"!=r[0]||Yn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Yn(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Kn(this),$e(19))},r.na=function(e){var t=null;if(this.a==e){Gn(this),this.a=null;var n=2}else{if(!pn(this.b,e))return;t=e.j,mn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=w()-e.v,Ye.dispatchEvent(new et(Ye,e.l?e.l.length:0,t,this.A)),Bn(this)):Hn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(dn(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.f=t.j.concat(e.f),0):1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa)||(e.h=tt(_(e.Ha,e,t),Qn(e,e.A)),e.A++,0)))}(this,e)||2==n&&Kn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Yn(this,5);break;case 4:Yn(this,10);break;case 3:Yn(this,6);break;default:Yn(this,2)}}},r.eb=function(e){$e(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cn(this.Ka)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Jn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},$n.prototype.a=function(e,t){return new er(e,t)},k(er,Ee),(r=er.prototype).addEventListener=function(e,t,n,r){er.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){er.N.removeEventListener.call(this,e,t,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;$e(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new nn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Mn(t,e.g,e.i)),(e=e.w).i=n,t=Zn(e.a,null,e.i),$e(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,rn(e)):(Ut(t,"MODE","init"),!e.a.o&&e.a.j&&Ut(t,"X-HTTP-Session-Id",e.a.j),e.b=new ht(e,void 0,void 0),e.b.h=e.h,mt(e.b,t,!1,null),e.M=0)},r.close=function(){Fn(this.a)},r.Wa=function(e){if(s(e)){var t={};t.__data__=e,Un(this.a,t)}else this.h?((t={}).__data__=Ie(e),Un(this.a,t)):Un(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,er.N.G.call(this)},k(tr,ut),k(nr,ct),k(rr,Jn),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(e){this.a.dispatchEvent(new tr(e))},rr.prototype.ta=function(e){this.a.dispatchEvent(new nr(e))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=b((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),$n);$n.prototype.createWebChannel=$n.prototype.a,er.prototype.send=er.prototype.Wa,er.prototype.open=er.prototype.Va,er.prototype.close=er.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,rt.COMPLETE="complete",ot.EventType=st,st.OPEN="a",st.CLOSE="b",st.ERROR="c",st.MESSAGE="d",Ee.prototype.listen=Ee.prototype.za,Cn.prototype.listenOnce=Cn.prototype.Aa,Cn.prototype.getLastError=Cn.prototype.Xa,Cn.prototype.getLastErrorCode=Cn.prototype.ya,Cn.prototype.getStatus=Cn.prototype.T,Cn.prototype.getResponseJson=Cn.prototype.Ua,Cn.prototype.getResponseText=Cn.prototype.aa,Cn.prototype.send=Cn.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:nt,EventType:rt,WebChannel:ot,XhrIo:Cn},ar=or.createWebChannelTransport,sr=or.ErrorCode,ur=or.EventType,cr=or.WebChannel,lr=or.XhrIo;t.default=or},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);var i=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function a(e){setTimeout((function(){throw e}))}var s={closed:!0,next:function(e){},error:function(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete:function(){}},u=Array.isArray||function(e){return e&&"number"==typeof e.length};function c(e){return null!==e&&"object"==typeof e}function l(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}l.prototype=Object.create(Error.prototype);var h,f=l,d=((h=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var e,t=!1;if(!this.closed){var n=this._parent,i=this._parents,o=this._unsubscribe,a=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,l=i?i.length:0;n;)n.remove(this),n=++s<l&&i[s]||null;if(r(o))try{o.call(this)}catch(d){t=!0,e=d instanceof f?p(d.errors):[d]}if(u(a))for(s=-1,l=a.length;++s<l;){var h=a[s];if(c(h))try{h.unsubscribe()}catch(d){t=!0,e=e||[],d instanceof f?e=e.concat(p(d.errors)):e.push(d)}}if(t)throw new f(e)}}},{key:"add",value:function(t){var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}},{key:"_addParent",value:function(e){var t=this._parent,n=this._parents;return t!==e&&(t?n?-1===n.indexOf(e)&&(n.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new h),h);function p(e){return e.reduce((function(e,t){return e.concat(t instanceof f?t.errors:t)}),[])}var v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),m=function(e){function t(e,n,r){var i;switch(_classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=s;break;case 1:if(!e){i.destination=s;break}if("object"==typeof e){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(_assertThisInitialized(i))):(i.syncErrorThrowable=!0,i.destination=new y(_assertThisInitialized(i),e));break}default:i.syncErrorThrowable=!0,i.destination=new y(_assertThisInitialized(i),e,n,r)}return i}return _inherits(t,e),_createClass(t,[{key:v,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(t.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this}}],[{key:"create",value:function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i}}]),t}(d),y=function(e){function t(e,n,i,o){var a,u;_classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parentSubscriber=e;var c=_assertThisInitialized(a);return r(n)?u=n:n&&(u=n.next,i=n.error,o=n.complete,n!==s&&(r((c=Object.create(n)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(_assertThisInitialized(a)))),a._context=c,a._next=u,a._error=i,a._complete=o,a}return _inherits(t,e),_createClass(t,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=o.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;a(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;a(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(a(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),t}(m),g="function"==typeof Symbol&&Symbol.observable||"@@observable";function _(){}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w(t)}function w(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:_}var k,C=((k=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof m)return e;if(e[v])return e[v]()}return e||t||n?new m(e,t,n):new m(s)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof m?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=S(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:g,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:w(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=S(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new k(e)},k);function S(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function E(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}E.prototype=Object.create(Error.prototype);var T,I=E,A=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).subject=e,r.subscriber=n,r.closed=!1,r}return _inherits(t,e),_createClass(t,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),t}(d),N=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).destination=e,n}return _inherits(t,e),t}(m),D=((T=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _inherits(t,e),_createClass(t,[{key:v,value:function(){return new N(this)}},{key:"lift",value:function(e){var t=new R(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new I;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new I;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new I;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new I;return _get(_getPrototypeOf(t.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new I;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new A(this,e))}},{key:"asObservable",value:function(){var e=new C;return e.source=this,e}}]),t}(C)).create=function(e,t){return new R(e,t)},T),R=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).destination=e,r.source=n,r}return _inherits(t,e),_createClass(t,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):d.EMPTY}}]),t}(D);function x(e){return e&&"function"==typeof e.schedule}var O=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),t}(m),P=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}},M=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,a),t}};var L="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",F=function(e){return function(t){for(var n=e[L]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}},V=function(e){return function(t){var n=e[g]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},U=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function B(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var j=function(e){if(e instanceof C)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[g])return V(e);if(U(e))return P(e);if(B(e))return M(e);if(e&&"function"==typeof e[L])return F(e);var t=c(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(t," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")};function q(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new O(e,n,r);if(!i.closed)return j(t)(i)}var z=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),t}(m);function H(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new K(e,t))}}var K=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new W(e,this.project,this.thisArg))}}]),e}(),W=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,i.count=0,i.thisArg=r||_assertThisInitialized(i),i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),t}(m);function G(e,t){return new C(t?function(n){var r=new d,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:P(e))}function Q(e,t){if(!t)return e instanceof C?e:new C(j(e));if(null!=e){if(function(e){return e&&"function"==typeof e[g]}(e))return function(e,t){return new C(t?function(n){var r=new d;return r.add(t.schedule((function(){var i=e[g]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}:V(e))}(e,t);if(B(e))return function(e,t){return new C(t?function(n){var r=new d;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}:M(e))}(e,t);if(U(e))return G(e,t);if(function(e){return e&&"function"==typeof e[L]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new C(t?function(n){var r,i=new d;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[L](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}:F(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(r){return r.pipe(Y((function(n,r){return Q(e(n,r)).pipe(H((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new X(e,n))})}var X=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Z(e,this.project,this.concurrent))}}]),e}(),Z=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new O(this,void 0,void 0);this.destination.add(r),q(this,e,t,n,r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),t}(z);function J(e){return e}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Y(J,e)}function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return x(o)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof o&&(r=t.pop()),null===i&&1===t.length&&t[0]instanceof C?t[0]:$(r)(G(t,i))}function te(){return function(e){return e.lift(new ne(e))}}var ne=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new re(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),re=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).connectable=n,r}return _inherits(t,e),_createClass(t,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),t}(m),ie=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return _inherits(t,e),_createClass(t,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new d).add(this.source.subscribe(new ae(this.getSubject(),this))),e.closed?(this._connection=null,e=d.EMPTY):this._connection=e),e}},{key:"refCount",value:function(){return te()(this)}}]),t}(C).prototype,oe={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ie._subscribe},_isComplete:{value:ie._isComplete,writable:!0},getSubject:{value:ie.getSubject},connect:{value:ie.connect},refCount:{value:ie.refCount}},ae=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).connectable=n,r}return _inherits(t,e),_createClass(t,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(t.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(t.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),t}(N);function se(e,t){return function(n){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new ue(r,t));var i=Object.create(n,oe);return i.source=n,i.subjectFactory=r,i}}var ue=function(){function e(t,n){_classCallCheck(this,e),this.subjectFactory=t,this.selector=n}return _createClass(e,[{key:"call",value:function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i}}]),e}();function ce(){return new D}function le(){return function(e){return te()(se(ce)(e))}}function he(e,t,n){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var o=_construct(i,t);return a.annotation=o,a;function a(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}var fe=he("Inject",(function(e){return{token:e}})),de=he("Optional"),pe=he("Self"),ve=he("SkipSelf"),me=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ye(e){for(var t in e)if(e[t]===ye)return t;throw Error("Could not find renamed property on target object.")}function ge(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function _e(e){var t=e[be];return t&&t.token===e?t:null}var be=ye({ngInjectableDef:ye});function we(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(we).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var ke=ye({__forward_ref__:ye});function Ce(e){return e.__forward_ref__=Ce,e.toString=function(){return we(this())},e}function Se(e){var t=e;return"function"==typeof t&&t.hasOwnProperty(ke)&&t.__forward_ref__===Ce?t():e}var Ee="undefined"!=typeof globalThis&&globalThis,Te="undefined"!=typeof window&&window,Ie="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ae="undefined"!=typeof global&&global,Ne=Ee||Ae||Te||Ie,De=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.ngInjectableDef=ge({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),Re=new De("INJECTOR",-1),xe=new Object,Oe=/\n/gm,Pe=ye({provide:String,useValue:ye}),Me=void 0;function Le(e){var t=Me;return Me=e,t}function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me.Default;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me.Default;if(void 0===Me)throw new Error("inject() must be called from an injection context");return null===Me?function(e,t,n){var r=_e(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&me.Optional)return null;throw new Error("Injector: NOT_FOUND [".concat(we(e),"]"))}(e,0,t):Me.get(e,t&me.Optional?null:void 0,t)}(e,t)}var Ve=Fe,Ue=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xe;if(t===xe){var n=new Error("NullInjectorError: No provider for ".concat(we(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}();function Be(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=we(t);if(t instanceof Array)i=t.map(we).join(" -> ");else if("object"==typeof t){var o=[];for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):we(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(Oe,"\n  "))}var je=function e(){_classCallCheck(this,e)},qe=function e(){_classCallCheck(this,e)};function ze(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function He(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var Ke=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),We=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ne);function Ge(e){return e.ngDebugContext}function Qe(e){return e.ngOriginalError}function Ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Xe=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Ye}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Ge(e)?Ge(e):this._findContext(Qe(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Qe(e);t&&Qe(t);)t=Qe(t);return t}}]),e}(),Ze=!0,Je=!1;function $e(){return Je=!0,Ze}var et=function(){function e(t){if(_classCallCheck(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n),this.inertBodyElement=this.inertDocument.createElement("body"),n.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(e,[{key:"getInertBodyElement_XHR",value:function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);var n=t.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(e){var t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),tt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,nt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function rt(e){return(e=String(e)).match(tt)||e.match(nt)?e:($e()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(e," (see http://g.co/ng/security#xss)")),"unsafe:"+e)}function it(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=e.split(",")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){t[o.value]=!0}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}function ot(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(e[s]=!0)}return e}var at,st=it("area,br,col,hr,img,wbr"),ut=it("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ct=it("rp,rt"),lt=ot(ct,ut),ht=ot(st,ot(ut,it("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ot(ct,it("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lt),ft=it("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dt=it("srcset"),pt=ot(ft,dt,it("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),it("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vt=it("script,style,template"),mt=function(){function e(){_classCallCheck(this,e),this.sanitizedSomething=!1,this.buf=[]}return _createClass(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!ht.hasOwnProperty(t))return this.sanitizedSomething=!0,!vt.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(pt.hasOwnProperty(s)){var u=o.value;ft[s]&&(u=rt(u)),dt[s]&&(n=u,u=(n=String(n)).split(",").map((function(e){return rt(e.trim())})).join(", ")),this.buf.push(" ",a,'="',_t(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();ht.hasOwnProperty(t)&&!st.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(_t(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),yt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gt=/([^\#-~ |!])/g;function _t(e){return e.replace(/&/g,"&amp;").replace(yt,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(gt,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function bt(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var wt=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}(),kt=function e(){_classCallCheck(this,e)},Ct=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),St=/^url\(([^)]+)\)$/,Et=/([A-Z])/g;function Tt(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}var It=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return At()},e}(),At=function(){},Nt=new De("The presence of this token marks an injector as being the root injector."),Dt=function(e,t,n){return new Lt(e,t,n)},Rt=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Dt(e,t,""):Dt(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=xe,e.NULL=new Ue,e.ngInjectableDef=ge({token:e,providedIn:"any",factory:function(){return Fe(Re)}}),e.__NG_ELEMENT_ID__=-1,e}(),xt=function(e){return e},Ot=[],Pt=xt,Mt=function(){return Array.prototype.slice.call(arguments)},Lt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt.NULL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,e),this.parent=n,this.source=r;var i=this._records=new Map;i.set(Rt,{token:Rt,fn:xt,deps:Ot,value:this,useNew:!1}),i.set(Re,{token:Re,fn:xt,deps:Ot,value:this,useNew:!1}),function e(t,n){if(n)if((n=Se(n))instanceof Array)for(var r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw Vt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Vt("Unexpected provider",n);var i=Se(n.provide),o=function(e){var t=function(e){var t=Ot,n=e.deps;if(n&&n.length){t=[];for(var r=0;r<n.length;r++){var i=6,o=Se(n[r]);if(o instanceof Array)for(var a=0,s=o;a<s.length;a++){var u=s[a];u instanceof de||u==de?i|=1:u instanceof ve||u==ve?i&=-3:u instanceof pe||u==pe?i&=-5:o=u instanceof fe?u.token:Se(u)}t.push({token:o,options:i})}}else if(e.useExisting)t=[{token:Se(e.useExisting),options:6}];else if(!(n||Pe in e))throw Vt("'deps' required",e);return t}(e),n=xt,r=Ot,i=!1,o=Se(e.provide);if(Pe in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=Se(e.useClass);else{if("function"!=typeof o)throw Vt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=o}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=t.get(i);if(a){if(a.fn!==Mt)throw Ft(i)}else t.set(i,a={token:n.provide,deps:[],useNew:!1,fn:Mt,value:Ot});i=n,a.deps.push({token:i,options:6})}var s=t.get(i);if(s&&s.fn==Mt)throw Ft(i);t.set(i,o)}}(i,t)}return _createClass(e,[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:me.Default,r=this._records.get(e);try{return function e(t,n,r,i,o,a){try{return function(t,n,r,i,o,a){var s;if(!n||a&me.SkipSelf)a&me.Self||(s=i.get(t,o,me.Default));else{if((s=n.value)==Pt)throw Error("\u0275Circular dependency");if(s===Ot){n.value=Pt;var u=n.useNew,c=n.fn,l=n.deps,h=Ot;if(l.length){h=[];for(var f=0;f<l.length;f++){var d=l[f],p=d.options,v=2&p?r.get(d.token):void 0;h.push(e(d.token,v,r,v||4&p?i:Rt.NULL,1&p?null:Rt.THROW_IF_NOT_FOUND,me.Default))}}n.value=s=u?_construct(c,_toConsumableArray(h)):c.apply(void 0,h)}}return s}(t,n,r,i,o,a)}catch(s){throw s instanceof Error||(s=new Error(s)),(s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(t),n&&n.value==Pt&&(n.value=Ot),s}}(e,r,this._records,this.parent,t,n)}catch(i){return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=Be("\n"+e.message,i,"StaticInjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(i,e,0,this.source)}}},{key:"toString",value:function(){var e=[];return this._records.forEach((function(t,n){return e.push(we(n))})),"StaticInjector[".concat(e.join(", "),"]")}}]),e}();function Ft(e){return Vt("Cannot mix multi providers and regular providers",e)}function Vt(e,t){return new Error(Be(e,t,"StaticInjectorError"))}var Ut=new De("AnalyzeForEntryComponents"),Bt=null;function jt(){if(!Bt){var e=Ne.Symbol;if(e&&e.iterator)Bt=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Bt=r)}}return Bt}function qt(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function zt(e,t){var n=Kt(e),r=Kt(t);return n&&r?function(e,t,n){for(var r=e[jt()](),i=t[jt()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(e,t,zt):!(n||!(e&&("object"==typeof e||"function"==typeof e))||r||!(t&&("object"==typeof t||"function"==typeof t)))||qt(e,t)}var Ht=function(){function e(t){_classCallCheck(this,e),this.wrapped=t}return _createClass(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function Kt(e){return!!Wt(e)&&(Array.isArray(e)||!(e instanceof Map)&&jt()in e)}function Wt(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Gt(e){return!!e&&"function"==typeof e.then}function Qt(e){return!!e&&"function"==typeof e.subscribe}var Yt=function(){function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}(),Xt=function e(){_classCallCheck(this,e)};function Zt(e){var t=Error("No component factory found for ".concat(we(e),". Did you add it to @NgModule.entryComponents?"));return t[Jt]=e,t}var Jt="ngComponent",$t=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw Zt(e)}}]),e}(),en=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new $t,e}(),tn=function(){function e(t,n,r){_classCallCheck(this,e),this._parent=n,this._ngModule=r,this._factories=new Map;for(var i=0;i<t.length;i++){var o=t[i];this._factories.set(o.componentType,o)}}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw Zt(e);return new nn(t,this._ngModule)}}]),e}(),nn=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)}}]),t}(Xt);function rn(){}var on=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return an(e)},e}(),an=rn,sn=function e(){_classCallCheck(this,e)},un=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),cn=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return ln()},e}(),ln=rn,hn=function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},fn=new hn("8.2.14"),dn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return Kt(e)}},{key:"create",value:function(e){return new vn(e)}}]),e}(),pn=function(e,t){return t},vn=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||pn}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<_n(n,r,i)?t:n,a=_n(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&e(o,a,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Kt(e))throw new Error("Error trying to diff '".concat(we(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],i=this._trackByFn(s,r),null!==o&&qt(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),qt(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[jt()]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==o&&qt(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,n)),qt(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(qt(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(qt(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new mn(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new gn),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gn),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),mn=function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},yn=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&qt(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),gn=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new yn,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function _n(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var bn=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||Wt(e)}},{key:"create",value:function(){return new wn}}]),e}(),wn=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Wt(e)))throw new Error("Error trying to diff '".concat(we(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new kn(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){qt(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),kn=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Cn=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ve,new de]]}}}]),e}();return e.ngInjectableDef=ge({token:e,providedIn:"root",factory:function(){return new e([new dn])}}),e}(),Sn=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ve,new de]]}}}]),e}();return e.ngInjectableDef=ge({token:e,providedIn:"root",factory:function(){return new e([new bn])}}),e}(),En=[new bn],Tn=new Cn([new dn]),In=new Sn(En),An=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Nn(e,on)},e}(),Nn=rn,Dn=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Rn(e,on)},e}(),Rn=rn;function xn(e,t,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '".concat(t,"'. Current value: '").concat(n,"'.");return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return On(n,t),n}(i,e)}function On(e,t){e.ngDebugContext=t,e.ngErrorLogger=t.logError.bind(t)}function Pn(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: ".concat(e))}function Mn(e,t,n){var r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function Ln(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function Fn(e,t){return e.nodes[t]}function Vn(e,t){return e.nodes[t]}function Un(e,t){return e.nodes[t]}function Bn(e,t){return e.nodes[t]}function jn(e,t){return e.nodes[t]}var qn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},zn=function(){},Hn=new Map;function Kn(e){var t=Hn.get(e);return t||(t=we(e)+"_"+Hn.size,Hn.set(e,t)),t}function Wn(e,t,n,r){if(Ht.isWrapped(r)){r=Ht.unwrap(r);var i=e.def.nodes[t].bindingIndex+n,o=Ht.unwrap(e.oldValues[i]);e.oldValues[i]=new Ht(o)}return r}function Gn(e){return{id:"$$undefined",styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var Qn=0;function Yn(e,t,n,r){return!(!(2&e.state)&&qt(e.oldValues[t.bindingIndex+n],r))}function Xn(e,t,n,r){return!!Yn(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function Zn(e,t,n,r){var i=e.oldValues[t.bindingIndex+n];if(1&e.state||!zt(i,r)){var o=t.bindings[n].name;throw xn(qn.createDebugContext(e,t.nodeIndex),"".concat(o,": ").concat(i),"".concat(o,": ").concat(r),0!=(1&e.state))}}function Jn(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function $n(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function er(e,t,n,r){try{return Jn(33554432&e.def.nodes[t].flags?Vn(e,t).componentView:e),qn.handleEvent(e,t,n,r)}catch(i){e.root.errorHandler.handleError(i)}}function tr(e){return e.parent?Vn(e.parent,e.parentNodeDef.nodeIndex):null}function nr(e){return e.parent?e.parentNodeDef.parent:null}function rr(e,t){switch(201347067&t.flags){case 1:return Vn(e,t.nodeIndex).renderElement;case 2:return Fn(e,t.nodeIndex).renderText}}function ir(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function or(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function ar(e){return 1<<e%32}function sr(e){var t={},n=0,r={};return e&&e.forEach((function(e){var i=_slicedToArray(e,2),o=i[0],a=i[1];"number"==typeof o?(t[o]=a,n|=ar(o)):r[o]=a})),{matchedQueries:t,references:r,matchedQueryIds:n}}function ur(e,t){return e.map((function(e){var n,r,i;return Array.isArray(e)?(i=(n=_slicedToArray(e,2))[0],r=n[1]):(i=0,r=e),r&&("function"==typeof r||"object"==typeof r)&&t&&Object.defineProperty(r,"__source",{value:t,configurable:!0}),{flags:i,token:r,tokenKey:Kn(r)}}))}function cr(e,t,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Ke.Native?Vn(e,n.renderParent.nodeIndex).renderElement:void 0:t}var lr=new WeakMap;function hr(e){var t=lr.get(e);return t||((t=e((function(){return zn}))).factory=e,lr.set(e,t)),t}function fr(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(rr(e,e.def.lastRenderRootNode))),dr(e,t,0,e.def.nodes.length-1,n,r,i)}function dr(e,t,n,r,i,o,a){for(var s=n;s<=r;s++){var u=e.def.nodes[s];11&u.flags&&vr(e,u,t,i,o,a),s+=u.childCount}}function pr(e,t,n,r,i,o){for(var a=e;a&&!ir(a);)a=a.parent;for(var s=a.parent,u=nr(a),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var h=s.def.nodes[l];h.ngContentIndex===t&&vr(s,h,n,r,i,o),l+=h.childCount}if(!s.parent){var f=e.root.projectableNodes[t];if(f)for(var d=0;d<f.length;d++)mr(e,f[d],n,r,i,o)}}function vr(e,t,n,r,i,o){if(8&t.flags)pr(e,t.ngContent.index,n,r,i,o);else{var a=rr(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&mr(e,a,n,r,i,o),32&t.bindingFlags&&mr(Vn(e,t.nodeIndex).componentView,a,n,r,i,o)):mr(e,a,n,r,i,o),16777216&t.flags)for(var s=Vn(e,t.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)fr(s[u],n,r,i,o);1&t.flags&&!t.element.name&&dr(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,o)}}function mr(e,t,n,r,i,o){var a=e.renderer;switch(n){case 1:a.appendChild(r,t);break;case 2:a.insertBefore(r,t,i);break;case 3:a.removeChild(r,t);break;case 0:o.push(t)}}var yr=/^:([^:]+):(.+)$/;function gr(e){if(":"===e[0]){var t=e.match(yr);return[t[1],t[2]]}return["",e]}function _r(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}var br=new Object,wr=Kn(Rt),kr=Kn(Re),Cr=Kn(je);function Sr(e,t,n,r){return n=Se(n),{index:-1,deps:ur(r,we(t)),flags:e,token:t,value:n}}function Er(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rt.THROW_IF_NOT_FOUND,o=Le(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(i=null),1&t.flags)return e._parent.get(t.token,i);var a=t.tokenKey;switch(a){case wr:case kr:case Cr:return e}var s,u=e._def.providersByKey[a];if(u){var c=e._providers[u.index];return void 0===c&&(c=e._providers[u.index]=Tr(e,u)),c===br?void 0:c}if((s=_e(t.token))&&(n=e,null!=(r=s).providedIn&&(function(e,t){return e._def.modules.indexOf(t)>-1}(n,r.providedIn)||"root"===r.providedIn&&n._def.isRoot))){var l=e._providers.length;return e._def.providers[l]=e._def.providersByKey[t.tokenKey]={flags:5120,value:s.factory,deps:[],index:l,token:t.token},e._providers[l]=br,e._providers[l]=Tr(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?i:e._parent.get(t.token,i)}finally{Le(o)}}function Tr(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var r=n.length;switch(r){case 0:return new t;case 1:return new t(Er(e,n[0]));case 2:return new t(Er(e,n[0]),Er(e,n[1]));case 3:return new t(Er(e,n[0]),Er(e,n[1]),Er(e,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Er(e,n[o]);return _construct(t,i)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var r=n.length;switch(r){case 0:return t();case 1:return t(Er(e,n[0]));case 2:return t(Er(e,n[0]),Er(e,n[1]));case 3:return t(Er(e,n[0]),Er(e,n[1]),Er(e,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Er(e,n[o]);return t.apply(void 0,i)}}(e,t.value,t.deps);break;case 2048:n=Er(e,t.deps[0]);break;case 256:n=t.value}return n===br||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?br:n}function Ir(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var r=n[t];return r.viewContainerParent=null,He(n,t),qn.dirtyParentQueries(r),Nr(r),r}function Ar(e,t,n){var r=t?rr(t,t.def.lastRenderRootNode):e.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);fr(n,2,i,o,void 0)}function Nr(e){fr(e,3,null,null,void 0)}var Dr=new Object;function Rr(e,t,n,r,i,o){return new xr(e,t,n,r,i,o)}var xr=function(e){function t(e,n,r,i,o,a){var s;return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e,t,n,r){if(!r)throw new Error("ngModule should be provided");var i=hr(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=qn.createRootView(e,t||[],n,i,r,Dr),s=Un(a,o).instance;return n&&a.renderer.setAttribute(Vn(a,0).renderElement,"ng-version",fn.full),new Or(a,new Fr(a),s)}},{key:"inputs",get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e}},{key:"outputs",get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}}]),t}(Xt),Or=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this._viewRef.destroy()}},{key:"onDestroy",value:function(e){this._viewRef.onDestroy(e)}},{key:"location",get:function(){return new on(Vn(this._view,this._elDef.nodeIndex).renderElement)}},{key:"injector",get:function(){return new jr(this._view,this._elDef)}},{key:"componentType",get:function(){return this._component.constructor}}]),t}(function(){return function e(){_classCallCheck(this,e)}}());function Pr(e,t,n){return new Mr(e,t,n)}var Mr=function(){function e(t,n,r){_classCallCheck(this,e),this._view=t,this._elDef=n,this._data=r,this._embeddedViews=[]}return _createClass(e,[{key:"clear",value:function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=Ir(this._data,e);qn.destroyView(t)}}},{key:"get",value:function(e){var t=this._embeddedViews[e];if(t){var n=new Fr(t);return n.attachToViewContainerRef(this),n}return null}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var o=n||this.parentInjector;i||e instanceof nn||(i=o.get(je));var a=e.create(o,r,void 0,i);return this.insert(a.hostView,t),a}},{key:"insert",value:function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a,s=e;return n=this._view,r=this._data,i=t,o=s._view,a=r.viewContainer._embeddedViews,null==i&&(i=a.length),o.viewContainerParent=n,ze(a,i,o),function(e,t){var n=tr(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,t){if(!(4&t.flags)){e.nodeFlags|=4,t.flags|=4;for(var n=t.parent;n;)n.childFlags|=4,n=n.parent}}(t.parent.def,t.parentNodeDef)}}(r,o),qn.dirtyParentQueries(o),Ar(r,i>0?a[i-1]:null,o),s.attachToViewContainerRef(this),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(e._view);return n=this._data,r=s,i=t,o=n.viewContainer._embeddedViews,a=o[r],He(o,r),null==i&&(i=o.length),ze(o,i,a),qn.dirtyParentQueries(a),Nr(a),Ar(n,i>0?o[i-1]:null,a),e}},{key:"indexOf",value:function(e){return this._embeddedViews.indexOf(e._view)}},{key:"remove",value:function(e){var t=Ir(this._data,e);t&&qn.destroyView(t)}},{key:"detach",value:function(e){var t=Ir(this._data,e);return t?new Fr(t):null}},{key:"element",get:function(){return new on(this._data.renderElement)}},{key:"injector",get:function(){return new jr(this._view,this._elDef)}},{key:"parentInjector",get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=nr(e),e=e.parent;return e?new jr(e,t):new jr(this._view,null)}},{key:"length",get:function(){return this._embeddedViews.length}}]),e}();function Lr(e){return new Fr(e)}var Fr=function(){function e(t){_classCallCheck(this,e),this._view=t,this._viewContainerRef=null,this._appRef=null}return _createClass(e,[{key:"markForCheck",value:function(){Jn(this._view)}},{key:"detach",value:function(){this._view.state&=-5}},{key:"detectChanges",value:function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{qn.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}},{key:"checkNoChanges",value:function(){qn.checkNoChangesView(this._view)}},{key:"reattach",value:function(){this._view.state|=4}},{key:"onDestroy",value:function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}},{key:"destroy",value:function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),qn.destroyView(this._view)}},{key:"detachFromAppRef",value:function(){this._appRef=null,Nr(this._view),qn.dirtyParentQueries(this._view)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"rootNodes",get:function(){return fr(this._view,0,void 0,void 0,e=[]),e;var e}},{key:"context",get:function(){return this._view.context}},{key:"destroyed",get:function(){return 0!=(128&this._view.state)}}]),e}();function Vr(e,t){return new Ur(e,t)}var Ur=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parentView=e,r._def=n,r}return _inherits(t,e),_createClass(t,[{key:"createEmbeddedView",value:function(e){return new Fr(qn.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}},{key:"elementRef",get:function(){return new on(Vn(this._parentView,this._def.nodeIndex).renderElement)}}]),t}(An);function Br(e,t){return new jr(e,t)}var jr=function(){function e(t,n){_classCallCheck(this,e),this.view=t,this.elDef=n}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt.THROW_IF_NOT_FOUND;return qn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Kn(e)},t)}}]),e}();function qr(e,t){var n=e.def.nodes[t];if(1&n.flags){var r=Vn(e,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Fn(e,n.nodeIndex).renderText;if(20240&n.flags)return Un(e,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index ".concat(t))}function zr(e){return new Hr(e.renderer)}var Hr=function(){function e(t){_classCallCheck(this,e),this.delegate=t}return _createClass(e,[{key:"selectRootElement",value:function(e){return this.delegate.selectRootElement(e)}},{key:"createElement",value:function(e,t){var n=_slicedToArray(gr(t),2),r=n[0],i=n[1],o=this.delegate.createElement(i,r);return e&&this.delegate.appendChild(e,o),o}},{key:"createViewRoot",value:function(e){return e}},{key:"createTemplateAnchor",value:function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}},{key:"createText",value:function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}},{key:"projectNodes",value:function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}},{key:"attachViewAfter",value:function(e,t){for(var n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)}},{key:"detachView",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}},{key:"destroyView",value:function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"listenGlobal",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"setElementProperty",value:function(e,t,n){this.delegate.setProperty(e,t,n)}},{key:"setElementAttribute",value:function(e,t,n){var r=_slicedToArray(gr(t),2),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(e,o,n,i):this.delegate.removeAttribute(e,o,i)}},{key:"setBindingDebugInfo",value:function(e,t,n){}},{key:"setElementClass",value:function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}},{key:"setElementStyle",value:function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}},{key:"invokeElementMethod",value:function(e,t,n){e[t].apply(e,n)}},{key:"setText",value:function(e,t){this.delegate.setValue(e,t)}},{key:"animate",value:function(){throw new Error("Renderer.animate is no longer supported!")}}]),e}();function Kr(e,t,n,r){return new Wr(e,t,n,r)}var Wr=function(){function e(t,n,r,i){_classCallCheck(this,e),this._moduleType=t,this._parent=n,this._bootstrapComponents=r,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),r=0;r<t.providers.length;r++){var i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Tr(e,i))}}(this)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:me.Default,r=0;return n&me.SkipSelf?r|=1:n&me.Self&&(r|=4),Er(this,{token:e,tokenKey:Kn(e),flags:r},t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The ng module ".concat(we(this.instance.constructor)," has already been destroyed."));this._destroyed=!0,function(e,t){for(var n=e._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=e._providers[i];if(o&&o!==br){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach((function(e){return e()}))}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"instance",get:function(){return this.get(this._moduleType)}},{key:"componentFactoryResolver",get:function(){return this.get(en)}}]),e}(),Gr=Kn((function e(){_classCallCheck(this,e)})),Qr=Kn(cn),Yr=Kn(on),Xr=Kn(Dn),Zr=Kn(An),Jr=Kn(It),$r=Kn(Rt),ei=Kn(Re);function ti(e,t,n,r,i,o,a,s){var u=[];if(a)for(var c in a){var l=_slicedToArray(a[c],2),h=l[0],f=l[1];u[h]={flags:8,name:c,nonMinifiedName:f,ns:null,securityContext:null,suffix:null}}var d=[];if(s)for(var p in s)d.push({type:1,propName:p,target:null,eventName:s[p]});return ii(e,t|=16384,n,r,i,i,o,u,d)}function ni(e,t,n){return ii(-1,e|=16,null,0,t,t,n)}function ri(e,t,n,r,i){return ii(-1,e,t,0,n,r,i)}function ii(e,t,n,r,i,o,a,s,u){var c=sr(n),l=c.matchedQueries,h=c.references,f=c.matchedQueryIds;u||(u=[]),s||(s=[]),o=Se(o);var d=ur(a,we(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:_r(s),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function oi(e,t){return ci(e,t)}function ai(e,t){for(var n=e;n.parent&&!ir(n);)n=n.parent;return li(n.parent,nr(n),!0,t.provider.value,t.provider.deps)}function si(e,t){var n=li(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var r=0;r<t.outputs.length;r++){var i=t.outputs[r],o=n[i.propName];if(!Qt(o))throw new Error("@Output ".concat(i.propName," not initialized in '").concat(n.constructor.name,"'."));var a=o.subscribe(ui(e,t.parent.nodeIndex,i.eventName));e.disposables[t.outputIndex+r]=a.unsubscribe.bind(a)}return n}function ui(e,t,n){return function(r){return er(e,t,n,r)}}function ci(e,t){var n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return li(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(fi(e,t,n,i[0]));case 2:return r(fi(e,t,n,i[0]),fi(e,t,n,i[1]));case 3:return r(fi(e,t,n,i[0]),fi(e,t,n,i[1]),fi(e,t,n,i[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=fi(e,t,n,i[s]);return r.apply(void 0,a)}}(e,t.parent,n,r.value,r.deps);case 2048:return fi(e,t.parent,n,r.deps[0]);case 256:return r.value}}function li(e,t,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(fi(e,t,n,i[0]));case 2:return new r(fi(e,t,n,i[0]),fi(e,t,n,i[1]));case 3:return new r(fi(e,t,n,i[0]),fi(e,t,n,i[1]),fi(e,t,n,i[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=fi(e,t,n,i[s]);return _construct(r,a)}}var hi={};function fi(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rt.THROW_IF_NOT_FOUND;if(8&r.flags)return r.token;var o=e;2&r.flags&&(i=null);var a=r.tokenKey;a===Jr&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);for(var s=e;s;){if(t)switch(a){case Gr:return zr(di(s,t,n));case Qr:return di(s,t,n).renderer;case Yr:return new on(Vn(s,t.nodeIndex).renderElement);case Xr:return Vn(s,t.nodeIndex).viewContainer;case Zr:if(t.element.template)return Vn(s,t.nodeIndex).template;break;case Jr:return Lr(di(s,t,n));case $r:case ei:return Br(s,t);default:var u=(n?t.element.allProviders:t.element.publicProviders)[a];if(u){var c=Un(s,u.nodeIndex);return c||(c={instance:ci(s,u)},s.nodes[u.nodeIndex]=c),c.instance}}n=ir(s),t=nr(s),s=s.parent,4&r.flags&&(s=null)}var l=o.root.injector.get(r.token,hi);return l!==hi||i===hi?l:o.root.ngModule.injector.get(r.token,i)}function di(e,t,n){var r;if(n)r=Vn(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!ir(r);)r=r.parent;return r}function pi(e,t,n,r,i,o){if(32768&n.flags){var a=Vn(e,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=Ht.unwrap(e.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Yt(s,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,o}function vi(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&t&&yi(e,i,o.flags&t,r++),0==(o.childFlags&t)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&t&&(r=mi(e,a,t,r)),a=a.parent}}function mi(e,t,n,r){for(var i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){var o=e.def.nodes[i];o.flags&n&&yi(e,i,o.flags&n,r++),i+=o.childCount}return r}function yi(e,t,n,r){var i=Un(e,t);if(i){var o=i.instance;o&&(qn.setCurrentNode(e,t),1048576&n&&Ln(e,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Ln(e,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}var gi=new De("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return We}}),_i={},bi=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}(),wi=void 0,ki=["en",[["a","p"],["AM","PM"],wi],[["AM","PM"],wi,wi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wi,"{1} 'at' {0}",wi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Ci=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).__isAsync=n,e}return _inherits(t,e),_createClass(t,[{key:"emit",value:function(e){_get(_getPrototypeOf(t.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,n,r){var i,o=function(e){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},n&&(o=this.__isAsync?function(e){setTimeout((function(){return n(e)}))}:function(e){n(e)}),r&&(a=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var s=_get(_getPrototypeOf(t.prototype),"subscribe",this).call(this,i,o,a);return e instanceof d&&e.add(s),s}}]),t}(D);function Si(){return this._results[jt()]()}var Ei=function(){function e(){_classCallCheck(this,e),this.dirty=!0,this._results=[],this.changes=new Ci,this.length=0;var t=jt(),n=e.prototype;n[t]||(n[t]=Si)}return _createClass(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,n){void 0===n&&(n=t);for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),Ti=new De("Application Initializer"),Ii=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Gt(i)&&t.push(i)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}(),Ai=new De("AppId");function Ni(){return"".concat(Di()).concat(Di()).concat(Di())}function Di(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Ri=new De("Platform Initializer"),xi=new De("Platform ID"),Oi=new De("appBootstrapListener"),Pi=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}(),Mi=new De("LocaleId");function Li(){throw new Error("Runtime compiler is not loaded")}var Fi,Vi,Ui=Li,Bi=Li,ji=Li,qi=Li,zi=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=Ui,this.compileModuleAsync=Bi,this.compileModuleAndAllComponentsSync=ji,this.compileModuleAndAllComponentsAsync=qi}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}(),Hi=function e(){_classCallCheck(this,e)};var Ki,Wi=!(!(Ki=Ne.wtf)||(Fi=Ki.trace,!Fi)||(Vi=Fi.events,0));function Gi(e,t){return null}var Qi=Wi?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Vi.createScope(e,t)}:function(e,t){return Gi},Yi=Wi?function(e,t){return Fi.leaveScope(e,t),t}:function(e,t){return t},Xi=Promise.resolve(0);function Zi(e){"undefined"==typeof Zone?Xi.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Ji=function(){function e(t){var n,r=t.enableLongStackTrace,i=void 0!==r&&r;if(_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ci(!1),this.onMicrotaskEmpty=new Ci(!1),this.onStable=new Ci(!1),this.onError=new Ci(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,r,i,o,a){try{return no(n),e.invokeTask(r,i,o,a)}finally{ro(n)}},onInvoke:function(e,t,r,i,o,a,s){try{return no(n),e.invoke(r,i,o,a,s)}finally{ro(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n.hasPendingMicrotasks=i.microTask,to(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,eo,$i,$i);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function $i(){}var eo={};function to(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function no(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ro(e){e._nesting--,to(e)}var io,oo=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ci,this.onMicrotaskEmpty=new Ci,this.onStable=new Ci,this.onError=new Ci}return _createClass(e,[{key:"run",value:function(e){return e()}},{key:"runGuarded",value:function(e){return e()}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e){return e()}}]),e}(),ao=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){Ji.assertNotInAngularZone(),Zi((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Zi((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}(),so=function(){function e(){_classCallCheck(this,e),this._applications=new Map,uo.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return uo.findTestabilityInTree(this,e,t)}}]),e}(),uo=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),co=new De("AllowMultipleToken"),lo=function e(t,n){_classCallCheck(this,e),this.name=t,this.token=n};function ho(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new De(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=fo();if(!o||o.injector.get(co,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var a=n.concat(t).concat({provide:i,useValue:!0});!function(e){if(io&&!io.destroyed&&!io.injector.get(co,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");io=e.get(po);var t=e.get(Ri,null);t&&t.forEach((function(e){return e()}))}(Rt.create({providers:a,name:r}))}return function(e){var t=fo();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function fo(){return io&&!io.destroyed?io:null}var po=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r=this,i="noop"===(n=t?t.ngZone:void 0)?new oo:("zone.js"===n?void 0:n)||new Ji({enableLongStackTrace:$e()}),o=[{provide:Ji,useValue:i}];return i.run((function(){var t=Rt.create({providers:o,parent:r.injector,name:e.moduleType.name}),n=e.create(t),a=n.injector.get(Xe,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return go(r._modules,n)})),i.runOutsideAngular((function(){return i.onError.subscribe({next:function(e){a.handleError(e)}})})),function(e,t,i){try{var o=((a=n.injector.get(Ii)).runInitializers(),a.donePromise.then((function(){return r._moduleDoBootstrap(n),n})));return Gt(o)?o.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):o}catch(s){throw t.runOutsideAngular((function(){return e.handleError(s)})),s}var a}(a,i)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=vo({},n);return function(e,t,n){return e.get(Hi).createCompiler([t]).compileModuleAsync(n)}(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(yo);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(we(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function vo(e,t){return Array.isArray(t)?t.reduce(vo,e):Object.assign({},e,t)}var mo,yo=((mo=function(){function e(t,n,r,i,o,a){var s=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=$e(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var u=new C((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),c=new C((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){Ji.assertNotInAngularZone(),Zi((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){Ji.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=ee(u,c.pipe(le()))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Xt?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n instanceof nn?null:this._injector.get(je),o=n.create(Rt.NULL,[],t||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var a=o.injector.get(ao,null);return a&&o.injector.get(so).registerApplication(o.location.nativeElement,a),this._loadComponent(o),$e()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=e._tickScope();try{this._runningTick=!0;var r=!0,i=!1,o=void 0;try{for(var a,s=this._views[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)a.value.detectChanges()}catch(d){i=!0,o=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}if(this._enforceNoNewChanges){var u=!0,c=!1,l=void 0;try{for(var h,f=this._views[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)h.value.checkNoChanges()}catch(d){c=!0,l=d}finally{try{u||null==f.return||f.return()}finally{if(c)throw l}}}}catch(p){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(p)}))}finally{this._runningTick=!1,Yi(n)}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;go(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Oi,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),go(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}())._tickScope=Qi("ApplicationRef#tick()"),mo);function go(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var _o=function e(){_classCallCheck(this,e)},bo=function e(){_classCallCheck(this,e)},wo={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},ko=function(){function e(t,n){_classCallCheck(this,e),this._compiler=t,this._config=n||wo}return _createClass(e,[{key:"load",value:function(e){return this._compiler instanceof zi?this.loadFactory(e):this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,r=_slicedToArray(e.split("#"),2),i=r[0],o=r[1];return void 0===o&&(o="default"),n("zn8P")(i).then((function(e){return e[o]})).then((function(e){return Co(e,i,o)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=_slicedToArray(e.split("#"),2),r=t[0],i=t[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(e){return e[i+o]})).then((function(e){return Co(e,r,i)}))}}]),e}();function Co(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var So=function e(t,n){_classCallCheck(this,e),this.name=t,this.callback=n},Eo=function(){function e(t,n,r){_classCallCheck(this,e),this.listeners=[],this.parent=null,this._debugContext=r,this.nativeNode=t,n&&n instanceof To&&n.addChild(this)}return _createClass(e,[{key:"injector",get:function(){return this._debugContext.injector}},{key:"componentInstance",get:function(){return this._debugContext.component}},{key:"context",get:function(){return this._debugContext.context}},{key:"references",get:function(){return this._debugContext.references}},{key:"providerTokens",get:function(){return this._debugContext.providerTokens}}]),e}(),To=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,r))).properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return _inherits(t,e),_createClass(t,[{key:"addChild",value:function(e){e&&(this.childNodes.push(e),e.parent=this)}},{key:"removeChild",value:function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}},{key:"insertChildrenAfter",value:function(e,t){var n,r=this,i=this.childNodes.indexOf(e);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(_toConsumableArray(t))),t.forEach((function(t){t.parent&&t.parent.removeChild(t),e.parent=r})))}},{key:"insertBefore",value:function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}},{key:"query",value:function(e){return this.queryAll(e)[0]||null}},{key:"queryAll",value:function(e){var n=[];return function e(n,r,i){n.childNodes.forEach((function(n){n instanceof t&&(r(n)&&i.push(n),e(n,r,i))}))}(this,e,n),n}},{key:"queryAllNodes",value:function(e){var n=[];return function e(n,r,i){n instanceof t&&n.childNodes.forEach((function(n){r(n)&&i.push(n),n instanceof t&&e(n,r,i)}))}(this,e,n),n}},{key:"triggerEventHandler",value:function(e,t){this.listeners.forEach((function(n){n.name==e&&n.callback(t)}))}},{key:"children",get:function(){return this.childNodes.filter((function(e){return e instanceof t}))}}]),t}(Eo),Io=new Map,Ao=function(e){return Io.get(e)||null};function No(e){Io.set(e.nativeNode,e)}var Do=ho(null,"core",[{provide:xi,useValue:"unknown"},{provide:po,deps:[Rt]},{provide:so,deps:[]},{provide:Pi,deps:[]}]);function Ro(){return Tn}function xo(){return In}function Oo(e){return e||"en-US"}function Po(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}var Mo=function e(t){_classCallCheck(this,e)};function Lo(e,t,n,r,i,o){e|=1;var a=sr(t),s=a.matchedQueries,u=a.references;return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:a.matchedQueryIds,references:u,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?hr(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||zn},provider:null,text:null,query:null,ngContent:null}}function Fo(e,t,n,r,i,o){var a,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;l||(l=zn);var d=sr(n),p=d.matchedQueries,v=d.references,m=d.matchedQueryIds,y=null,g=null;o&&(y=(a=_slicedToArray(gr(o),2))[0],g=a[1]),u=u||[];for(var _=new Array(u.length),b=0;b<u.length;b++){var w=_slicedToArray(u[b],3),k=w[0],C=w[1],S=w[2],E=gr(C),T=_slicedToArray(E,2),I=T[0],A=T[1],N=void 0,D=void 0;switch(15&k){case 4:D=S;break;case 1:case 8:N=S}_[b]={flags:k,ns:I,name:A,nonMinifiedName:A,securityContext:N,suffix:D}}c=c||[];for(var R=new Array(c.length),x=0;x<c.length;x++){var O=_slicedToArray(c[x],2),P=O[0],M=O[1];R[x]={type:0,target:P,eventName:M,propName:null}}var L=(s=s||[]).map((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1],i=_slicedToArray(gr(n),2);return[i[0],i[1],r]}));return f=function(e){if(e&&"$$undefined"===e.id){var t=null!=e.encapsulation&&e.encapsulation!==Ke.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c".concat(Qn++):"$$empty"}return e&&"$$empty"===e.id&&(e=null),e||null}(f),h&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:p,matchedQueryIds:m,references:v,ngContentIndex:r,childCount:i,bindings:_,bindingFlags:_r(_),outputs:R,element:{ns:y,name:g,attrs:L,template:null,componentProvider:null,componentView:h||null,componentRendererType:f,publicProviders:null,allProviders:null,handleEvent:l||zn},provider:null,text:null,query:null,ngContent:null}}function Vo(e,t,n){var r,i=n.element,o=e.root.selectorOrNode,a=e.renderer;if(e.parent||!o){r=i.name?a.createElement(i.name,i.ns):a.createComment("");var s=cr(e,t,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(o,!!i.componentRendererType&&i.componentRendererType.encapsulation===Ke.ShadowDom);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var c=_slicedToArray(i.attrs[u],3),l=c[0],h=c[1],f=c[2];a.setAttribute(r,h,f,l)}return r}function Uo(e,t,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=Bo(e,n.nodeIndex,(h=o.eventName,(l=o.target)?"".concat(l,":").concat(h):h)),s=o.target,u=e;"component"===o.target&&(s=null,u=t);var c=u.renderer.listen(s||r,o.eventName,a);e.disposables[n.outputIndex+i]=c}var l,h}function Bo(e,t,n){return function(r){return er(e,t,n,r)}}function jo(e,t,n,r){if(!Xn(e,t,n,r))return!1;var i=t.bindings[n],o=Vn(e,t.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,o){var a=t.securityContext,s=a?e.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=e.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(e,i,a,i.ns,s,r);break;case 2:!function(e,t,n,r){var i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,a,s,r);break;case 4:!function(e,t,n,r,i){var o=e.root.sanitizer.sanitize(wt.STYLE,i);if(null!=o){o=o.toString();var a=t.suffix;null!=a&&(o+=a)}else o=null;var s=e.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(e,i,a,s,r);break;case 8:!function(e,t,n,r,i){var o=t.securityContext,a=o?e.root.sanitizer.sanitize(o,i):i;e.renderer.setProperty(n,r,a)}(33554432&t.flags&&32&i.flags?o.componentView:e,i,a,s,r)}return!0}function qo(e,t,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:ar(t),bindings:r},ngContent:null}}function zo(e){for(var t=e.def.nodeMatchedQueries;e.parent&&or(e);){var n=e.parentNodeDef;e=e.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++){var o=e.def.nodes[i];67108864&o.flags&&536870912&o.flags&&(o.query.filterId&t)===o.query.filterId&&jn(e,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}}if(134217728&e.def.nodeFlags)for(var a=0;a<e.def.nodes.length;a++){var s=e.def.nodes[a];134217728&s.flags&&536870912&s.flags&&jn(e,a).setDirty(),a+=s.childCount}}function Ho(e,t){var n=jn(e,t.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&t.flags){var o=t.parent.parent;i=Ko(e,o.nodeIndex,o.nodeIndex+o.childCount,t.query,[]),r=Un(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=Ko(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);for(var a=t.query.bindings,s=!1,u=0;u<a.length;u++){var c=a[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,s=!0}r[c.propName]=l}s&&n.notifyOnChanges()}}function Ko(e,t,n,r,i){for(var o=t;o<=n;o++){var a=e.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(Wo(e,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Vn(e,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(Ko(e,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=tr(h);f&&f===u&&Ko(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(var p=0;p<d.length;p++){var v=d[p];Ko(v,0,v.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function Wo(e,t,n){if(null!=n)switch(n){case 1:return Vn(e,t.nodeIndex).renderElement;case 0:return new on(Vn(e,t.nodeIndex).renderElement);case 2:return Vn(e,t.nodeIndex).template;case 3:return Vn(e,t.nodeIndex).viewContainer;case 4:return Un(e,t.nodeIndex).instance}}function Go(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function Qo(e,t,n){var r=cr(e,t,n);r&&pr(e,n.ngContent.index,1,r,null,void 0)}function Yo(e,t,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Xo(e,t,n){var r,i=e.renderer;r=i.createText(n.text.prefix);var o=cr(e,t,n);return o&&i.appendChild(o,r),{renderText:r}}function Zo(e,t){return(null!=e?e.toString():"")+t.suffix}function Jo(e,t,n,r){for(var i=0,o=0,a=0,s=0,u=0,c=null,l=null,h=!1,f=!1,d=null,p=0;p<t.length;p++){var v=t[p];if(v.nodeIndex=p,v.parent=c,v.bindingIndex=i,v.outputIndex=o,v.renderParent=l,a|=v.flags,u|=v.matchedQueryIds,v.element){var m=v.element;m.publicProviders=c?c.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,h=!1,f=!1,v.element.template&&(u|=v.element.template.nodeMatchedQueries)}if(ea(c,v,t.length),i+=v.bindings.length,o+=v.outputs.length,!l&&3&v.flags&&(d=v),20224&v.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var y=0!=(32768&v.flags);0==(8192&v.flags)||y?c.element.publicProviders[Kn(v.provider.token)]=v:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[Kn(v.provider.token)]=v),y&&(c.element.componentProvider=v)}if(c?(c.childFlags|=v.flags,c.directChildFlags|=v.flags,c.childMatchedQueries|=v.matchedQueryIds,v.element&&v.element.template&&(c.childMatchedQueries|=v.element.template.nodeMatchedQueries)):s|=v.flags,v.childCount>0)c=v,$o(v)||(l=v);else for(;c&&p===c.nodeIndex+c.childCount;){var g=c.parent;g&&(g.childFlags|=c.childFlags,g.childMatchedQueries|=c.childMatchedQueries),l=(c=g)&&$o(c)?c.renderParent:c}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||zn,updateRenderer:r||zn,handleEvent:function(e,n,r,i){return t[n].element.handleEvent(e,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:d}}function $o(e){return 0!=(1&e.flags)&&null===e.element.name}function ea(e,t,n){var r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index ".concat(t.nodeIndex,"!"))}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ".concat(t.nodeIndex,"!"));if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index ".concat(t.nodeIndex,"!"));if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index ".concat(t.nodeIndex,"!"))}if(t.childCount){var i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index ".concat(t.nodeIndex,"!"))}}function ta(e,t,n,r){var i=ia(e.root,e.renderer,e,t,n);return oa(i,e.component,r),aa(i),i}function na(e,t,n){var r=ia(e,e.renderer,null,null,t);return oa(r,n,n),aa(r),r}function ra(e,t,n,r){var i,o=t.element.componentRendererType;return i=o?e.root.rendererFactory.createRenderer(r,o):e.root.renderer,ia(e.root,i,e,t.element.componentProvider,n)}function ia(e,t,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function oa(e,t,n){e.component=t,e.context=n}function aa(e){var t;ir(e)&&(t=Vn(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,r=e.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i],a=void 0;switch(qn.setCurrentNode(e,i),201347067&o.flags){case 1:var s=Vo(e,t,o),u=void 0;if(33554432&o.flags){var c=hr(o.element.componentView);u=qn.createComponentView(e,o,c,s)}Uo(e,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?Vr(e,o):void 0},16777216&o.flags&&(a.viewContainer=Pr(e,o,a));break;case 2:a=Xo(e,t,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:oi(e,o)});break;case 16:a={instance:ai(e,o)};break;case 16384:(a=r[i])||(a={instance:si(e,o)}),32768&o.flags&&oa(Vn(e,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Ei;break;case 8:Qo(e,t,o),a=void 0}r[i]=a}va(e,pa.CreateViewNodes),_a(e,201326592,268435456,0)}function sa(e){la(e),qn.updateDirectives(e,1),ma(e,pa.CheckNoChanges),qn.updateRenderer(e,1),va(e,pa.CheckNoChanges),e.state&=-97}function ua(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Mn(e,0,256),la(e),qn.updateDirectives(e,0),ma(e,pa.CheckAndUpdate),_a(e,67108864,536870912,0);var t=Mn(e,256,512);vi(e,2097152|(t?1048576:0)),qn.updateRenderer(e,0),va(e,pa.CheckAndUpdate),_a(e,134217728,536870912,0),vi(e,8388608|((t=Mn(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Mn(e,768,1024)}function ca(e,t,n,r,i,o,a,s,u,c,l,h,f){return 0===n?function(e,t,n,r,i,o,a,s,u,c,l,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,o,a,s,u,c,l,h){var f=t.bindings.length,d=!1;return f>0&&jo(e,t,0,n)&&(d=!0),f>1&&jo(e,t,1,r)&&(d=!0),f>2&&jo(e,t,2,i)&&(d=!0),f>3&&jo(e,t,3,o)&&(d=!0),f>4&&jo(e,t,4,a)&&(d=!0),f>5&&jo(e,t,5,s)&&(d=!0),f>6&&jo(e,t,6,u)&&(d=!0),f>7&&jo(e,t,7,c)&&(d=!0),f>8&&jo(e,t,8,l)&&(d=!0),f>9&&jo(e,t,9,h)&&(d=!0),d}(e,t,n,r,i,o,a,s,u,c,l,h);case 2:return function(e,t,n,r,i,o,a,s,u,c,l,h){var f=!1,d=t.bindings,p=d.length;if(p>0&&Xn(e,t,0,n)&&(f=!0),p>1&&Xn(e,t,1,r)&&(f=!0),p>2&&Xn(e,t,2,i)&&(f=!0),p>3&&Xn(e,t,3,o)&&(f=!0),p>4&&Xn(e,t,4,a)&&(f=!0),p>5&&Xn(e,t,5,s)&&(f=!0),p>6&&Xn(e,t,6,u)&&(f=!0),p>7&&Xn(e,t,7,c)&&(f=!0),p>8&&Xn(e,t,8,l)&&(f=!0),p>9&&Xn(e,t,9,h)&&(f=!0),f){var v=t.text.prefix;p>0&&(v+=Zo(n,d[0])),p>1&&(v+=Zo(r,d[1])),p>2&&(v+=Zo(i,d[2])),p>3&&(v+=Zo(o,d[3])),p>4&&(v+=Zo(a,d[4])),p>5&&(v+=Zo(s,d[5])),p>6&&(v+=Zo(u,d[6])),p>7&&(v+=Zo(c,d[7])),p>8&&(v+=Zo(l,d[8])),p>9&&(v+=Zo(h,d[9]));var m=Fn(e,t.nodeIndex).renderText;e.renderer.setValue(m,v)}return f}(e,t,n,r,i,o,a,s,u,c,l,h);case 16384:return function(e,t,n,r,i,o,a,s,u,c,l,h){var f=Un(e,t.nodeIndex),d=f.instance,p=!1,v=void 0,m=t.bindings.length;return m>0&&Yn(e,t,0,n)&&(p=!0,v=pi(e,f,t,0,n,v)),m>1&&Yn(e,t,1,r)&&(p=!0,v=pi(e,f,t,1,r,v)),m>2&&Yn(e,t,2,i)&&(p=!0,v=pi(e,f,t,2,i,v)),m>3&&Yn(e,t,3,o)&&(p=!0,v=pi(e,f,t,3,o,v)),m>4&&Yn(e,t,4,a)&&(p=!0,v=pi(e,f,t,4,a,v)),m>5&&Yn(e,t,5,s)&&(p=!0,v=pi(e,f,t,5,s,v)),m>6&&Yn(e,t,6,u)&&(p=!0,v=pi(e,f,t,6,u,v)),m>7&&Yn(e,t,7,c)&&(p=!0,v=pi(e,f,t,7,c,v)),m>8&&Yn(e,t,8,l)&&(p=!0,v=pi(e,f,t,8,l,v)),m>9&&Yn(e,t,9,h)&&(p=!0,v=pi(e,f,t,9,h,v)),v&&d.ngOnChanges(v),65536&t.flags&&Ln(e,256,t.nodeIndex)&&d.ngOnInit(),262144&t.flags&&d.ngDoCheck(),p}(e,t,n,r,i,o,a,s,u,c,l,h);case 32:case 64:case 128:return function(e,t,n,r,i,o,a,s,u,c,l,h){var f=t.bindings,d=!1,p=f.length;if(p>0&&Xn(e,t,0,n)&&(d=!0),p>1&&Xn(e,t,1,r)&&(d=!0),p>2&&Xn(e,t,2,i)&&(d=!0),p>3&&Xn(e,t,3,o)&&(d=!0),p>4&&Xn(e,t,4,a)&&(d=!0),p>5&&Xn(e,t,5,s)&&(d=!0),p>6&&Xn(e,t,6,u)&&(d=!0),p>7&&Xn(e,t,7,c)&&(d=!0),p>8&&Xn(e,t,8,l)&&(d=!0),p>9&&Xn(e,t,9,h)&&(d=!0),d){var v,m=Bn(e,t.nodeIndex);switch(201347067&t.flags){case 32:v=new Array(f.length),p>0&&(v[0]=n),p>1&&(v[1]=r),p>2&&(v[2]=i),p>3&&(v[3]=o),p>4&&(v[4]=a),p>5&&(v[5]=s),p>6&&(v[6]=u),p>7&&(v[7]=c),p>8&&(v[8]=l),p>9&&(v[9]=h);break;case 64:v={},p>0&&(v[f[0].name]=n),p>1&&(v[f[1].name]=r),p>2&&(v[f[2].name]=i),p>3&&(v[f[3].name]=o),p>4&&(v[f[4].name]=a),p>5&&(v[f[5].name]=s),p>6&&(v[f[6].name]=u),p>7&&(v[f[7].name]=c),p>8&&(v[f[8].name]=l),p>9&&(v[f[9].name]=h);break;case 128:var y=n;switch(p){case 1:v=y.transform(n);break;case 2:v=y.transform(r);break;case 3:v=y.transform(r,i);break;case 4:v=y.transform(r,i,o);break;case 5:v=y.transform(r,i,o,a);break;case 6:v=y.transform(r,i,o,a,s);break;case 7:v=y.transform(r,i,o,a,s,u);break;case 8:v=y.transform(r,i,o,a,s,u,c);break;case 9:v=y.transform(r,i,o,a,s,u,c,l);break;case 10:v=y.transform(r,i,o,a,s,u,c,l,h)}}m.value=v}return d}(e,t,n,r,i,o,a,s,u,c,l,h);default:throw"unreachable"}}(e,t,r,i,o,a,s,u,c,l,h,f):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var r=!1,i=0;i<n.length;i++)jo(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){for(var r=t.bindings,i=!1,o=0;o<n.length;o++)Xn(e,t,o,n[o])&&(i=!0);if(i){for(var a="",s=0;s<n.length;s++)a+=Zo(n[s],r[s]);a=t.text.prefix+a;var u=Fn(e,t.nodeIndex).renderText;e.renderer.setValue(u,a)}return i}(e,t,n);case 16384:return function(e,t,n){for(var r=Un(e,t.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)Yn(e,t,s,n[s])&&(o=!0,a=pi(e,r,t,s,n[s],a));return a&&i.ngOnChanges(a),65536&t.flags&&Ln(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var r=t.bindings,i=!1,o=0;o<n.length;o++)Xn(e,t,o,n[o])&&(i=!0);if(i){var a,s=Bn(e,t.nodeIndex);switch(201347067&t.flags){case 32:a=n;break;case 64:a={};for(var u=0;u<n.length;u++)a[r[u].name]=n[u];break;case 128:var c=n[0],l=n.slice(1);a=c.transform.apply(c,_toConsumableArray(l))}s.value=a}return i}(e,t,n);default:throw"unreachable"}}(e,t,r)}function la(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(4&r.flags){var i=Vn(e,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,$n(a,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function ha(e,t,n,r,i,o,a,s,u,c,l,h,f){return 0===n?function(e,t,n,r,i,o,a,s,u,c,l,h){var f=t.bindings.length;f>0&&Zn(e,t,0,n),f>1&&Zn(e,t,1,r),f>2&&Zn(e,t,2,i),f>3&&Zn(e,t,3,o),f>4&&Zn(e,t,4,a),f>5&&Zn(e,t,5,s),f>6&&Zn(e,t,6,u),f>7&&Zn(e,t,7,c),f>8&&Zn(e,t,8,l),f>9&&Zn(e,t,9,h)}(e,t,r,i,o,a,s,u,c,l,h,f):function(e,t,n){for(var r=0;r<n.length;r++)Zn(e,t,r,n[r])}(e,t,r),!1}function fa(e,t){if(jn(e,t.nodeIndex).dirty)throw xn(qn.createDebugContext(e,t.nodeIndex),"Query ".concat(t.query.id," not dirty"),"Query ".concat(t.query.id," dirty"),0!=(1&e.state))}function da(e){if(!(128&e.state)){if(ma(e,pa.Destroy),va(e,pa.Destroy),vi(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=tr(e);if(t){var n=t.template._projectedViews;n&&(He(n,n.indexOf(e)),qn.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var r=e.def.nodes[n];1&r.flags?e.renderer.destroyNode(Vn(e,n).renderElement):2&r.flags?e.renderer.destroyNode(Fn(e,n).renderText):(67108864&r.flags||134217728&r.flags)&&jn(e,n).destroy()}}(e),ir(e)&&e.renderer.destroy(),e.state|=128}}var pa=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function va(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?ya(Vn(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function ma(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Vn(e,r).viewContainer._embeddedViews,a=0;a<o.length;a++)ya(o[a],t);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function ya(e,t){var n=e.state;switch(t){case pa.CheckNoChanges:0==(128&n)&&(12==(12&n)?sa(e):64&n&&ga(e,pa.CheckNoChangesProjectedViews));break;case pa.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?sa(e):64&n&&ga(e,t));break;case pa.CheckAndUpdate:0==(128&n)&&(12==(12&n)?ua(e):64&n&&ga(e,pa.CheckAndUpdateProjectedViews));break;case pa.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?ua(e):64&n&&ga(e,t));break;case pa.Destroy:da(e);break;case pa.CreateViewNodes:aa(e)}}function ga(e,t){ma(e,t),va(e,t)}function _a(e,t,n,r){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var i=e.def.nodes.length,o=0;o<i;o++){var a=e.def.nodes[o];if(a.flags&t&&a.flags&n)switch(qn.setCurrentNode(e,a.nodeIndex),r){case 0:Ho(e,a);break;case 1:fa(e,a)}a.childFlags&t&&a.childFlags&n||(o+=a.childCount)}}var ba=!1;function wa(e,t,n,r,i,o){var a=i.injector.get(sn);return na(Ca(e,i,a,t,n),r,o)}function ka(e,t,n,r,i,o){var a=i.injector.get(sn),s=Ca(e,i,new ts(a),t,n),u=Oa(r);return $a(qa.create,na,null,[s,u,o])}function Ca(e,t,n,r,i){var o=t.injector.get(kt),a=t.injector.get(Xe),s=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function Sa(e,t,n,r){var i=Oa(n);return $a(qa.create,ta,null,[e,t,i,r])}function Ea(e,t,n,r){return n=Na.get(t.element.componentProvider.provider.token)||Oa(n),$a(qa.create,ra,null,[e,t,n,r])}function Ta(e,t,n,r){return Kr(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===Ia.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach((function(e){var r=Ia.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)})),e.modules.forEach((function(e){Aa.forEach((function(r,i){_e(i).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)}))})),{hasOverrides:t,hasDeprecatedOverrides:n})}(e),n=t.hasOverrides,r=t.hasDeprecatedOverrides;return n?(function(e){for(var t=0;t<e.providers.length;t++){var n=e.providers[t];r&&(n.flags|=4096);var i=Ia.get(n.token);i&&(n.flags=-3841&n.flags|i.flags,n.deps=ur(i.deps),n.value=i.value)}if(Aa.size>0){var o=new Set(e.modules);Aa.forEach((function(t,n){if(o.has(_e(n).providedIn)){var i={token:n,flags:t.flags|(r?4096:0),deps:ur(t.deps),value:t.value,index:e.providers.length};e.providers.push(i),e.providersByKey[Kn(n)]=i}}))}}(e=e.factory((function(){return zn}))),e):e}(r))}var Ia=new Map,Aa=new Map,Na=new Map;function Da(e){var t;Ia.set(e.token,e),"function"==typeof e.token&&(t=_e(e.token))&&"function"==typeof t.providedIn&&Aa.set(e.token,e)}function Ra(e,t){var n=hr(t.viewDefFactory),r=hr(n.nodes[0].element.componentView);Na.set(e,r)}function xa(){Ia.clear(),Aa.clear(),Na.clear()}function Oa(e){if(0===Ia.size)return e;var t=function(e){for(var t=[],n=null,r=0;r<e.nodes.length;r++){var i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Ia.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory((function(){return zn}));for(var n=0;n<t.length;n++)r(e,t[n]);return e;function r(e,t){for(var n=t+1;n<e.nodes.length;n++){var r=e.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Ia.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=ur(o.deps),i.value=o.value)}}}}function Pa(e,t,n,r,i,o,a,s,u,c,l,h,f){var d=e.def.nodes[t];return ca(e,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?Bn(e,t).value:void 0}function Ma(e,t,n,r,i,o,a,s,u,c,l,h,f){var d=e.def.nodes[t];return ha(e,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?Bn(e,t).value:void 0}function La(e){return $a(qa.detectChanges,ua,null,[e])}function Fa(e){return $a(qa.checkNoChanges,sa,null,[e])}function Va(e){return $a(qa.destroy,da,null,[e])}var Ua,Ba,ja,qa=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();function za(e,t){Ba=e,ja=t}function Ha(e,t,n,r){return za(e,t),$a(qa.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function Ka(e,t){if(128&e.state)throw Pn(qa[Ua]);return za(e,Ya(e,0)),e.def.updateDirectives((function(e,n,r){for(var i=e.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===t?Ga(e,i,r,a):Qa(e,i,r,a),16384&i.flags&&za(e,Ya(e,n)),224&i.flags?Bn(e,i.nodeIndex).value:void 0}),e)}function Wa(e,t){if(128&e.state)throw Pn(qa[Ua]);return za(e,Xa(e,0)),e.def.updateRenderer((function(e,n,r){for(var i=e.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===t?Ga(e,i,r,a):Qa(e,i,r,a),3&i.flags&&za(e,Xa(e,n)),224&i.flags?Bn(e,i.nodeIndex).value:void 0}),e)}function Ga(e,t,n,r){if(ca.apply(void 0,[e,t,n].concat(_toConsumableArray(r)))){var i=1===n?r[0]:r;if(16384&t.flags){for(var o={},a=0;a<t.bindings.length;a++){var s=t.bindings[a],u=i[a];8&s.flags&&(o[(d=s.nonMinifiedName,p=void 0,p=d.replace(/[$@]/g,"_"),"ng-reflect-".concat(d=p.replace(Et,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"-"+t[1].toLowerCase()}))))]=Tt(u))}var c=t.parent,l=Vn(e,c.nodeIndex).renderElement;if(c.element.name)for(var h in o){var f=o[h];null!=f?e.renderer.setAttribute(l,h,f):e.renderer.removeAttribute(l,h)}else e.renderer.setValue(l,"bindings=".concat(JSON.stringify(o,null,2)))}}var d,p}function Qa(e,t,n,r){ha.apply(void 0,[e,t,n].concat(_toConsumableArray(r)))}function Ya(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Xa(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Za=function(){function e(t,n){_classCallCheck(this,e),this.view=t,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=t.def.nodes[n];for(var r=this.nodeDef,i=t;r&&0==(1&r.flags);)r=r.parent;if(!r)for(;!r&&i;)r=nr(i),i=i.parent;this.elDef=r,this.elView=i}return _createClass(e,[{key:"logError",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o;2&this.nodeDef.flags?(i=this.view.def,o=this.nodeDef.nodeIndex):(i=this.elView.def,o=this.elDef.nodeIndex);var a=function(e,t){for(var n=-1,r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(i,o),s=-1;i.factory((function(){var t;return++s===a?(t=e.error).bind.apply(t,[e].concat(n)):zn})),s<a&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,n))}},{key:"elOrCompView",get:function(){return Vn(this.elView,this.elDef.nodeIndex).componentView||this.view}},{key:"injector",get:function(){return Br(this.elView,this.elDef)}},{key:"component",get:function(){return this.elOrCompView.component}},{key:"context",get:function(){return this.elOrCompView.context}},{key:"providerTokens",get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}},{key:"references",get:function(){var e={};if(this.elDef){Ja(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&Ja(this.elView,n,e),t+=n.childCount}}return e}},{key:"componentRenderElement",get:function(){var e=function(e){for(;e&&!ir(e);)e=e.parent;return e.parent?Vn(e.parent,nr(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}},{key:"renderNode",get:function(){return 2&this.nodeDef.flags?rr(this.view,this.nodeDef):rr(this.elView,this.elDef)}}]),e}();function Ja(e,t,n){for(var r in t.references)n[r]=Wo(e,t,t.references[r])}function $a(e,t,n,r){var i,o,a=Ua,s=Ba,u=ja;try{Ua=e;var c=t.apply(n,r);return Ba=s,ja=u,Ua=a,c}catch(l){if(Ge(l)||!Ba)throw l;throw i=l,o=es(),i instanceof Error||(i=new Error(i.toString())),On(i,o),i}}function es(){return Ba?new Za(Ba,ja):null}var ts=function(){function e(t){_classCallCheck(this,e),this.delegate=t}return _createClass(e,[{key:"createRenderer",value:function(e,t){return new ns(this.delegate.createRenderer(e,t))}},{key:"begin",value:function(){this.delegate.begin&&this.delegate.begin()}},{key:"end",value:function(){this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}]),e}(),ns=function(){function e(t){_classCallCheck(this,e),this.delegate=t,this.debugContextFactory=es,this.data=this.delegate.data}return _createClass(e,[{key:"createDebugContext",value:function(e){return this.debugContextFactory(e)}},{key:"destroyNode",value:function(e){var t=Ao(e);!function(e){Io.delete(e.nativeNode)}(t),t instanceof Eo&&(t.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(e)}},{key:"destroy",value:function(){this.delegate.destroy()}},{key:"createElement",value:function(e,t){var n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){var i=new To(n,null,r);i.name=e,No(i)}return n}},{key:"createComment",value:function(e){var t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&No(new Eo(t,null,n)),t}},{key:"createText",value:function(e){var t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&No(new Eo(t,null,n)),t}},{key:"appendChild",value:function(e,t){var n=Ao(e),r=Ao(t);n&&r&&n instanceof To&&n.addChild(r),this.delegate.appendChild(e,t)}},{key:"insertBefore",value:function(e,t,n){var r=Ao(e),i=Ao(t),o=Ao(n);r&&i&&r instanceof To&&r.insertBefore(o,i),this.delegate.insertBefore(e,t,n)}},{key:"removeChild",value:function(e,t){var n=Ao(e),r=Ao(t);n&&r&&n instanceof To&&n.removeChild(r),this.delegate.removeChild(e,t)}},{key:"selectRootElement",value:function(e,t){var n=this.delegate.selectRootElement(e,t),r=es();return r&&No(new To(n,null,r)),n}},{key:"setAttribute",value:function(e,t,n,r){var i=Ao(e);i&&i instanceof To&&(i.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){var r=Ao(e);r&&r instanceof To&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){var n=Ao(e);n&&n instanceof To&&(n.classes[t]=!0),this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){var n=Ao(e);n&&n instanceof To&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){var i=Ao(e);i&&i instanceof To&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){var r=Ao(e);r&&r instanceof To&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){var r=Ao(e);r&&r instanceof To&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,t,n){if("string"!=typeof e){var r=Ao(e);r&&r.listeners.push(new So(t,n))}return this.delegate.listen(e,t,n)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setValue",value:function(e,t){return this.delegate.setValue(e,t)}}]),e}();var rs=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e){!function(){if(!ba){ba=!0;var e=$e()?{setCurrentNode:za,createRootView:ka,createEmbeddedView:Sa,createComponentView:Ea,createNgModuleRef:Ta,overrideProvider:Da,overrideComponentView:Ra,clearOverrides:xa,checkAndUpdateView:La,checkNoChangesView:Fa,destroyView:Va,createDebugContext:function(e,t){return new Za(e,t)},handleEvent:Ha,updateDirectives:Ka,updateRenderer:Wa}:{setCurrentNode:function(){},createRootView:wa,createEmbeddedView:ta,createComponentView:ra,createNgModuleRef:Kr,overrideProvider:zn,overrideComponentView:zn,clearOverrides:zn,checkAndUpdateView:ua,checkNoChangesView:sa,destroyView:da,createDebugContext:function(e,t){return new Za(e,t)},handleEvent:function(e,t,n,r){return e.def.handleEvent(e,t,n,r)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?Pa:Ma,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?Pa:Ma,e)}};qn.setCurrentNode=e.setCurrentNode,qn.createRootView=e.createRootView,qn.createEmbeddedView=e.createEmbeddedView,qn.createComponentView=e.createComponentView,qn.createNgModuleRef=e.createNgModuleRef,qn.overrideProvider=e.overrideProvider,qn.overrideComponentView=e.overrideComponentView,qn.clearOverrides=e.clearOverrides,qn.checkAndUpdateView=e.checkAndUpdateView,qn.checkNoChangesView=e.checkNoChangesView,qn.destroyView=e.destroyView,qn.resolveDep=fi,qn.createDebugContext=e.createDebugContext,qn.handleEvent=e.handleEvent,qn.updateDirectives=e.updateDirectives,qn.updateRenderer=e.updateRenderer,qn.dirtyParentQueries=zo}}();var t=function(e){var t=Array.from(e.providers),n=Array.from(e.modules),r={};for(var i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(hr(this._ngModuleDefFactory));return qn.createNgModuleRef(this.moduleType,e||Rt.NULL,this._bootstrapComponents,t)}}]),t}(qe);n("6Joi");var is=function e(){_classCallCheck(this,e)},os=function e(t){_classCallCheck(this,e),this.auth=t},as=function e(){_classCallCheck(this,e)},ss=new De("Location Initialized"),us=function e(){_classCallCheck(this,e)},cs=new De("appBaseHref"),ls=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._subject=new Ci,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=e.stripTrailingSlash(hs(i)),this._platformStrategy.onPopState((function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})}))}return _createClass(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+e.normalizeQueryParams(n))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,hs(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)}},{key:"replaceState",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),r)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}],[{key:"normalizeQueryParams",value:function(e){return e&&"?"!==e[0]?"?"+e:e}},{key:"joinWithSlash",value:function(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}},{key:"stripTrailingSlash",value:function(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}}]),e}();function hs(e){return e.replace(/\/index.html$/,"")}var fs=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return _inherits(t,e),_createClass(t,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=ls.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+ls.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+ls.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),t}(us),ds=function(e){function t(e,n){var r;if(_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,_possibleConstructorReturn(r)}return _inherits(t,e),_createClass(t,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return ls.joinWithSlash(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+ls.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+ls.normalizeQueryParams(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+ls.normalizeQueryParams(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),t}(us),ps=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),vs=new De("UseV4Plurals"),ms=function e(){_classCallCheck(this,e)},ys=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).locale=e,r.deprecatedPluralFn=n,r}return _inherits(t,e),_createClass(t,[{key:"getPluralCategory",value:function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){var t=e.toLowerCase().replace(/_/g,"-"),n=_i[t];if(n)return n;var r=t.split("-")[0];if(n=_i[r])return n;if("en"===r)return ki;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[bi.PluralCase]}(t||this.locale)(e)){case ps.Zero:return"zero";case ps.One:return"one";case ps.Two:return"two";case ps.Few:return"few";case ps.Many:return"many";default:return"other"}}}]),t}(ms),gs=function e(){_classCallCheck(this,e)},_s=function(){function e(t,n,r,i){_classCallCheck(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._initialClasses=[]}return _createClass(e,[{key:"getValue",value:function(){return null}},{key:"setClass",value:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"setNgClass",value:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Kt(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"applyChanges",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(we(e.item)));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}}]),e}(),bs=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"ngDoCheck",value:function(){this._delegate.applyChanges()}},{key:"klass",set:function(e){this._delegate.setClass(e)}},{key:"ngClass",set:function(e){this._delegate.setNgClass(e)}}]),t}(function(){var e=function(){function e(t){_classCallCheck(this,e),this._delegate=t}return _createClass(e,[{key:"getValue",value:function(){return this._delegate.getValue()}}]),e}();return e.ngDirectiveDef=void 0,e}()),ws=function(){function e(t,n){_classCallCheck(this,e),this._viewContainer=t,this._context=new ks,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(e,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){Cs("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){Cs("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}}]),e}(),ks=function e(){_classCallCheck(this,e),this.$implicit=null,this.ngIf=null};function Cs(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(we(t),"'."))}var Ss=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createSubscription",value:function(e,t){return e.subscribe({next:t,error:function(e){throw e}})}},{key:"dispose",value:function(e){e.unsubscribe()}},{key:"onDestroy",value:function(e){e.unsubscribe()}}]),e}(),Es=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createSubscription",value:function(e,t){return e.then(t,(function(e){throw e}))}},{key:"dispose",value:function(e){}},{key:"onDestroy",value:function(e){}}]),e}()),Ts=new Ss,Is=function(){function e(t){_classCallCheck(this,e),this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):qt(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,Ht.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}},{key:"_subscribe",value:function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,(function(n){return t._updateLatestValue(e,n)}))}},{key:"_selectStrategy",value:function(t){if(Gt(t))return Es;if(Qt(t))return Ts;throw Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat(we(e),"'"))}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}]),e}(),As=function e(){_classCallCheck(this,e)},Ns=new De("DocumentToken");function Ds(e){return"browser"===e}function Rs(e){return"server"===e}var xs,Os=((xs=function e(){_classCallCheck(this,e)}).ngInjectableDef=ge({token:xs,providedIn:"root",factory:function(){return new Ps(Fe(Ns),window,Fe(Xe))}}),xs),Ps=function(){function e(t,n,r){_classCallCheck(this,e),this.document=t,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#".concat(e));if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='".concat(e,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),e}(),Ms=new C((function(e){return e.complete()}));function Ls(e){return e?function(e){return new C((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Ms}function Fs(e){var t=new C((function(t){t.next(e),t.complete()}));return t._isScalar=!0,t.value=e,t}function Vs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];switch(x(r)?t.pop():r=void 0,t.length){case 0:return Ls(r);case 1:return r?G(t,r):Fs(t[0]);default:return G(t,r)}}var Us=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._value=e,n}return _inherits(t,e),_createClass(t,[{key:"_subscribe",value:function(e){var n=_get(_getPrototypeOf(t.prototype),"_subscribe",this).call(this,e);return n&&!n.closed&&e.next(this._value),n}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new I;return this._value}},{key:"next",value:function(e){_get(_getPrototypeOf(t.prototype),"next",this).call(this,this._value=e)}},{key:"value",get:function(){return this.getValue()}}]),t}(D);function Bs(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}Bs.prototype=Object.create(Error.prototype);var js=Bs,qs={},zs=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Hs(e,this.resultSelector))}}]),e}(),Hs=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.values.push(qs),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(q(this,r,r,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,r,i){var o=this.values,a=this.toRespond?o[n]===qs?--this.toRespond:this.toRespond:0;o[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),t}(z);function Ks(e){return new C((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?Q(n):Ls()).subscribe(t)}))}function Ws(){return $(1)}function Gs(e,t){return function(n){return n.lift(new Qs(e,t))}}var Qs=function(){function e(t,n){_classCallCheck(this,e),this.predicate=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Ys(e,this.predicate,this.thisArg))}}]),e}(),Ys=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).predicate=n,i.thisArg=r,i.count=0,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),t}(m);function Xs(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Xs.prototype=Object.create(Error.prototype);var Zs=Xs;function Js(e){return function(t){return 0===e?Ls():t.lift(new $s(e))}}var $s=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new Zs}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new eu(e,this.total))}}]),e}(),eu=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=n,r.ring=new Array,r.count=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()}}]),t}(m);function tu(e,t,n){return function(r){return r.lift(new nu(e,t,n))}}var nu=function(){function e(t,n,r){_classCallCheck(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new ru(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),ru=function(e){function t(e,n,i,o){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._tapNext=_,a._tapError=_,a._tapComplete=_,a._tapError=i||_,a._tapComplete=o||_,r(n)?(a._context=_assertThisInitialized(a),a._tapNext=n):n&&(a._context=n,a._tapNext=n.next||_,a._tapError=n.error||_,a._tapComplete=n.complete||_),a}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),t}(m),iu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ou;return tu({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw e()}})};function ou(){return new js}function au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new su(e))}}var su=function(){function e(t){_classCallCheck(this,e),this.defaultValue=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new uu(e,this.defaultValue))}}]),e}(),uu=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).defaultValue=n,r.isEmpty=!0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),t}(m);function cu(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Gs((function(t,n){return e(t,n,r)})):J,Js(1),n?au(t):iu((function(){return new js})))}}function lu(e){return function(t){var n=new hu(e),r=t.lift(n);return n.caught=r}}var hu=function(){function e(t){_classCallCheck(this,e),this.selector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new fu(e,this.selector,this.caught))}}]),e}(),fu=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).selector=n,i.caught=r,i}return _inherits(t,e),_createClass(t,[{key:"error",value:function(e){if(!this.isStopped){var n;try{n=this.selector(e,this.caught)}catch(i){return void _get(_getPrototypeOf(t.prototype),"error",this).call(this,i)}this._unsubscribeAndRecycle();var r=new O(this,void 0,void 0);this.add(r),q(this,n,void 0,void 0,r)}}}]),t}(z);function du(e){return function(t){return 0===e?Ls():t.lift(new pu(e))}}var pu=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new Zs}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new vu(e,this.total))}}]),e}(),vu=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=n,r.count=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),t}(m);function mu(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Gs((function(t,n){return e(t,n,r)})):J,du(1),n?au(t):iu((function(){return new js})))}}var yu=function(){function e(t,n,r){_classCallCheck(this,e),this.predicate=t,this.thisArg=n,this.source=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new gu(e,this.predicate,this.thisArg,this.source))}}]),e}(),gu=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||_assertThisInitialized(o),o}return _inherits(t,e),_createClass(t,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),t}(m);function _u(e,t){return"function"==typeof t?function(n){return n.pipe(_u((function(n,r){return Q(e(n,r)).pipe(H((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new bu(e))}}var bu=function(){function e(t){_classCallCheck(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new wu(e,this.project))}}]),e}(),wu=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,r.index=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new O(this,void 0,void 0);this.destination.add(i),this.innerSubscription=q(this,e,t,n,i)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||_get(_getPrototypeOf(t.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(t.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}}]),t}(z);function ku(){return Ws()(Vs.apply(void 0,arguments))}function Cu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=t[t.length-1];x(n)?t.pop():n=null;var r=t.length;return ku(1!==r||n?r>0?G(t,n):Ls(n):Fs(t[0]),e)}}function Su(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Eu(e,t,n))}}var Eu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Tu(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),Tu=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}},{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}}]),t}(m);function Iu(e,t){return Y(e,t,1)}function Au(e){return function(t){return t.lift(new Nu(e))}}var Nu=function(){function e(t){_classCallCheck(this,e),this.callback=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Du(e,this.callback))}}]),e}(),Du=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).add(new d(n)),r}return _inherits(t,e),t}(m),Ru=null;function xu(){return Ru}var Ou,Pu={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Mu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fu=function(){if(Ne.Node)return Ne.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}}(),Vu=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"parse",value:function(e){throw new Error("parse not implemented")}},{key:"hasProperty",value:function(e,t){return t in e}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"getProperty",value:function(e,t){return e[t]}},{key:"invoke",value:function(e,t,n){e[t].apply(e,_toConsumableArray(n))}},{key:"logError",value:function(e){window.console&&(console.error?console.error(e):console.log(e))}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"contains",value:function(e,t){return Fu.call(e,t)}},{key:"querySelector",value:function(e,t){return e.querySelector(t)}},{key:"querySelectorAll",value:function(e,t){return e.querySelectorAll(t)}},{key:"on",value:function(e,t,n){e.addEventListener(t,n,!1)}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"createMouseEvent",value:function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}},{key:"createEvent",value:function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}},{key:"preventDefault",value:function(e){e.preventDefault(),e.returnValue=!1}},{key:"isPrevented",value:function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}},{key:"getInnerHTML",value:function(e){return e.innerHTML}},{key:"getTemplateContent",value:function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}},{key:"getOuterHTML",value:function(e){return e.outerHTML}},{key:"nodeName",value:function(e){return e.nodeName}},{key:"nodeValue",value:function(e){return e.nodeValue}},{key:"type",value:function(e){return e.type}},{key:"content",value:function(e){return this.hasProperty(e,"content")?e.content:e}},{key:"firstChild",value:function(e){return e.firstChild}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"parentElement",value:function(e){return e.parentNode}},{key:"childNodes",value:function(e){return e.childNodes}},{key:"childNodesAsList",value:function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n}},{key:"clearNodes",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"removeChild",value:function(e,t){e.removeChild(t)}},{key:"replaceChild",value:function(e,t,n){e.replaceChild(t,n)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"insertBefore",value:function(e,t,n){e.insertBefore(n,t)}},{key:"insertAllBefore",value:function(e,t,n){n.forEach((function(n){return e.insertBefore(n,t)}))}},{key:"insertAfter",value:function(e,t,n){e.insertBefore(n,t.nextSibling)}},{key:"setInnerHTML",value:function(e,t){e.innerHTML=t}},{key:"getText",value:function(e){return e.textContent}},{key:"setText",value:function(e,t){e.textContent=t}},{key:"getValue",value:function(e){return e.value}},{key:"setValue",value:function(e,t){e.value=t}},{key:"getChecked",value:function(e){return e.checked}},{key:"setChecked",value:function(e,t){e.checked=t}},{key:"createComment",value:function(e){return this.getDefaultDocument().createComment(e)}},{key:"createTemplate",value:function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createElementNS",value:function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}},{key:"createTextNode",value:function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}},{key:"createScriptTag",value:function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r}},{key:"createStyleElement",value:function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}},{key:"createShadowRoot",value:function(e){return e.createShadowRoot()}},{key:"getShadowRoot",value:function(e){return e.shadowRoot}},{key:"getHost",value:function(e){return e.host}},{key:"clone",value:function(e){return e.cloneNode(!0)}},{key:"getElementsByClassName",value:function(e,t){return e.getElementsByClassName(t)}},{key:"getElementsByTagName",value:function(e,t){return e.getElementsByTagName(t)}},{key:"classList",value:function(e){return Array.prototype.slice.call(e.classList,0)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"hasClass",value:function(e,t){return e.classList.contains(t)}},{key:"setStyle",value:function(e,t,n){e.style[t]=n}},{key:"removeStyle",value:function(e,t){e.style[t]=""}},{key:"getStyle",value:function(e,t){return e.style[t]}},{key:"hasStyle",value:function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:r.length>0}},{key:"tagName",value:function(e){return e.tagName}},{key:"attributeMap",value:function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t}},{key:"hasAttribute",value:function(e,t){return e.hasAttribute(t)}},{key:"hasAttributeNS",value:function(e,t,n){return e.hasAttributeNS(t,n)}},{key:"getAttribute",value:function(e,t){return e.getAttribute(t)}},{key:"getAttributeNS",value:function(e,t,n){return e.getAttributeNS(t,n)}},{key:"setAttribute",value:function(e,t,n){e.setAttribute(t,n)}},{key:"setAttributeNS",value:function(e,t,n,r){e.setAttributeNS(t,n,r)}},{key:"removeAttribute",value:function(e,t){e.removeAttribute(t)}},{key:"removeAttributeNS",value:function(e,t,n){e.removeAttributeNS(t,n)}},{key:"templateAwareRoot",value:function(e){return this.isTemplateElement(e)?this.content(e):e}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"getBoundingClientRect",value:function(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}},{key:"getTitle",value:function(e){return e.title}},{key:"setTitle",value:function(e,t){e.title=t||""}},{key:"elementMatches",value:function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}},{key:"isTemplateElement",value:function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}},{key:"isTextNode",value:function(e){return e.nodeType===Node.TEXT_NODE}},{key:"isCommentNode",value:function(e){return e.nodeType===Node.COMMENT_NODE}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"hasShadowRoot",value:function(e){return null!=e.shadowRoot&&e instanceof HTMLElement}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"importIntoDoc",value:function(e){return document.importNode(this.templateAwareRoot(e),!0)}},{key:"adoptNode",value:function(e){return document.adoptNode(e)}},{key:"getHref",value:function(e){return e.getAttribute("href")}},{key:"getEventKey",value:function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Lu.hasOwnProperty(t)&&(t=Lu[t]))}return Mu[t]||t}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=Uu||(Uu=document.querySelector("base"))?Uu.getAttribute("href"):null;return null==n?null:(t=n,Ou||(Ou=document.createElement("a")),Ou.setAttribute("href",t),"/"===Ou.pathname.charAt(0)?Ou.pathname:"/"+Ou.pathname)}},{key:"resetBaseElement",value:function(){Uu=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"setData",value:function(e,t,n){this.setAttribute(e,"data-"+t,n)}},{key:"getData",value:function(e,t){return this.getAttribute(e,"data-"+t)}},{key:"getComputedStyle",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return getComputedStyle(e)}))},{key:"supportsWebAnimation",value:function(){return"function"==typeof Element.prototype.animate}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return function(e,t){t=encodeURIComponent(t);var n=!0,r=!1,i=void 0;try{for(var o,a=e.split(";")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.indexOf("="),c=_slicedToArray(-1==u?[s,""]:[s.slice(0,u),s.slice(u+1)],2),l=c[0],h=c[1];if(l.trim()===t)return decodeURIComponent(h)}}catch(f){r=!0,i=f}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}(document.cookie,e)}},{key:"setCookie",value:function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}},{key:"attrToPropMap",get:function(){return Pu}}],[{key:"makeCurrent",value:function(){var e;e=new t,Ru||(Ru=e)}}]),t}(function(e){function t(){var e;_classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach((function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])}))}catch(a){e._animationPrefix=null,e._transitionEnd=null}return e}return _inherits(t,e),_createClass(t,[{key:"getDistributedNodes",value:function(e){return e.getDistributedNodes()}},{key:"resolveAndSetHref",value:function(e,t,n){e.href=null==n?t:t+"/../"+n}},{key:"supportsDOMEvents",value:function(){return!0}},{key:"supportsNativeShadowDOM",value:function(){return"function"==typeof document.body.createShadowRoot}},{key:"getAnimationPrefix",value:function(){return this._animationPrefix?this._animationPrefix:""}},{key:"getTransitionEnd",value:function(){return this._transitionEnd?this._transitionEnd:""}},{key:"supportsAnimation",value:function(){return null!=this._animationPrefix&&null!=this._transitionEnd}}]),t}(function(){function e(){_classCallCheck(this,e),this.resourceLoaderType=null}return _createClass(e,[{key:"attrToPropMap",get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e}}]),e}())),Uu=null;function Bu(){return!!window.history.pushState}var ju=new De("TRANSITION_ID"),qu=[{provide:Ti,useFactory:function(e,t,n){return function(){n.get(Ii).donePromise.then((function(){var n=xu();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter((function(t){return n.getAttribute(t,"ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[ju,Ns,Rt],multi:!0}],zu=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){Ne.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Ne.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Ne.getAllAngularRootElements=function(){return e.getAllRootElements()},Ne.frameworkStabilizers||(Ne.frameworkStabilizers=[]),Ne.frameworkStabilizers.push((function(e){var t=Ne.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?xu().isShadowRoot(t)?this.findTestabilityInTree(e,xu().getHost(t),!0):this.findTestabilityInTree(e,xu().parentElement(t),!0):null}}],[{key:"init",value:function(){var t;t=new e,uo=t}}]),e}();function Hu(e,t){"undefined"!=typeof COMPILED&&COMPILED||((Ne.ng=Ne.ng||{})[e]=t)}var Ku={ApplicationRef:yo,NgZone:Ji};function Wu(e){return Ao(e)}var Gu=new De("EventManagerPlugins"),Qu=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}(),Yu=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=xu().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),Xu=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}(),Zu=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return _inherits(t,e),_createClass(t,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return xu().remove(e)}))}}]),t}(Xu),Ju={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},$u=/%COMP%/g;function ec(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?ec(e,i,n):(i=i.replace($u,e),n.push(i))}return n}function tc(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var nc=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new rc(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Ke.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new ac(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case Ke.Native:case Ke.ShadowDom:return new sc(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=ec(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}(),rc=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(Ju[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=Ju[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=Ju[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&un.DashCase?e.style.setProperty(t,n,r&un.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&un.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){oc(t,"property"),e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return oc(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,tc(n)):this.eventManager.addEventListener(e,t,tc(n))}}]),e}(),ic="@".charCodeAt(0);function oc(e,t){if(e.charCodeAt(0)===ic)throw new Error("Found the synthetic ".concat(t," ").concat(e,'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.'))}var ac=function(e){function t(e,n,r,i){var o;_classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).component=r;var a,s=ec(i+"-"+r.id,r.styles,[]);return n.addStyles(s),o.contentAttr="_ngcontent-%COMP%".replace($u,i+"-"+r.id),o.hostAttr=(a=i+"-"+r.id,"_nghost-%COMP%".replace($u,a)),o}return _inherits(t,e),_createClass(t,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(t.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,n){var r=_get(_getPrototypeOf(t.prototype),"createElement",this).call(this,e,n);return _get(_getPrototypeOf(t.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),t}(rc),sc=function(e){function t(e,n,r,i){var o;_classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=i.encapsulation===Ke.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=ec(i.id,i.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],o.shadowRoot.appendChild(u)}return o}return _inherits(t,e),_createClass(t,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,n){return _get(_getPrototypeOf(t.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),n)}},{key:"insertBefore",value:function(e,n,r){return _get(_getPrototypeOf(t.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),n,r)}},{key:"removeChild",value:function(e,n){return _get(_getPrototypeOf(t.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),n)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(t.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),t}(rc),uc="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},cc=uc("addEventListener"),lc=uc("removeEventListener"),hc={},fc="__zone_symbol__propagationStopped",dc=function(){var e="undefined"!=typeof Zone&&Zone[uc("BLACK_LISTED_EVENTS")];if(e){var t={};return e.forEach((function(e){t[e]=e})),t}}(),pc=function(e){return!!dc&&dc.hasOwnProperty(e)},vc=function(e){var t=hc[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length){var i=n[0];return i.zone!==Zone.current?i.zone.run(i.handler,this,r):i.handler.apply(this,r)}for(var o=n.slice(),a=0;a<o.length&&!0!==e[fc];a++){var s=o[a];s.zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r)}}}},mc=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).ngZone=n,r&&Rs(r)||i.patchEvent(),i}return _inherits(t,e),_createClass(t,[{key:"patchEvent",value:function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[fc]=!0),e&&e.apply(this,arguments)}}}},{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this,i=n;if(!e[cc]||Ji.isInAngularZone()&&!pc(t))e.addEventListener(t,i,!1);else{var o=hc[t];o||(o=hc[t]=uc("ANGULAR"+t+"FALSE"));var a=e[o],s=a&&a.length>0;a||(a=e[o]=[]);var u=pc(t)?Zone.root:Zone.current;if(0===a.length)a.push({zone:u,handler:i});else{for(var c=!1,l=0;l<a.length;l++)if(a[l].handler===i){c=!0;break}c||a.push({zone:u,handler:i})}s||e[cc](t,vc,!1)}return function(){return r.removeEventListener(e,t,i)}}},{key:"removeEventListener",value:function(e,t,n){var r=e[lc];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);var i=hc[t],o=i&&e[i];if(!o)return e.removeEventListener.apply(e,[t,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(e,[t,vc,!1]):e.removeEventListener.apply(e,[t,n,!1])}}]),t}(Yu),yc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},gc=new De("HammerGestureConfig"),_c=new De("HammerLoader"),bc=function(){function e(){_classCallCheck(this,e),this.events=[],this.overrides={}}return _createClass(e,[{key:"buildHammer",value:function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t}}]),e}(),wc=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._config=n,o.console=r,o.loader=i,o}return _inherits(t,e),_createClass(t,[{key:"supports",value:function(e){return!(!yc.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'.concat(e,'" event cannot be bound because Hammer.JS is not ')+"loaded and no custom loader has been specified."),1))}},{key:"addEventListener",value:function(e,t,n){var r=this,i=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then((function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(e,t,n))})).catch((function(){r.console.warn('The "'.concat(t,'" event cannot be bound because the custom ')+"Hammer.JS loader failed."),a=function(){}})),function(){a()}}return i.runOutsideAngular((function(){var o=r._config.buildHammer(e),a=function(e){i.runGuarded((function(){n(e)}))};return o.on(t,a),function(){o.off(t,a),"function"==typeof o.destroy&&o.destroy()}}))}},{key:"isCustomEvent",value:function(e){return this._config.events.indexOf(e)>-1}}]),t}(Yu),kc=["alt","control","meta","shift"],Cc={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Sc=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"supports",value:function(e){return null!=t.parseEventName(e)}},{key:"addEventListener",value:function(e,n,r){var i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return xu().onAndCancel(e,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(e){var n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=t._normalizeKey(n.pop()),o="";if(kc.forEach((function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")})),o+=i,0!=n.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(e){var t="",n=xu().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),kc.forEach((function(r){r!=n&&(0,Cc[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,n,r){return function(i){t.getEventFullKey(i)===e&&r.runGuarded((function(){return n(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),t}(Yu),Ec=function e(){_classCallCheck(this,e)},Tc=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,n}return _inherits(t,e),_createClass(t,[{key:"sanitize",value:function(e,t){if(null==t)return null;switch(e){case wt.NONE:return t;case wt.HTML:return t instanceof Ac?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=null;try{at=at||new et(e);var r=t?String(t):"";n=at.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=at.getInertBodyElement(r)}while(r!==o);var a=new mt,s=a.sanitizeChildren(bt(n)||n);return $e()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=bt(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(t)));case wt.STYLE:return t instanceof Nc?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(St);return t&&rt(t[1])===t[1]||e.match(Ct)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:($e()&&console.warn("WARNING: sanitizing unsafe style value ".concat(e," (see http://g.co/ng/security#xss).")),"unsafe")}(t));case wt.SCRIPT:if(t instanceof Dc)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case wt.URL:return t instanceof xc||t instanceof Rc?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),rt(String(t)));case wt.RESOURCE_URL:if(t instanceof xc)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(e," (see http://g.co/ng/security#xss)"))}}},{key:"checkNotSafeValue",value:function(e,t){if(e instanceof Ic)throw new Error("Required a safe ".concat(t,", got a ").concat(e.getTypeName()," ")+"(see http://g.co/ng/security#xss)")}},{key:"bypassSecurityTrustHtml",value:function(e){return new Ac(e)}},{key:"bypassSecurityTrustStyle",value:function(e){return new Nc(e)}},{key:"bypassSecurityTrustScript",value:function(e){return new Dc(e)}},{key:"bypassSecurityTrustUrl",value:function(e){return new Rc(e)}},{key:"bypassSecurityTrustResourceUrl",value:function(e){return new xc(e)}}]),t}(Ec),Ic=function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),e}(),Ac=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"HTML"}}]),t}(Ic),Nc=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"Style"}}]),t}(Ic),Dc=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"Script"}}]),t}(Ic),Rc=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"URL"}}]),t}(Ic),xc=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),t}(Ic),Oc=ho(Do,"browser",[{provide:xi,useValue:"browser"},{provide:Ri,useValue:function(){Vu.makeCurrent(),zu.init()},multi:!0},{provide:as,useClass:function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,n._init(),n}return _inherits(t,e),_createClass(t,[{key:"_init",value:function(){this.location=xu().getLocation(),this._history=xu().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return xu().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){xu().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){xu().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"pushState",value:function(e,t,n){Bu()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){Bu()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),t}(as),deps:[Ns]},{provide:Ns,useFactory:function(){return document},deps:[]}]);function Pc(){return new Xe}var Mc=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:Ai,useValue:t.appId},{provide:ju,useExisting:Ai},qu]}}}]),e}();"undefined"!=typeof window&&window;var Lc=function e(t,n){_classCallCheck(this,e),this.id=t,this.url=n},Fc=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).navigationTrigger=i,r.restoredState=o,r}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(Lc),Vc=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),t}(Lc),Uc=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).reason=r,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(Lc),Bc=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).error=r,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),t}(Lc),jc=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Lc),qc=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Lc),zc=function(e){function t(e,n,r,i,o){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,a.state=i,a.shouldActivate=o,a}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),t}(Lc),Hc=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Lc),Kc=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Lc),Wc=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),Gc=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Qc=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Yc=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Xc=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Zc=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Jc=function(){function e(t,n,r){_classCallCheck(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return _createClass(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),$c=function e(){_classCallCheck(this,e)},el=function(){function e(t){_classCallCheck(this,e),this.params=t||{}}return _createClass(e,[{key:"has",value:function(e){return this.params.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function tl(e){return new el(e)}function nl(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function rl(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}var il=function e(t,n){_classCallCheck(this,e),this.routes=t,this.module=n};function ol(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];al(r,sl(t,r))}}function al(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&ol(e.children,t)}function sl(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function ul(e){var t=e.children&&e.children.map(ul),n=t?Object.assign({},e,{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=$c),n}function cl(e,t){var n,r=Object.keys(e),i=Object.keys(t);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(e[n=r[o]]!==t[n])return!1;return!0}function ll(e){return Array.prototype.concat.apply([],e)}function hl(e){return e.length>0?e[e.length-1]:null}function fl(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function dl(e){return Qt(e)?e:Gt(e)?Q(Promise.resolve(e)):Vs(e)}function pl(e,t,n){return n?function(e,t){return cl(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!gl(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return t[n]===e[n]}))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!gl(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!gl(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!e(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!gl(n.segments,a)&&!!n.children.primary&&t(n.children.primary,r,s)}(t,n,n.segments)}(e.root,t.root)}var vl=function(){function e(t,n,r){_classCallCheck(this,e),this.root=t,this.queryParams=n,this.fragment=r}return _createClass(e,[{key:"toString",value:function(){return kl.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=tl(this.queryParams)),this._queryParamMap}}]),e}(),ml=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.segments=t,this.children=n,this.parent=null,fl(n,(function(e,t){return e.parent=r}))}return _createClass(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return Cl(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),e}(),yl=function(){function e(t,n){_classCallCheck(this,e),this.path=t,this.parameters=n}return _createClass(e,[{key:"toString",value:function(){return Nl(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=tl(this.parameters)),this._parameterMap}}]),e}();function gl(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path}))}function _l(e,t){var n=[];return fl(e.children,(function(e,r){"primary"===r&&(n=n.concat(t(e,r)))})),fl(e.children,(function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))})),n}var bl=function e(){_classCallCheck(this,e)},wl=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"parse",value:function(e){var t=new Pl(e);return new vl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r;return"".concat("/".concat(function e(t,n){if(!t.hasChildren())return Cl(t);if(n){var r=t.children.primary?e(t.children.primary,!1):"",i=[];return fl(t.children,(function(t,n){"primary"!==n&&i.push("".concat(n,":").concat(e(t,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var o=_l(t,(function(n,r){return"primary"===r?[e(t.children.primary,!1)]:["".concat(r,":").concat(e(n,!1))]}));return"".concat(Cl(t),"/(").concat(o.join("//"),")")}(e.root,!0)),(n=e.queryParams,r=Object.keys(n).map((function(e){var t=n[e];return Array.isArray(t)?t.map((function(t){return"".concat(El(e),"=").concat(El(t))})).join("&"):"".concat(El(e),"=").concat(El(t))})),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),kl=new wl;function Cl(e){return e.segments.map((function(e){return Nl(e)})).join("/")}function Sl(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function El(e){return Sl(e).replace(/%3B/gi,";")}function Tl(e){return Sl(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Il(e){return decodeURIComponent(e)}function Al(e){return Il(e.replace(/\+/g,"%20"))}function Nl(e){return"".concat(Tl(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(Tl(e),"=").concat(Tl(t[e]))})).join("")));var t}var Dl=/^[^\/()?;=#]+/;function Rl(e){var t=e.match(Dl);return t?t[0]:""}var xl=/^[^=?&#]+/,Ol=/^[^?&#]+/,Pl=function(){function e(t){_classCallCheck(this,e),this.url=t,this.remaining=t}return _createClass(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ml([],{}):new ml([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new ml(e,t)),n}},{key:"parseSegment",value:function(){var e=Rl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new yl(Il(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Rl(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=Rl(this.remaining);r&&(n=r,this.capture(n))}e[Il(t)]=Il(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(xl);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Ol);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Al(t),o=Al(n);if(e.hasOwnProperty(i)){var a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Rl(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");var o=this.parseChildren();t[i]=1===Object.keys(o).length?o.primary:new ml([],o),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Ml=function(){function e(t){_classCallCheck(this,e),this._root=t}return _createClass(e,[{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Ll(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=Ll(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Fl(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return Fl(e,this._root).map((function(e){return e.value}))}},{key:"root",get:function(){return this._root.value}}]),e}();function Ll(e,t){if(e===t.value)return t;var n=!0,r=!1,i=void 0;try{for(var o,a=t.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=Ll(e,o.value);if(s)return s}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}function Fl(e,t){if(e===t.value)return[t];var n=!0,r=!1,i=void 0;try{for(var o,a=t.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=Fl(e,o.value);if(s.length)return s.unshift(t),s}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return[]}var Vl=function(){function e(t,n){_classCallCheck(this,e),this.value=t,this.children=n}return _createClass(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function Ul(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var Bl=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).snapshot=n,Wl(_assertThisInitialized(r),e),r}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return this.snapshot.toString()}}]),t}(Ml);function jl(e,t){var n=function(e,t){var n=new Hl([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Kl("",new Vl(n,[]))}(e,t),r=new Us([new yl("",{})]),i=new Us({}),o=new Us({}),a=new Us({}),s=new Us(""),u=new ql(r,i,a,s,o,"primary",t,n.root);return u.snapshot=n.root,new Bl(new Vl(u,[]),n)}var ql=function(){function e(t,n,r,i,o,a,s,u){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return _createClass(e,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(H((function(e){return tl(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(H((function(e){return tl(e)})))),this._queryParamMap}}]),e}();function zl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign({},e.params,t.params),data:Object.assign({},e.data,t.data),resolve:Object.assign({},e.resolve,t._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var Hl=function(){function e(t,n,r,i,o,a,s,u,c,l,h){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return _createClass(e,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=tl(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=tl(this.queryParams)),this._queryParamMap}}]),e}(),Kl=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).url=e,Wl(_assertThisInitialized(r),n),r}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return Gl(this._root)}}]),t}(Ml);function Wl(e,t){t.value._routerState=e,t.children.forEach((function(t){return Wl(e,t)}))}function Gl(e){var t=e.children.length>0?" { ".concat(e.children.map(Gl).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Ql(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,cl(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),cl(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!cl(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),cl(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Yl(e,t){var n,r;return cl(e.params,t.params)&&gl(n=e.url,r=t.url)&&n.every((function(e,t){return cl(e.parameters,r[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||Yl(e.parent,t.parent))}function Xl(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Zl(e,t,n,r,i){var o={};return r&&fl(r,(function(e,t){o[t]=Array.isArray(e)?e.map((function(e){return"".concat(e)})):"".concat(e)})),new vl(n.root===e?t:function e(t,n,r){var i={};return fl(t.children,(function(t,o){i[o]=t===n?r:e(t,n,r)})),new ml(t.segments,i)}(n.root,e,t),o,i)}var Jl=function(){function e(t,n,r){if(_classCallCheck(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Xl(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(i&&i!==hl(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),$l=function e(t,n,r){_classCallCheck(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function eh(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:"".concat(e)}function th(e,t,n){if(e||(e=new ml([],{})),0===e.segments.length&&e.hasChildren())return nh(e,t,n);var r=function(e,t,n){for(var r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return o;var a=e.segments[i],s=eh(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!ah(s,u,a))return o;r+=2}else{if(!ah(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var o=new ml(e.segments.slice(0,r.pathIndex),{});return o.children.primary=new ml(e.segments.slice(r.pathIndex),e.children),nh(o,0,i)}return r.match&&0===i.length?new ml(e.segments,{}):r.match&&!e.hasChildren()?rh(e,t,n):r.match?nh(e,0,i):rh(e,t,n)}function nh(e,t,n){if(0===n.length)return new ml(e.segments,{});var r=function(e){return"object"!=typeof e[0]?{primary:e}:void 0===e[0].outlets?{primary:e}:e[0].outlets}(n),i={};return fl(r,(function(n,r){null!==n&&(i[r]=th(e.children[r],t,n))})),fl(e.children,(function(e,t){void 0===r[t]&&(i[t]=e)})),new ml(e.segments,i)}function rh(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=ih(n[i].outlets);return new ml(r,o)}if(0===i&&Xl(n[0]))r.push(new yl(e.segments[t].path,n[0])),i++;else{var a=eh(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&Xl(s)?(r.push(new yl(a,oh(s))),i+=2):(r.push(new yl(a,{})),i++)}}return new ml(r,{})}function ih(e){var t={};return fl(e,(function(e,n){null!==e&&(t[n]=rh(new ml([],{}),0,e))})),t}function oh(e){var t={};return fl(e,(function(e,n){return t[n]="".concat(e)})),t}function ah(e,t,n){return e==n.path&&cl(t,n.parameters)}var sh=function(){function e(t,n,r,i){_classCallCheck(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return _createClass(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Ql(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=Ul(t);e.children.forEach((function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]})),fl(i,(function(e,t){r.deactivateRouteAndItsChildren(e,n)}))}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var n=this,r=t.getContext(e.value.outlet);if(r){var i=Ul(e),o=e.value.component?r.children:t;fl(i,(function(e,t){return n.deactivateRouteAndItsChildren(e,o)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=Ul(t);e.children.forEach((function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new Zc(e.value.snapshot))})),e.children.length&&this.forwardEvent(new Yc(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Ql(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),uh(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function uh(e){Ql(e.value),e.children.forEach(uh)}function ch(e){return"function"==typeof e}function lh(e){return e instanceof vl}var hh=function e(t){_classCallCheck(this,e),this.segmentGroup=t||null},fh=function e(t){_classCallCheck(this,e),this.urlTree=t};function dh(e){return new C((function(t){return t.error(new hh(e))}))}function ph(e){return new C((function(t){return t.error(new fh(e))}))}function vh(e){return new C((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var mh=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(je)}return _createClass(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(H((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(lu((function(t){if(t instanceof fh)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof hh)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(H((function(n){return t.createUrlTree(n,e.queryParams,e.fragment)}))).pipe(lu((function(e){if(e instanceof hh)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new ml([],{primary:e}):e;return new vl(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(H((function(e){return new ml([],e)}))):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Vs({});var o=[],a=[],s={};return fl(n,(function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(e,t,c,u)).pipe(H((function(e){return s[i]=e})));"primary"===i?o.push(l):a.push(l)})),Vs.apply(null,o.concat(a)).pipe(Ws(),cu(),H((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(e,t,n,r,i,o){var a=this;return Vs.apply(void 0,_toConsumableArray(n)).pipe(H((function(s){return a.expandSegmentAgainstRoute(e,t,n,s,r,i,o).pipe(lu((function(e){if(e instanceof hh)return Vs(null);throw e})))})),Ws(),mu((function(e){return!!e})),lu((function(e,n){if(e instanceof js||"EmptyError"===e.name){if(a.noLeftoversInUrl(t,r,i))return Vs(new ml([],{}));throw new hh(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,o,a){return bh(r)!==o?dh(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):dh(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ph(o):this.lineralizeSegments(n,o).pipe(Y((function(n){var o=new ml(n,{});return i.expandSegment(e,o,t,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,o){var a=this,s=yh(t,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return dh(t);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?ph(f):this.lineralizeSegments(r,f).pipe(Y((function(r){return a.expandSegment(e,t,n,r.concat(i.slice(l)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(H((function(e){return n._loadedConfig=e,new ml(r,{})}))):Vs(new ml(r,{}));var o=yh(t,n,r),a=o.matched,s=o.consumedSegments,u=o.lastChild;if(!a)return dh(t);var c=r.slice(u);return this.getChildConfig(e,n,r).pipe(Y((function(e){var n=e.module,r=e.routes,o=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some((function(n){return _h(e,t,n)&&"primary"!==bh(n)}))}(e,n,r)?{segmentGroup:gh(new ml(t,function(e,t){var n={};n.primary=t;var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;""===u.path&&"primary"!==bh(u)&&(n[bh(u)]=new ml([],{}))}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(r,new ml(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some((function(n){return _h(e,t,n)}))}(e,n,r)?{segmentGroup:gh(new ml(e.segments,function(e,t,n,r){var i={},o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;_h(e,t,l)&&!r[bh(l)]&&(i[bh(l)]=new ml([],{}))}}catch(h){a=!0,s=h}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return Object.assign({},r,i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,s,c,r),a=o.segmentGroup,u=o.slicedSegments;return 0===u.length&&a.hasChildren()?i.expandChildren(n,r,a).pipe(H((function(e){return new ml(s,e)}))):0===r.length&&0===u.length?Vs(new ml(s,{})):i.expandSegment(n,a,r,u,"primary",!0).pipe(H((function(e){return new ml(s.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?Vs(new il(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Vs(t._loadedConfig):function(e,t,n){var r,i=t.canLoad;return i&&0!==i.length?Q(i).pipe(H((function(r){var i,o=e.get(r);if(function(e){return e&&ch(e.canLoad)}(o))i=o.canLoad(t,n);else{if(!ch(o))throw new Error("Invalid CanLoad guard");i=o(t,n)}return dl(i)}))).pipe(Ws(),(r=function(e){return!0===e},function(e){return e.lift(new yu(r,void 0,e))})):Vs(!0)}(e.injector,t,n).pipe(Y((function(n){return n?r.configLoader.load(e.injector,t).pipe(H((function(e){return t._loadedConfig=e,e}))):function(e){return new C((function(t){return t.error(nl("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):Vs(new il([],e))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Vs(n);if(r.numberOfChildren>1||!r.children.primary)return vh(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new vl(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return fl(e,(function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e})),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,o=this.createSegments(e,t.segments,n,r),a={};return fl(t.children,(function(t,o){a[o]=i.createSegmentGroup(e,t,n,r)})),new ml(o,a)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map((function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)}))}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n=0,r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.path===e.path)return t.splice(n),u;n++}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return e}}]),e}();function yh(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(t.matcher||rl)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function gh(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new ml(e.segments.concat(t.segments),t.children)}return e}function _h(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function bh(e){return e.outlet||"primary"}var wh=function e(t){_classCallCheck(this,e),this.path=t,this.route=this.path[this.path.length-1]},kh=function e(t,n){_classCallCheck(this,e),this.component=t,this.route=n};function Ch(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Sh(e,t,n){var r=Ul(e),i=e.value;fl(r,(function(e,r){Sh(e,i.component?t?t.children.getContext(r):null:t,n)})),n.canDeactivateChecks.push(new kh(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var Eh=Symbol("INITIAL_VALUE");function Th(){return _u((function(e){return(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=null,i=null;return x(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),G(t,i).lift(new zs(r))}).apply(void 0,_toConsumableArray(e.map((function(e){return e.pipe(du(1),Cu(Eh))})))).pipe(Su((function(e,t){var n=!1;return t.reduce((function(e,r,i){if(e!==Eh)return e;if(r===Eh&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||lh(r))return r}return e}),e)}),Eh),Gs((function(e){return e!==Eh})),H((function(e){return lh(e)?e:!0===e})),du(1))}))}function Ih(e,t){return null!==e&&t&&t(new Xc(e)),Vs(!0)}function Ah(e,t){return null!==e&&t&&t(new Qc(e)),Vs(!0)}function Nh(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?Vs(r.map((function(r){return Ks((function(){var i,o=Ch(r,t,n);if(function(e){return e&&ch(e.canActivate)}(o))i=dl(o.canActivate(t,e));else{if(!ch(o))throw new Error("Invalid CanActivate guard");i=dl(o(t,e))}return i.pipe(mu())}))}))).pipe(Th()):Vs(!0)}function Dh(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return Ks((function(){return Vs(t.guards.map((function(i){var o,a=Ch(i,t.node,n);if(function(e){return e&&ch(e.canActivateChild)}(a))o=dl(a.canActivateChild(r,e));else{if(!ch(a))throw new Error("Invalid CanActivateChild guard");o=dl(a(r,e))}return o.pipe(mu())}))).pipe(Th())}))}));return Vs(i).pipe(Th())}var Rh=function e(){_classCallCheck(this,e)},xh=function(){function e(t,n,r,i,o,a){_classCallCheck(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return _createClass(e,[{key:"recognize",value:function(){try{var e=Mh(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new Hl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Vl(n,t),i=new Kl(this.url,r);return this.inheritParamsAndData(i._root),Vs(i)}catch(o){return new C((function(e){return e.error(o)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=zl(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){var n,r=this,i=_l(t,(function(t,n){return r.processSegmentGroup(e,t,n)}));return n={},i.forEach((function(e){var t=n[e.value.outlet];if(t){var r=t.url.map((function(e){return e.toString()})).join("/"),i=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[e.value.outlet]=e.value})),i.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)})),i}},{key:"processSegment",value:function(e,t,n,r){var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;try{return this.processSegmentAgainstRoute(c,t,n,r)}catch(l){if(!(l instanceof Rh))throw l}}}catch(h){o=!0,a=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}if(this.noLeftoversInUrl(t,n,r))return[];throw new Rh}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo)throw new Rh;if((e.outlet||"primary")!==r)throw new Rh;var i,o=[],a=[];if("**"===e.path){var s=n.length>0?hl(n).parameters:{};i=new Hl(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vh(e),r,e.component,e,Oh(t),Ph(t)+n.length,Uh(e))}else{var u=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new Rh;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(t.matcher||rl)(n,e,t);if(!r)throw new Rh;var i={};fl(r.posParams,(function(e,t){i[t]=e.path}));var o=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(t,e,n);o=u.consumedSegments,a=n.slice(u.lastChild),i=new Hl(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vh(e),r,e.component,e,Oh(t),Ph(t)+o.length,Uh(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=Mh(t,o,a,c,this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new Vl(i,d)]}if(0===c.length&&0===f.length)return[new Vl(i,[])];var p=this.processSegment(c,h,f,"primary");return[new Vl(i,p)]}}]),e}();function Oh(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function Ph(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Mh(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some((function(n){return Lh(e,t,n)&&"primary"!==Fh(n)}))}(e,n,r)){var o=new ml(t,function(e,t,n,r){var i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;if(""===l.path&&"primary"!==Fh(l)){var h=new ml([],{});h._sourceSegment=e,h._segmentIndexShift=t.length,i[Fh(l)]=h}}}catch(f){a=!0,s=f}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return i}(e,t,r,new ml(n,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some((function(n){return Lh(e,t,n)}))}(e,n,r)){var a=new ml(e.segments,function(e,t,n,r,i,o){var a={},s=!0,u=!1,c=void 0;try{for(var l,h=r[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var f=l.value;if(Lh(e,n,f)&&!i[Fh(f)]){var d=new ml([],{});d._sourceSegment=e,d._segmentIndexShift="legacy"===o?e.segments.length:t.length,a[Fh(f)]=d}}}catch(p){u=!0,c=p}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}return Object.assign({},i,a)}(e,t,n,r,e.children,i));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}var s=new ml(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Lh(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Fh(e){return e.outlet||"primary"}function Vh(e){return e.data||{}}function Uh(e){return e.resolve||{}}function Bh(e,t,n,r){var i=Ch(e,t,r);return dl(i.resolve?i.resolve(t,n):i(t,n))}function jh(e){return function(t){return t.pipe(_u((function(t){var n=e(t);return n?Q(n).pipe(H((function(){return t}))):Q([t])})))}}var qh=function e(){_classCallCheck(this,e)},zh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),Hh=new De("ROUTES"),Kh=function(){function e(t,n,r,i){_classCallCheck(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _createClass(e,[{key:"load",value:function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(H((function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new il(ll(i.injector.get(Hh)).map(ul),i)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?Q(this.loader.load(e)):dl(e()).pipe(Y((function(e){return e instanceof qe?Vs(e):Q(t.compiler.compileModuleAsync(e))})))}}]),e}(),Wh=function e(){_classCallCheck(this,e)},Gh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function Qh(e){throw e}function Yh(e,t,n){return t.parse("/")}function Xh(e,t){return Vs(null)}var Zh=function(){function e(t,n,r,i,o,a,s,u){var c=this;_classCallCheck(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new D,this.errorHandler=Qh,this.malformedUriErrorHandler=Yh,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Xh,afterPreactivation:Xh},this.urlHandlingStrategy=new Gh,this.routeReuseStrategy=new zh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(je),this.console=o.get(Pi);var l=o.get(Ji);this.isNgZoneEnabled=l instanceof Ji,this.resetConfig(u),this.currentUrlTree=new vl(new ml([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Kh(a,s,(function(e){return c.triggerEvent(new Wc(e))}),(function(e){return c.triggerEvent(new Gc(e))})),this.routerState=jl(this.currentUrlTree,this.rootComponentType),this.transitions=new Us({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Gs((function(e){return 0!==e.id})),H((function(e){return Object.assign({},e,{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),_u((function(e){var r,i,o,a=!1,s=!1;return Vs(e).pipe(tu((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign({},t.lastSuccessfulNavigation,{previousNavigation:null}):null}})),_u((function(e){var r,i,o,a,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Vs(e).pipe(_u((function(e){var r=t.transitions.getValue();return n.next(new Fc(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Ms:[e]})),_u((function(e){return Promise.resolve(e)})),(r=t.ngModule.injector,i=t.configLoader,o=t.urlSerializer,a=t.config,function(e){return e.pipe(_u((function(e){return function(e,t,n,r,i){return new mh(e,t,n,r,i).apply()}(r,i,o,e.extractedUrl,a).pipe(H((function(t){return Object.assign({},e,{urlAfterRedirects:t})})))})))}),tu((function(e){t.currentNavigation=Object.assign({},t.currentNavigation,{finalUrl:e.urlAfterRedirects})})),function(e,n,r,i,o){return function(r){return r.pipe(Y((function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new xh(e,t,n,r,i,o).recognize()}(e,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,t.serializeUrl(a)),i,o).pipe(H((function(e){return Object.assign({},r,{targetSnapshot:e})})));var a})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),tu((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),tu((function(e){var r=new jc(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)})));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.id,c=e.extractedUrl,l=e.source,h=e.restoredState,f=e.extras,d=new Fc(u,t.serializeUrl(c),l,h);n.next(d);var p=jl(c,t.rootComponentType).snapshot;return Vs(Object.assign({},e,{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign({},f,{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Ms})),jh((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,s=a.skipLocationChange,u=a.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),tu((function(e){var n=new qc(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),H((function(e){return Object.assign({},e,{guards:(n=e.targetSnapshot,r=e.currentSnapshot,i=t.rootContexts,o=n._root,function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=Ul(n);return t.children.forEach((function(t){!function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=t.value,s=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){var c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!gl(e.url,t.url);case"pathParamsOrQueryParamsChange":return!gl(e.url,t.url)||!cl(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yl(e,t)||!cl(e.queryParams,t.queryParams);case"paramsChange":default:return!Yl(e,t)}}(s,a,a.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new wh(i)):(a.data=s.data,a._resolvedData=s._resolvedData),e(t,n,a.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new kh(u&&u.outlet&&u.outlet.component||null,s))}else s&&Sh(n,u,o),o.canActivateChecks.push(new wh(i)),e(t,null,a.component?u?u.children:null:r,i,o)}(t,a[t.value.outlet],r,i.concat([t.value]),o),delete a[t.value.outlet]})),fl(a,(function(e,t){return Sh(e,r.getContext(t),o)})),o}(o,r?r._root:null,i,[o.value]))});var n,r,i,o})),function(e,t){return function(n){return n.pipe(Y((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?Vs(Object.assign({},n,{guardsResult:!0})):function(e,t,n,r){return Q(e).pipe(Y((function(e){return function(e,t,n,r,i){var o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Vs(o.map((function(o){var a,s=Ch(o,t,i);if(function(e){return e&&ch(e.canDeactivate)}(s))a=dl(s.canDeactivate(e,t,n,r));else{if(!ch(s))throw new Error("Invalid CanDeactivate guard");a=dl(s(e,t,n,r))}return a.pipe(mu())}))).pipe(Th()):Vs(!0)}(e.component,e.route,n,t,r)})),mu((function(e){return!0!==e}),!0))}(s,r,i,e).pipe(Y((function(n){return n&&"boolean"==typeof n?function(e,t,n,r){return Q(t).pipe(Iu((function(t){return Q([Ah(t.route.parent,r),Ih(t.route,r),Dh(e,t.path,n),Nh(e,t.route,n)]).pipe(Ws(),mu((function(e){return!0!==e}),!0))})),mu((function(e){return!0!==e}),!0))}(r,a,e,t):Vs(n)})),H((function(e){return Object.assign({},n,{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),tu((function(e){if(lh(e.guardsResult)){var n=nl('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}})),tu((function(e){var n=new zc(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)})),Gs((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var r=new Uc(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(r),e.resolve(!1),!1}return!0})),jh((function(e){if(e.guards.canActivateChecks.length)return Vs(e).pipe(tu((function(e){var n=new Hc(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),(n=t.paramsInheritanceStrategy,r=t.ngModule.injector,function(e){return e.pipe(Y((function(e){var t=e.targetSnapshot,i=e.guards.canActivateChecks;return i.length?Q(i).pipe(Iu((function(e){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return Vs({});if(1===i.length){var o=i[0];return Bh(e[o],t,n,r).pipe(H((function(e){return _defineProperty({},o,e)})))}var a={};return Q(i).pipe(Y((function(i){return Bh(e[i],t,n,r).pipe(H((function(e){return a[i]=e,e})))}))).pipe(cu(),H((function(){return a})))}(e._resolve,e,t,r).pipe(H((function(t){return e._resolvedData=t,e.data=Object.assign({},e.data,zl(e,n).resolve),null})))}(e.route,t,n,r)})),function(e,t){return arguments.length>=2?function(n){return b(Su(e,t),Js(1),au(t))(n)}:function(t){return b(Su((function(t,n,r){return e(t,n,r+1)})),Js(1))(t)}}((function(e,t){return e})),H((function(t){return e}))):Vs(e)})))}),tu((function(e){var n=new Kc(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})));var n,r})),jh((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,s=a.skipLocationChange,u=a.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),H((function(e){var n=function(e,t,n){var r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var o=function(t,n,r){return n.children.map((function(n){var i=!0,o=!1,a=void 0;try{for(var s,u=r.children[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(t.shouldReuseRoute(c.value.snapshot,n.value))return e(t,n,c)}}catch(l){o=!0,a=l}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return e(t,n)}))}(t,n,r);return new Vl(i,o)}var a=t.retrieve(n.value);if(a){var s=a.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,s),s}var u,c=new ql(new Us((u=n.value).url),new Us(u.params),new Us(u.queryParams),new Us(u.fragment),new Us(u.data),u.outlet,u.component,u),l=n.children.map((function(n){return e(t,n)}));return new Vl(c,l)}(e,t._root,n?n._root:void 0);return new Bl(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign({},e,{targetRouterState:n})})),tu((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(r=t.rootContexts,i=t.routeReuseStrategy,o=function(e){return t.triggerEvent(e)},H((function(e){return new sh(i,e.targetRouterState,e.currentRouterState,o).activate(r),e}))),tu({next:function(){a=!0},complete:function(){a=!0}}),Au((function(){if(!a&&!s){t.resetUrlToCurrentUrlTree();var r=new Uc(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(r),e.resolve(!1)}t.currentNavigation=null})),lu((function(r){if(s=!0,(u=r)&&u.ngNavigationCancelingError){var i=lh(r.url);i||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var o=new Uc(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(o),e.resolve(!1),i&&t.navigateByUrl(r.url)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var a=new Bc(e.id,t.serializeUrl(e.extractedUrl),r);n.next(a);try{e.resolve(t.errorHandler(r))}catch(c){e.reject(c)}}var u;return Ms})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign({},this.getTransition(),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var n=e.parseUrl(t.url),r="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){ol(e),this.config=e.map(ul),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,o=t.preserveQueryParams,a=t.queryParamsHandling,s=t.preserveFragment;$e()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i,l=null;if(a)switch(a){case"merge":l=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=o?this.currentUrlTree.queryParams:r||null;return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return Zl(t.root,t.root,t,r,i);var o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Jl(!0,0,e);var t=0,n=!1,r=e.reduce((function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return fl(r.outlets,(function(e,t){o[t]="string"==typeof e?e.split("/"):e})),[].concat(_toConsumableArray(e),[{outlets:o}])}if(r.segmentPath)return[].concat(_toConsumableArray(e),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(e),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))})),e):[].concat(_toConsumableArray(e),[r])}),[]);return new Jl(n,t,r)}(n);if(o.toRoot())return Zl(t.root,new ml([],{}),t,r,i);var a=function(e,t,n){if(e.isAbsolute)return new $l(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new $l(n.snapshot._urlSegment,!0,0);var r=Xl(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new $l(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(o,t,e),s=a.processChildren?nh(a.segmentGroup,a.index,o.commands):th(a.segmentGroup,a.index,o.commands);return Zl(a.segmentGroup,s,t,r,i)}(u,this.currentUrlTree,e,l,c)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};$e()&&this.isNgZoneEnabled&&!Ji.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=lh(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(lh(e))return pl(this.currentUrlTree,e,t);var n=this.parseUrl(e);return pl(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return null!=r&&(t[n]=r),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new Vc(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,n,r){var i=this.getTransition();if(i&&"imperative"!==t&&"imperative"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"hashchange"==t&&"popstate"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(i&&"popstate"==t&&"hashchange"===i.source&&i.rawUrl.toString()===e.toString())return Promise.resolve(!0);var o=null,a=null,s=new Promise((function(e,t){o=e,a=t})),u=++this.navigationId;return this.setTransition({id:u,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,n,r){var i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),e}(),Jh=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.subscription=t.events.subscribe((function(e){e instanceof Vc&&i.updateTargetUrlAndHref()}))}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:$h(this.skipLocationChange),replaceUrl:$h(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){$e()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:$h(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:$h(this.preserveFragment)})}}]),e}();function $h(e){return""===e||!!e}var ef=function e(){_classCallCheck(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new tf,this.attachRef=null},tf=function(){function e(){_classCallCheck(this,e),this.contexts=new Map}return _createClass(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new ef,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),nf=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ci,this.deactivateEvents=new Ci,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new rf(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),e}(),rf=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.childContexts=n,this.parent=r}return _createClass(e,[{key:"get",value:function(e,t){return e===ql?this.route:e===tf?this.childContexts:this.parent.get(e,t)}}]),e}(),of=function e(){_classCallCheck(this,e)},af=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return t().pipe(lu((function(){return Vs(null)})))}}]),e}(),sf=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return Vs(null)}}]),e}(),uf=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new Kh(n,r,(function(e){return t.triggerEvent(new Wc(e))}),(function(e){return t.triggerEvent(new Gc(e))}))}return _createClass(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Gs((function(e){return e instanceof Vc})),Iu((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(je);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var c=u._loadedConfig;n.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?n.push(this.preloadConfig(e,u)):u.children&&n.push(this.processRoutes(e,u.children))}}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return Q(n).pipe($(),H((function(e){})))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,(function(){return n.loader.load(e.injector,t).pipe(Y((function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)})))}))}}]),e}(),cf=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Fc?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Vc&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Jc&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Jc(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}(),lf=new De("ROUTER_CONFIGURATION"),hf=new De("ROUTER_FORROOT_GUARD"),ff=[ls,{provide:bl,useClass:wl},{provide:Zh,useFactory:_f,deps:[yo,bl,tf,ls,Rt,_o,zi,Hh,lf,[Wh,new de],[qh,new de]]},tf,{provide:ql,useFactory:bf,deps:[Zh]},{provide:_o,useClass:ko},uf,sf,af,{provide:lf,useValue:{enableTracing:!1}}];function df(){return new lo("Router",Zh)}var pf=function(){function e(t,n){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[ff,gf(t),{provide:hf,useFactory:yf,deps:[[Zh,new de,new ve]]},{provide:lf,useValue:n||{}},{provide:us,useFactory:mf,deps:[as,[new fe(cs),new de],lf]},{provide:cf,useFactory:vf,deps:[Zh,Os,lf]},{provide:of,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:sf},{provide:lo,multi:!0,useFactory:df},[wf,{provide:Ti,multi:!0,useFactory:kf,deps:[wf]},{provide:Sf,useFactory:Cf,deps:[wf]},{provide:Oi,multi:!0,useExisting:Sf}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[gf(t)]}}}]),e}();function vf(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new cf(e,t,n)}function mf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new fs(e,t):new ds(e,t)}function yf(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function gf(e){return[{provide:Ut,multi:!0,useValue:e},{provide:Hh,multi:!0,useValue:e}]}function _f(e,t,n,r,i,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},c=arguments.length>9?arguments[9]:void 0,l=arguments.length>10?arguments[10]:void 0,h=new Zh(null,t,n,r,i,o,a,ll(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=xu();h.events.subscribe((function(e){f.logGroup("Router Event: ".concat(e.constructor.name)),f.log(e.toString()),f.log(e),f.logGroupEnd()}))}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h}function bf(e){return e.routerState.root}var wf=function(){function e(t){_classCallCheck(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new D}return _createClass(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(ss,Promise.resolve(null)).then((function(){var t=null,n=new Promise((function(e){return t=e})),r=e.injector.get(Zh),i=e.injector.get(lf);if(e.isLegacyDisabled(i)||e.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return e.initNavigation?Vs(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(lf),n=this.injector.get(uf),r=this.injector.get(cf),i=this.injector.get(Zh),o=this.injector.get(yo);e===o.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}();function kf(e){return e.appInitializer.bind(e)}function Cf(e){return e.bootstrapListener.bind(e)}var Sf=new De("Router Initializer"),Ef=Gn({encapsulation:2,styles:[],data:{}});function Tf(e){return Jo(0,[(e()(),Fo(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ti(1,212992,null,0,nf,[tf,Dn,en,[8,null],It],null,null)],(function(e,t){e(t,1,0)}),null)}var If=Rr("ng-component",$c,(function(e){return Jo(0,[(e()(),Fo(0,0,null,null,1,"ng-component",[],null,null,null,Tf,Ef)),ti(1,49152,null,0,$c,[],null,null)],null,null)}),{},{},[]),Af=function e(t){_classCallCheck(this,e),this.auth=t},Nf=n("mrSG"),Df=n("Wcq6"),Rf=n.n(Df),xf=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).scheduler=e,r.work=n,r.pending=!1,r}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),t}(function(e){function t(e,n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),t}(d)),Of=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).scheduler=e,r.work=n,r}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n>0?_get(_getPrototypeOf(t.prototype),"schedule",this).call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,n){return n>0||this.closed?_get(_getPrototypeOf(t.prototype),"execute",this).call(this,e,n):this._execute(e,n)}},{key:"requestAsyncId",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?_get(_getPrototypeOf(t.prototype),"requestAsyncId",this).call(this,e,n,r):e.flush(this)}}]),t}(xf),Pf=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;_classCallCheck(this,e),this.SchedulerAction=t,this.now=n}return _createClass(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),Mf=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pf.now;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,(function(){return t.delegate&&t.delegate!==_assertThisInitialized(n)?t.delegate.now():r()})))).actions=[],n.active=!1,n.scheduled=void 0,n}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,r):_get(_getPrototypeOf(t.prototype),"schedule",this).call(this,e,n,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),t}(Pf),Lf=new(function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(Mf))(Of),Ff=new Mf(xf),Vf=1,Uf={},Bf=function(e){var t=Vf++;return Uf[t]=e,Promise.resolve().then((function(){return function(e){var t=Uf[e];t&&t()}(t)})),t},jf=function(e){delete Uf[e]},qf=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).scheduler=e,r.work=n,r}return _inherits(t,e),_createClass(t,[{key:"requestAsyncId",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?_get(_getPrototypeOf(t.prototype),"requestAsyncId",this).call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=Bf(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return _get(_getPrototypeOf(t.prototype),"recycleAsyncId",this).call(this,e,n,r);0===e.actions.length&&(jf(n),e.scheduled=void 0)}}]),t}(xf),zf=new(function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}}}]),t}(Mf))(qf);function Hf(e){return!u(e)&&e-parseFloat(e)+1>=0}var Kf=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zf;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).source=e,n.delayTime=r,n.scheduler=i,(!Hf(r)||r<0)&&(n.delayTime=0),i&&"function"==typeof i.schedule||(n.scheduler=zf),n}return _inherits(t,e),_createClass(t,[{key:"_subscribe",value:function(e){return this.scheduler.schedule(t.dispatch,this.delayTime,{source:this.source,subscriber:e})}}],[{key:"create",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zf;return new t(e,n,r)}},{key:"dispatch",value:function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))}}]),t}(C),Wf=function(){function e(t,n){_classCallCheck(this,e),this.scheduler=t,this.delay=n}return _createClass(e,[{key:"call",value:function(e,t){return new Kf(t,this.delay,this.scheduler).subscribe(e)}}]),e}();function Gf(e,t){return new C(t?function(n){return t.schedule(Qf,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function Qf(e){var t=e.error;e.subscriber.error(t)}var Yf,Xf=((Yf=function(){function e(t,n,r){_classCallCheck(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return _createClass(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Vs(this.value);case"E":return Gf(this.error);case"C":return Ls()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}()).completeNotification=new Yf("C"),Yf.undefinedValueNotification=new Yf("N",void 0),Yf);function Zf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new Jf(e,t))}}var Jf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.scheduler=t,this.delay=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new $f(e,this.scheduler,this.delay))}}]),e}(),$f=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).scheduler=n,r.delay=i,r}return _inherits(t,e),_createClass(t,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new ed(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(Xf.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(Xf.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(Xf.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),t}(m),ed=function e(t,n){_classCallCheck(this,e),this.notification=t,this.destination=n};function td(){}var nd,rd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lf;_classCallCheck(this,e),this.zone=t,this.delegate=n}return _createClass(e,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(e,t,n){var r=this.zone;return this.delegate.schedule((function(t){var n=this;r.runGuarded((function(){e.apply(n,[t])}))}),t,n)}}]),e}(),id=function(){function e(t){_classCallCheck(this,e),this.zone=t,this.task=null}return _createClass(e,[{key:"call",value:function(e,t){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run((function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",td,{},td,td)})),t.pipe(tu(n,n,n)).subscribe(e).add(n)}},{key:"unscheduleTask",value:function(){null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)}}]),e}(),od=function e(t){_classCallCheck(this,e),this.ngZone=t,this.outsideAngular=t.runOutsideAngular((function(){return new rd(Zone.current)})),this.insideAngular=t.run((function(){return new rd(Zone.current,Ff)}))};function ad(e,t){return function(n){return Rs(t)&&(n=n.lift(new id(e.ngZone))),n.pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new Wf(e,t))}}(e.outsideAngular),Zf(e.insideAngular))}}var sd=new De("angularfire2.app.options"),ud=new De("angularfire2.app.nameOrConfig"),cd=sd,ld=ud,hd=function e(){_classCallCheck(this,e)},fd=new hn("5.4.2");function dd(e,t,n){var r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",Rf.a.apps.filter((function(e){return e&&e.name===r.name}))[0]||t.runOutsideAngular((function(){return Rf.a.initializeApp(e,r)}))}var pd=nd=function(){function e(t){_classCallCheck(this,e),Rf.a.registerVersion&&(Rf.a.registerVersion("angularfire",fd.full,t.toString()),Rf.a.registerVersion("angular",fn.full))}return _createClass(e,null,[{key:"initializeApp",value:function(e,t){return{ngModule:nd,providers:[{provide:cd,useValue:e},{provide:ld,useValue:t}]}}}]),e}(),vd=function e(t,n,r,i){var o=this;_classCallCheck(this,e);var a=ad(new od(i),r);this.auth=i.runOutsideAngular((function(){return dd(t,i,n).auth()})),this.authState=new C((function(e){return i.runOutsideAngular((function(){return o.auth.onAuthStateChanged(e)}))})).pipe(a),this.user=new C((function(e){return i.runOutsideAngular((function(){return o.auth.onIdTokenChanged(e)}))})).pipe(a),this.idToken=this.user.pipe(_u((function(e){return e?Q(e.getIdToken()):Vs(null)}))),this.idTokenResult=this.user.pipe(_u((function(e){return e?Q(e.getIdTokenResult()):Vs(null)})))};function md(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ff;return new C((function(n){var r;return null!=t?t.schedule((function(){r=e.onSnapshot(n)})):r=e.onSnapshot(n),function(){null!=r&&r()}}))}(e,t)}function yd(e,t){return md(e,t).pipe(H((function(e){return{payload:e,type:"query"}})))}function gd(e,t){return yd(e,t).pipe(H((function(e){return e.payload.docChanges().map((function(e){return{type:e.type,payload:e}}))})))}function _d(e,t,n){return yd(e,n).pipe(H((function(e){return e.payload.docChanges()})),Su((function(e,n){return function(e,t,n){return t.forEach((function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)||e.splice(t.newIndex,0,t);break;case"modified":(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))&&(t.oldIndex!==t.newIndex?(e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t)):e.splice(t.newIndex,1,t));break;case"removed":e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref)&&e.splice(t.oldIndex,1)}return e}(e,t))})),e}(e,n,t)}),[]),H((function(e){return e.map((function(e){return{type:e.type,payload:e}}))})))}function bd(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}var wd=function(){function e(t,n,r){_classCallCheck(this,e),this.ref=t,this.query=n,this.afs=r}return _createClass(e,[{key:"stateChanges",value:function(e){return e&&0!==e.length?gd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,H((function(t){return t.filter((function(t){return e.indexOf(t.type)>-1}))})),Gs((function(e){return e.length>0}))):gd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(Su((function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(t))}),[]))}},{key:"snapshotChanges",value:function(e){var t=bd(e);return _d(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,H((function(t){return t.payload.docs.map((function(t){return e.idField?Object.assign({},t.data(),_defineProperty({},e.idField,t.id)):t.data()}))})))}},{key:"get",value:function(e){return Q(this.query.get(e)).pipe(Zf(this.afs.schedulers.insideAngular))}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new kd(this.ref.doc(e),this.afs)}}]),e}(),kd=function(){function e(t,n){_classCallCheck(this,e),this.ref=t,this.afs=n}return _createClass(e,[{key:"set",value:function(e,t){return this.ref.set(e,t)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,t){var n=Nd(this.ref.collection(e),t),r=n.ref,i=n.query;return new wd(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return md(this.ref,this.afs.schedulers.outsideAngular).pipe(H((function(e){return{payload:e,type:"value"}}))).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){return this.snapshotChanges().pipe(H((function(e){return e.payload.data()})))}},{key:"get",value:function(e){return Q(this.ref.get(e)).pipe(Zf(this.afs.schedulers.insideAngular))}}]),e}(),Cd=function(){function e(t,n){_classCallCheck(this,e),this.query=t,this.afs=n}return _createClass(e,[{key:"stateChanges",value:function(e){return e&&0!==e.length?gd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,H((function(t){return t.filter((function(t){return e.indexOf(t.type)>-1}))})),Gs((function(e){return e.length>0}))):gd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(Su((function(e,t){return[].concat(_toConsumableArray(e),_toConsumableArray(t))}),[]))}},{key:"snapshotChanges",value:function(e){var t=bd(e);return _d(this.query,t,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){return yd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,H((function(e){return e.payload.docs.map((function(e){return e.data()}))})))}},{key:"get",value:function(e){return Q(this.query.get(e)).pipe(Zf(this.afs.schedulers.insideAngular))}}]),e}(),Sd=new De("angularfire2.enableFirestorePersistence"),Ed=new De("angularfire2.firestore.persistenceSettings"),Td=new De("angularfire2.firestore.settings"),Id=parseInt(Rf.a.SDK_VERSION.split(".")[0]),Ad=Id<5||5==Id&&parseInt(Rf.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function Nd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return{query:t(e),ref:e}}var Dd,Rd=function(){function e(t,n,r,i,o,a,s){var u=this;_classCallCheck(this,e),this.schedulers=new od(a),this.keepUnstableUntilFirst=ad(this.schedulers,o),this.firestore=a.runOutsideAngular((function(){var e=dd(t,a,n).firestore();return e.settings(i||Ad),e})),this.persistenceEnabled$=r&&!Rs(o)?a.runOutsideAngular((function(){try{return Q(u.firestore.enablePersistence(s||void 0).then((function(){return!0}),(function(){return!1})))}catch(e){return Vs(!1)}})):Vs(!1)}return _createClass(e,[{key:"collection",value:function(e,t){var n=Nd("string"==typeof e?this.firestore.collection(e):e,t),r=n.ref,i=n.query;return new wd(r,i,this)}},{key:"collectionGroup",value:function(e,t){if(Id<6)throw"collection group queries require Firebase JS SDK >= 6.0";var n=t||function(e){return e},r=this.firestore.collectionGroup(e);return new Cd(n(r),this)}},{key:"doc",value:function(e){var t;return t="string"==typeof e?this.firestore.doc(e):e,new kd(t,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),e}(),xd=((Dd=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.afAuth=t,this.afs=n,this.router=r,this.user$=this.afAuth.authState.pipe(_u((function(e){return e?i.afs.doc("users/".concat(e.uid)).valueChanges():Vs(null)})))}return _createClass(e,[{key:"getUser",value:function(){return this.afAuth.authState.pipe(mu()).toPromise()}},{key:"googleSignin",value:function(){return Nf.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Df.auth.GoogleAuthProvider,e.next=3,this.afAuth.auth.signInWithPopup(t);case 3:return n=e.sent,e.abrupt("return",this.updateUserData(n.user));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"updateUserData",value:function(e){var t=e.uid,n=e.email,r=e.displayName,i=e.photoURL;return this.afs.doc("users/".concat(t)).set({uid:t,email:n,displayName:r,photoURL:i},{merge:!0})}},{key:"signOut",value:function(){return Nf.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.afAuth.auth.signOut();case 2:this.router.navigate(["/"]);case 3:case"end":return e.stop()}}),e,this)})))}}]),e}()).ngInjectableDef=ge({factory:function(){return new Dd(Fe(vd),Fe(Rd),Fe(Zh))},token:Dd,providedIn:"root"}),Dd),Od=Gn({encapsulation:2,styles:[],data:{}});function Pd(e){return Jo(0,[(e()(),Fo(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),Yo(-1,null,["home works!"]))],null,null)}var Md=Rr("app-home",Af,(function(e){return Jo(0,[(e()(),Fo(0,0,null,null,1,"app-home",[],null,null,null,Pd,Od)),ti(1,49152,null,0,Af,[xd],null,null)],null,null)}),{},{},[]),Ld=function e(t){_classCallCheck(this,e),this.auth=t},Fd=Gn({encapsulation:2,styles:[],data:{}});function Vd(e){return Jo(0,[(e()(),Fo(0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function Ud(e){return Jo(0,[(e()(),Fo(0,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),Yo(-1,null,["Oops..."])),(e()(),Fo(2,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),Yo(-1,null,["Looks like you did not log in! Do it to get started..."])),(e()(),Fo(4,0,null,null,2,"button",[],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.auth.googleSignin()&&r),r}),null,null)),(e()(),Fo(5,0,null,null,0,"i",[["class","fa fa-google"]],null,null,null,null,null)),(e()(),Yo(-1,null,[" Connect Google "]))],null,null)}function Bd(e){return Jo(0,[(e()(),Fo(0,0,null,null,5,"div",[],null,null,null,null,null)),(e()(),Fo(1,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),Yo(2,null,["Hello, ","!"])),(e()(),Fo(3,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(e()(),Fo(4,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),Yo(5,null,["UID: ",""]))],null,(function(e,t){e(t,2,0,t.context.ngIf.displayName),e(t,3,0,t.context.ngIf.photoURL),e(t,5,0,t.context.ngIf.uid)}))}function jd(e){return Jo(0,[(e()(),Lo(16777216,null,null,2,null,Bd)),ti(1,16384,null,0,ws,[Dn,An],{ngIf:[0,"ngIf"]},null),ni(131072,Is,[It]),(e()(),Lo(0,null,null,0))],(function(e,t){var n=t.component;e(t,1,0,Wn(t,1,0,qr(t,2).transform(n.auth.user$)))}),null)}function qd(e){return Jo(0,[(e()(),Lo(16777216,null,null,2,null,Vd)),ti(1,16384,null,0,ws,[Dn,An],{ngIf:[0,"ngIf"],ngIfThen:[1,"ngIfThen"],ngIfElse:[2,"ngIfElse"]},null),ni(131072,Is,[It]),(e()(),Lo(0,[["guest",2]],null,0,null,Ud)),(e()(),Lo(0,[["authenticated",2]],null,0,null,jd))],(function(e,t){var n=t.component;e(t,1,0,Wn(t,1,0,qr(t,2).transform(n.auth.user$)),qr(t,4),qr(t,3))}),null)}var zd,Hd=Rr("app-profile",Ld,(function(e){return Jo(0,[(e()(),Fo(0,0,null,null,1,"app-profile",[],null,null,null,qd,Fd)),ti(1,49152,null,0,Ld,[xd],null,null)],null,null)}),{},{},[]),Kd=new hn("8.2.3");function Wd(e){return null!=e&&"false"!=="".concat(e)}function Gd(e){return Array.isArray(e)?e:[e]}function Qd(e){return null==e?"":"string"==typeof e?e:"".concat(e,"px")}function Yd(e){return e instanceof on?e.nativeElement:e}try{zd="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(S_){zd=!1}var Xd,Zd,Jd=((Zd=function e(t){_classCallCheck(this,e),this._platformId=t,this.isBrowser=this._platformId?Ds(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zd)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).ngInjectableDef=ge({factory:function(){return new Zd(Fe(xi,8))},token:Zd,providedIn:"root"}),Zd),$d=function e(){_classCallCheck(this,e)};function ep(e){return function(){if(null==Xd&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return Xd=!0}}))}finally{Xd=Xd||!1}return Xd}()?e:!!e.capture}function tp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?n.some((function(t){return e[t]})):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}var np=function(){function e(t,n){_classCallCheck(this,e),this.dueTime=t,this.scheduler=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new rp(e,this.dueTime,this.scheduler))}}]),e}(),rp=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ip,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),t}(m);function ip(e){e.debouncedNext()}var op,ap=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments)))._origin="program",e}return _inherits(t,e),_createClass(t,[{key:"setFocusOrigin",value:function(e){return this._origin=e,this}},{key:"setActiveItem",value:function(e){_get(_getPrototypeOf(t.prototype),"setActiveItem",this).call(this,e),this.activeItem&&this.activeItem.focus(this._origin)}}]),t}(function(){function e(t){var n=this;_classCallCheck(this,e),this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new D,this._typeaheadSubscription=d.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=function(e){return e.disabled},this._pressedLetters=[],this.tabOut=new D,this.change=new D,t instanceof Ei&&t.changes.subscribe((function(e){if(n._activeItem){var t=e.toArray().indexOf(n._activeItem);t>-1&&t!==n._activeItemIndex&&(n._activeItemIndex=t)}}))}return _createClass(e,[{key:"skipPredicate",value:function(e){return this._skipPredicateFn=e,this}},{key:"withWrap",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._wrap=e,this}},{key:"withVerticalOrientation",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._vertical=e,this}},{key:"withHorizontalOrientation",value:function(e){return this._horizontal=e,this}},{key:"withAllowedModifierKeys",value:function(e){return this._allowedModifierKeys=e,this}},{key:"withTypeAhead",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;if(this._items.length&&this._items.some((function(e){return"function"!=typeof e.getLabel})))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(tu((function(t){return e._pressedLetters.push(t)})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ff;return function(n){return n.lift(new np(e,t))}}(t),Gs((function(){return e._pressedLetters.length>0})),H((function(){return e._pressedLetters.join("")}))).subscribe((function(t){for(var n=e._getItemsArray(),r=1;r<n.length+1;r++){var i=(e._activeItemIndex+r)%n.length,o=n[i];if(!e._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){e.setActiveItem(i);break}}e._pressedLetters=[]})),this}},{key:"setActiveItem",value:function(e){var t=this._activeItemIndex;this.updateActiveItem(e),this._activeItemIndex!==t&&this.change.next(this._activeItemIndex)}},{key:"onKeydown",value:function(e){var t=this,n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every((function(n){return!e[n]||t._allowedModifierKeys.indexOf(n)>-1}));switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((r||tp(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],e.preventDefault()}},{key:"setFirstItemActive",value:function(){this._setActiveItemByIndex(0,1)}},{key:"setLastItemActive",value:function(){this._setActiveItemByIndex(this._items.length-1,-1)}},{key:"setNextItemActive",value:function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}},{key:"setPreviousItemActive",value:function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}},{key:"updateActiveItem",value:function(e){var t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),r=t[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}},{key:"updateActiveItemIndex",value:function(e){this.updateActiveItem(e)}},{key:"_setActiveItemByDelta",value:function(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}},{key:"_setActiveInWrapMode",value:function(e){for(var t=this._getItemsArray(),n=1;n<=t.length;n++){var r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}},{key:"_setActiveInDefaultMode",value:function(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}},{key:"_setActiveItemByIndex",value:function(e,t){var n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}},{key:"_getItemsArray",value:function(){return this._items instanceof Ei?this._items.toArray():this._items}},{key:"activeItemIndex",get:function(){return this._activeItemIndex}},{key:"activeItem",get:function(){return this._activeItem}}]),e}()),sp=ep({passive:!0,capture:!0}),up=((op=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._ngZone=t,this._platform=n,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=function(){r._lastTouchTarget=null,r._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=function(){r._lastTouchTarget||r._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=function(e){null!=r._touchTimeoutId&&clearTimeout(r._touchTimeoutId),r._lastTouchTarget=e.composedPath?e.composedPath()[0]:e.target,r._touchTimeoutId=setTimeout((function(){return r._lastTouchTarget=null}),650)},this._windowFocusListener=function(){r._windowFocused=!0,r._windowFocusTimeoutId=setTimeout((function(){return r._windowFocused=!1}))}}return _createClass(e,[{key:"monitor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._platform.isBrowser)return Vs(null);var r=Yd(e);if(this._elementInfo.has(r)){var i=this._elementInfo.get(r);return i.checkChildren=n,i.subject.asObservable()}var o={unlisten:function(){},checkChildren:n,subject:new D};this._elementInfo.set(r,o),this._incrementMonitoredElementCount();var a=function(e){return t._onFocus(e,r)},s=function(e){return t._onBlur(e,r)};return this._ngZone.runOutsideAngular((function(){r.addEventListener("focus",a,!0),r.addEventListener("blur",s,!0)})),o.unlisten=function(){r.removeEventListener("focus",a,!0),r.removeEventListener("blur",s,!0)},o.subject.asObservable()}},{key:"stopMonitoring",value:function(e){var t=Yd(e),n=this._elementInfo.get(t);n&&(n.unlisten(),n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())}},{key:"focusVia",value:function(e,t,n){var r=Yd(e);this._setOriginForCurrentEventQueue(t),"function"==typeof r.focus&&r.focus(n)}},{key:"ngOnDestroy",value:function(){var e=this;this._elementInfo.forEach((function(t,n){return e.stopMonitoring(n)}))}},{key:"_toggleClass",value:function(e,t,n){n?e.classList.add(t):e.classList.remove(t)}},{key:"_setClasses",value:function(e,t){this._elementInfo.get(e)&&(this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t))}},{key:"_setOriginForCurrentEventQueue",value:function(e){var t=this;this._ngZone.runOutsideAngular((function(){t._origin=e,t._originTimeoutId=setTimeout((function(){return t._origin=null}),1)}))}},{key:"_wasCausedByTouch",value:function(e){var t=e.target;return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}},{key:"_onFocus",value:function(e,t){var n=this._elementInfo.get(t);if(n&&(n.checkChildren||t===e.target)){var r=this._origin;r||(r=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"),this._setClasses(t,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}}},{key:"_onBlur",value:function(e,t){var n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}},{key:"_emitOrigin",value:function(e,t){this._ngZone.run((function(){return e.next(t)}))}},{key:"_incrementMonitoredElementCount",value:function(){var e=this;1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular((function(){document.addEventListener("keydown",e._documentKeydownListener,sp),document.addEventListener("mousedown",e._documentMousedownListener,sp),document.addEventListener("touchstart",e._documentTouchstartListener,sp),window.addEventListener("focus",e._windowFocusListener)}))}},{key:"_decrementMonitoredElementCount",value:function(){--this._monitoredElementCount||(document.removeEventListener("keydown",this._documentKeydownListener,sp),document.removeEventListener("mousedown",this._documentMousedownListener,sp),document.removeEventListener("touchstart",this._documentTouchstartListener,sp),window.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId))}}]),e}()).ngInjectableDef=ge({factory:function(){return new op(Fe(Ji),Fe(Jd))},token:op,providedIn:"root"}),op);function cp(e){return 0===e.buttons}var lp=new hn("8.2.3"),hp=new De("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),fp=function(){function e(t,n){_classCallCheck(this,e),this._sanityChecksEnabled=t,this._hammerLoader=n,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return _createClass(e,[{key:"_areChecksEnabled",value:function(){return this._sanityChecksEnabled&&$e()&&!this._isTestEnv()}},{key:"_isTestEnv",value:function(){var e=this._window;return e&&(e.__karma__||e.jasmine)}},{key:"_checkDoctypeIsDefined",value:function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){if(this._document&&this._document.body&&"function"==typeof getComputedStyle){var e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);var t=getComputedStyle(e);t&&"none"!==t.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}}},{key:"_checkCdkVersionMatch",value:function(){lp.full!==Kd.full&&console.warn("The Angular Material version ("+lp.full+") does not match the Angular CDK version ("+Kd.full+").\nPlease ensure the versions of these two packages exactly match.")}},{key:"_checkHammerIsAvailable",value:function(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}]),e}();function dp(e){return function(e){function t(){var e,n;_classCallCheck(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(i))))._disabled=!1,n}return _inherits(t,e),_createClass(t,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Wd(e)}}]),t}(e)}function pp(e,t){return function(e){function n(){var e,r;_classCallCheck(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=_possibleConstructorReturn(this,(e=_getPrototypeOf(n)).call.apply(e,[this].concat(o)))).color=t,r}return _inherits(n,e),_createClass(n,[{key:"color",get:function(){return this._color},set:function(e){var n=e||t;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-".concat(this._color)),n&&this._elementRef.nativeElement.classList.add("mat-".concat(n)),this._color=n)}}]),n}(e)}function vp(e){return function(e){function t(){var e,n;_classCallCheck(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(i))))._disableRipple=!1,n}return _inherits(t,e),_createClass(t,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(e){this._disableRipple=Wd(e)}}]),t}(e)}try{"undefined"!=typeof Intl}catch(S_){!1}var mp,yp=function(){var e={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return e[e.FADING_IN]="FADING_IN",e[e.VISIBLE]="VISIBLE",e[e.FADING_OUT]="FADING_OUT",e[e.HIDDEN]="HIDDEN",e}(),gp=function(){function e(t,n,r){_classCallCheck(this,e),this._renderer=t,this.element=n,this.config=r,this.state=yp.HIDDEN}return _createClass(e,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),e}(),_p={enterDuration:450,exitDuration:400},bp=ep({passive:!0}),wp=function(){function e(t,n,r,i){var o=this;_classCallCheck(this,e),this._target=t,this._ngZone=n,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._onMousedown=function(e){var t=cp(e),n=o._lastTouchStartEvent&&Date.now()<o._lastTouchStartEvent+800;o._target.rippleDisabled||t||n||(o._isPointerDown=!0,o.fadeInRipple(e.clientX,e.clientY,o._target.rippleConfig))},this._onTouchStart=function(e){if(!o._target.rippleDisabled){o._lastTouchStartEvent=Date.now(),o._isPointerDown=!0;for(var t=e.changedTouches,n=0;n<t.length;n++)o.fadeInRipple(t[n].clientX,t[n].clientY,o._target.rippleConfig)}},this._onPointerUp=function(){o._isPointerDown&&(o._isPointerDown=!1,o._activeRipples.forEach((function(e){!e.config.persistent&&(e.state===yp.VISIBLE||e.config.terminateOnPointerUp&&e.state===yp.FADING_IN)&&e.fadeOut()})))},i.isBrowser&&(this._containerElement=Yd(r),this._triggerEvents.set("mousedown",this._onMousedown).set("mouseup",this._onPointerUp).set("mouseleave",this._onPointerUp).set("touchstart",this._onTouchStart).set("touchend",this._onPointerUp).set("touchcancel",this._onPointerUp))}return _createClass(e,[{key:"fadeInRipple",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign({},_p,r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);var a=r.radius||function(e,t,n){var r=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),i=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),s=e-i.left,u=t-i.top,c=o.enterDuration,l=document.createElement("div");l.classList.add("mat-ripple-element"),l.style.left="".concat(s-a,"px"),l.style.top="".concat(u-a,"px"),l.style.height="".concat(2*a,"px"),l.style.width="".concat(2*a,"px"),l.style.backgroundColor=r.color||null,l.style.transitionDuration="".concat(c,"ms"),this._containerElement.appendChild(l),window.getComputedStyle(l).getPropertyValue("opacity"),l.style.transform="scale(1)";var h=new gp(this,l,r);return h.state=yp.FADING_IN,this._activeRipples.add(h),r.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone((function(){var e=h===n._mostRecentTransientRipple;h.state=yp.VISIBLE,r.persistent||e&&n._isPointerDown||h.fadeOut()}),c),h}},{key:"fadeOutRipple",value:function(e){var t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),t){var n=e.element,r=Object.assign({},_p,e.config.animation);n.style.transitionDuration="".concat(r.exitDuration,"ms"),n.style.opacity="0",e.state=yp.FADING_OUT,this._runTimeoutOutsideZone((function(){e.state=yp.HIDDEN,n.parentNode.removeChild(n)}),r.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach((function(e){return e.fadeOut()}))}},{key:"setupTriggerEvents",value:function(e){var t=this,n=Yd(e);n&&n!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular((function(){t._triggerEvents.forEach((function(e,t){n.addEventListener(t,e,bp)}))})),this._triggerElement=n)}},{key:"_runTimeoutOutsideZone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular((function(){return setTimeout(e,t)}))}},{key:"_removeTriggerEvents",value:function(){var e=this;this._triggerElement&&this._triggerEvents.forEach((function(t,n){e._triggerElement.removeEventListener(n,t,bp)}))}}]),e}(),kp=new De("mat-ripple-global-options"),Cp=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this._elementRef=t,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new wp(this,n,t,r),"NoopAnimations"===o&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}return _createClass(e,[{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign({},this.rippleConfig,n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign({},this.rippleConfig,e))}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}}]),e}(),Sp=function e(){_classCallCheck(this,e)},Ep=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Tp=function(e){function t(e,n,r){var i;_classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._focusMonitor=n,i._animationMode=r,i.isRoundButton=i._hasHostAttributes("mat-fab","mat-mini-fab"),i.isIconButton=i._hasHostAttributes("mat-icon-button");var o=!0,a=!1,s=void 0;try{for(var u,c=Ep[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;i._hasHostAttributes(l)&&i._getHostElement().classList.add(l)}}catch(h){a=!0,s=h}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return e.nativeElement.classList.add("mat-button-base"),i._focusMonitor.monitor(i._elementRef,!0),i.isRoundButton&&(i.color="accent"),i}return _inherits(t,e),_createClass(t,[{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor.focusVia(this._getHostElement(),e,t)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return e._getHostElement().hasAttribute(t)}))}}]),t}(pp(dp(vp((function e(t){_classCallCheck(this,e),this._elementRef=t}))))),Ip=function e(){_classCallCheck(this,e)},Ap=new De("cdk-dir-doc",{providedIn:"root",factory:function(){return Ve(Ns)}}),Np=((mp=function(){function e(t){if(_classCallCheck(this,e),this.value="ltr",this.change=new Ci,t){var n=t.documentElement?t.documentElement.dir:null,r=(t.body?t.body.dir:null)||n;this.value="ltr"===r||"rtl"===r?r:"ltr"}}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),e}()).ngInjectableDef=ge({factory:function(){return new mp(Fe(Ap,8))},token:mp,providedIn:"root"}),mp),Dp=function e(){_classCallCheck(this,e)},Rp=function e(){_classCallCheck(this,e)};function xp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:e,options:t}}function Op(e){return{type:6,styles:e,offset:null}}function Pp(e){Promise.resolve(null).then(e)}var Mp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+n}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var e=this;Pp((function(){return e._onFinish()}))}},{key:"_onStart",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(e){}},{key:"getPosition",value:function(){return 0}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}(),Lp=function(){function e(t){var n=this;_classCallCheck(this,e),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var r=0,i=0,o=0,a=this.players.length;0==a?Pp((function(){return n._onFinish()})):this.players.forEach((function(e){e.onDone((function(){++r==a&&n._onFinish()})),e.onDestroy((function(){++i==a&&n._onDestroy()})),e.onStart((function(){++o==a&&n._onStart()}))})),this.totalTime=this.players.reduce((function(e,t){return Math.max(e,t.totalTime)}),0)}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach((function(e){return e.init()}))}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[])}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach((function(e){return e.play()}))}},{key:"pause",value:function(){this.players.forEach((function(e){return e.pause()}))}},{key:"restart",value:function(){this.players.forEach((function(e){return e.restart()}))}},{key:"finish",value:function(){this._onFinish(),this.players.forEach((function(e){return e.finish()}))}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach((function(e){return e.destroy()})),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach((function(e){return e.reset()})),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(e){var t=e*this.totalTime;this.players.forEach((function(e){var n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)}))}},{key:"getPosition",value:function(){var e=0;return this.players.forEach((function(t){var n=t.getPosition();e=Math.min(n,e)})),e}},{key:"beforeDestroy",value:function(){this.players.forEach((function(e){e.beforeDestroy&&e.beforeDestroy()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}}]),e}();function Fp(){return"undefined"!=typeof process}function Vp(e){switch(e.length){case 0:return new Mp;case 1:return e[0];default:return new Lp(e)}}function Up(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=[],s=[],u=-1,c=null;if(r.forEach((function(e){var n=e.offset,r=n==u,l=r&&c||{};Object.keys(e).forEach((function(n){var r=n,s=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,a),s){case"!":s=i[n];break;case"*":s=o[n];break;default:s=t.normalizeStyleValue(n,r,s,a)}l[r]=s})),r||s.push(l),c=l,u=n})),a.length){var l="\n - ";throw new Error("Unable to animate due to the following errors:".concat(l).concat(a.join(l)))}return s}function Bp(e,t,n,r){switch(t){case"start":e.onStart((function(){return r(n&&jp(n,"start",e))}));break;case"done":e.onDone((function(){return r(n&&jp(n,"done",e))}));break;case"destroy":e.onDestroy((function(){return r(n&&jp(n,"destroy",e))}))}}function jp(e,t,n){var r=n.totalTime,i=qp(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),o=e._data;return null!=o&&(i._data=o),i}function qp(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function zp(e,t,n){var r;return e instanceof Map?(r=e.get(t))||e.set(t,r=n):(r=e[t])||(r=e[t]=n),r}function Hp(e){var t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}var Kp=function(e,t){return!1},Wp=function(e,t){return!1},Gp=function(e,t,n){return[]},Qp=Fp();(Qp||"undefined"!=typeof Element)&&(Kp=function(e,t){return e.contains(t)},Wp=function(){if(Qp||Element.prototype.matches)return function(e,t){return e.matches(t)};var e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?function(e,n){return t.apply(e,[n])}:Wp}(),Gp=function(e,t,n){var r=[];if(n)r.push.apply(r,_toConsumableArray(e.querySelectorAll(t)));else{var i=e.querySelector(t);i&&r.push(i)}return r});var Yp=null,Xp=!1;function Zp(e){Yp||(Yp=("undefined"!=typeof document?document.body:null)||{},Xp=!!Yp.style&&"WebkitAppearance"in Yp.style);var t=!0;return Yp.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(!(t=e in Yp.style)&&Xp)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Yp.style),t}var Jp=Wp,$p=Kp,ev=Gp;function tv(e){var t={};return Object.keys(e).forEach((function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]})),t}var nv=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return Zp(e)}},{key:"matchesElement",value:function(e,t){return Jp(e,t)}},{key:"containsElement",value:function(e,t){return $p(e,t)}},{key:"query",value:function(e,t,n){return ev(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return n||""}},{key:"animate",value:function(e,t,n,r,i){arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&arguments[6];return new Mp(n,r)}}]),e}(),rv=function(){var e=function e(){_classCallCheck(this,e)};return e.NOOP=new nv,e}();function iv(e){if("number"==typeof e)return e;var t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ov(parseFloat(t[1]),t[2])}function ov(e,t){switch(t){case"s":return 1e3*e;default:return e}}function av(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){var r,i=0,o="";if("string"==typeof e){var a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push('The provided timing value "'.concat(e,'" is invalid.')),{duration:0,delay:0,easing:""};r=ov(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=ov(parseFloat(s),a[4]));var u=a[5];u&&(o=u)}else r=e;if(!n){var c=!1,l=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),c=!0),i<0&&(t.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&t.splice(l,0,'The provided timing value "'.concat(e,'" is invalid.'))}return{duration:r,delay:i,easing:o}}(e,t,n)}function sv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).forEach((function(n){t[n]=e[n]})),t}function uv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t)for(var r in e)n[r]=e[r];else sv(e,n);return n}function cv(e,t,n){return n?t+":"+n+";":""}function lv(e){for(var t="",n=0;n<e.style.length;n++){var r=e.style.item(n);t+=cv(0,r,e.style.getPropertyValue(r))}for(var i in e.style)e.style.hasOwnProperty(i)&&!i.startsWith("_")&&(t+=cv(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[i]));e.setAttribute("style",t)}function hv(e,t,n){e.style&&(Object.keys(t).forEach((function(r){var i=_v(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[i]),e.style[i]=t[r]})),Fp()&&lv(e))}function fv(e,t){e.style&&(Object.keys(t).forEach((function(t){var n=_v(t);e.style[n]=""})),Fp()&&lv(e))}function dv(e){return Array.isArray(e)?1==e.length?e[0]:xp(e):e}var pv=new RegExp("{{\\s*(.+?)\\s*}}","g");function vv(e){var t=[];if("string"==typeof e){for(var n,r=e.toString();n=pv.exec(r);)t.push(n[1]);pv.lastIndex=0}return t}function mv(e,t,n){var r=e.toString(),i=r.replace(pv,(function(e,r){var i=t[r];return t.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),i=""),i.toString()}));return i==r?e:i}function yv(e){for(var t=[],n=e.next();!n.done;)t.push(n.value),n=e.next();return t}var gv=/-+([a-z0-9])/g;function _v(e){return e.replace(gv,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[1].toUpperCase()}))}function bv(e,t){return 0===e||0===t}function wv(e,t,n){var r=Object.keys(n);if(r.length&&t.length){var i=t[0],o=[];if(r.forEach((function(e){i.hasOwnProperty(e)||o.push(e),i[e]=n[e]})),o.length)for(var a=function(){var n=t[s];o.forEach((function(t){n[t]=Cv(e,t)}))},s=1;s<t.length;s++)a()}return t}function kv(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error("Unable to resolve animation metadata node #".concat(t.type))}}function Cv(e,t){return window.getComputedStyle(e)[t]}var Sv=new Set(["true","1"]),Ev=new Set(["false","0"]);function Tv(e,t){var n=Sv.has(e)||Ev.has(e),r=Sv.has(t)||Ev.has(t);return function(i,o){var a="*"==e||e==i,s="*"==t||t==o;return!a&&n&&"boolean"==typeof i&&(a=i?Sv.has(e):Ev.has(e)),!s&&r&&"boolean"==typeof o&&(s=o?Sv.has(t):Ev.has(t)),a&&s}}var Iv=new RegExp("s*:selfs*,?","g");function Av(e,t,n){return new Nv(e).build(t,n)}var Nv=function(){function e(t){_classCallCheck(this,e),this._driver=t}return _createClass(e,[{key:"build",value:function(e,t){var n=new Dv(t);return this._resetContextStyleTimingState(n),kv(this,dv(e),n)}},{key:"_resetContextStyleTimingState",value:function(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}},{key:"visitTrigger",value:function(e,t){var n=this,r=t.queryCount=0,i=t.depCount=0,o=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach((function(e){if(n._resetContextStyleTimingState(t),0==e.type){var s=e,u=s.name;u.toString().split(/\s*,\s*/).forEach((function(e){s.name=e,o.push(n.visitState(s,t))})),s.name=u}else if(1==e.type){var c=n.visitTransition(e,t);r+=c.queryCount,i+=c.depCount,a.push(c)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")})),{type:7,name:e.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(e,t){var n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach((function(e){if(Rv(e)){var t=e;Object.keys(t).forEach((function(e){vv(t[e]).forEach((function(e){o.hasOwnProperty(e)||i.add(e)}))}))}})),i.size){var a=yv(i.values());t.errors.push('state("'.concat(e.name,'", ...) must define default values for all the following style substitutions: ').concat(a.join(", ")))}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(e,t){t.queryCount=0,t.depCount=0;var n,r,i,o=kv(this,dv(e.animation),t);return{type:1,matchers:(n=e.expr,r=t.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach((function(e){return function(e,t,n){if(":"==e[0]){var r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(e,t){return parseFloat(t)>parseFloat(e)};case":decrement":return function(e,t){return parseFloat(t)<parseFloat(e)};default:return t.push('The transition alias value "'.concat(e,'" is not supported')),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}var i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(e,'" is not supported')),t;var o=i[1],a=i[2],s=i[3];t.push(Tv(o,s)),"<"!=a[0]||"*"==o&&"*"==s||t.push(Tv(s,o))}(e,i,r)})):i.push(n),i),animation:o,queryCount:t.queryCount,depCount:t.depCount,options:xv(e.options)}}},{key:"visitSequence",value:function(e,t){var n=this;return{type:2,steps:e.steps.map((function(e){return kv(n,e,t)})),options:xv(e.options)}}},{key:"visitGroup",value:function(e,t){var n=this,r=t.currentTime,i=0,o=e.steps.map((function(e){t.currentTime=r;var o=kv(n,e,t);return i=Math.max(i,t.currentTime),o}));return t.currentTime=i,{type:3,steps:o,options:xv(e.options)}}},{key:"visitAnimate",value:function(e,t){var n,r=function(e,t){var n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return Ov(av(e,t).duration,0,"");var r=e;if(r.split(/\s+/).some((function(e){return"{"==e.charAt(0)&&"{"==e.charAt(1)}))){var i=Ov(0,0,"");return i.dynamic=!0,i.strValue=r,i}return Ov((n=n||av(r,t)).duration,n.delay,n.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;var i=e.styles?e.styles:Op({});if(5==i.type)n=this.visitKeyframes(i,t);else{var o=e.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=Op(s)}t.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,t);u.isEmptyStep=a,n=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(e,t){var n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}},{key:"_makeStyleAst",value:function(e,t){var n=[];Array.isArray(e.styles)?e.styles.forEach((function(e){"string"==typeof e?"*"==e?n.push(e):t.errors.push("The provided style string value ".concat(e," is not allowed.")):n.push(e)})):n.push(e.styles);var r=!1,i=null;return n.forEach((function(e){if(Rv(e)){var t=e,n=t.easing;if(n&&(i=n,delete t.easing),!r)for(var o in t)if(t[o].toString().indexOf("{{")>=0){r=!0;break}}})),{type:6,styles:n,easing:i,offset:e.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(e,t){var n=this,r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach((function(e){"string"!=typeof e&&Object.keys(e).forEach((function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,c,l,h=t.collectedStyles[t.currentQuerySelector],f=h[r],d=!0;f&&(o!=i&&o>=f.startTime&&i<=f.endTime&&(t.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(f.startTime,'ms" and "').concat(f.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(o,'ms" and "').concat(i,'ms"')),d=!1),o=f.startTime),d&&(h[r]={startTime:o,endTime:i}),t.options&&(a=e[r],s=t.options,u=t.errors,c=s.params||{},(l=vv(a)).length&&l.forEach((function(e){c.hasOwnProperty(e)||u.push("Unable to resolve the local animation param ".concat(e," in the given list of values"))})))}else t.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))}))}))}},{key:"visitKeyframes",value:function(e,t){var n=this,r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,c=e.steps.map((function(e){var r=n._makeStyleAst(e,t),c=null!=r.offset?r.offset:function(e){if("string"==typeof e)return null;var t=null;if(Array.isArray(e))e.forEach((function(e){if(Rv(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}}));else if(Rv(e)&&e.hasOwnProperty("offset")){var n=e;t=parseFloat(n.offset),delete n.offset}return t}(r.styles),l=0;return null!=c&&(i++,l=r.offset=c),s=s||l<0||l>1,a=a||l<u,u=l,o.push(l),r}));s&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");var l=e.steps.length,h=0;i>0&&i<l?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(l-1));var f=l-1,d=t.currentTime,p=t.currentAnimateTimings,v=p.duration;return c.forEach((function(e,i){var a=h>0?i==f?1:h*i:o[i],s=a*v;t.currentTime=d+p.delay+s,p.duration=s,n._validateStyleAst(e,t),e.offset=a,r.styles.push(e)})),r}},{key:"visitReference",value:function(e,t){return{type:8,animation:kv(this,dv(e.animation),t),options:xv(e.options)}}},{key:"visitAnimateChild",value:function(e,t){return t.depCount++,{type:9,options:xv(e.options)}}},{key:"visitAnimateRef",value:function(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:xv(e.options)}}},{key:"visitQuery",value:function(e,t){var n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;var i=_slicedToArray(function(e){var t=!!e.split(/\s*,\s*/).find((function(e){return":self"==e}));return t&&(e=e.replace(Iv,"")),[e=e.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,(function(e){return".ng-trigger-"+e.substr(1)})).replace(/:animating/g,".ng-animating"),t]}(e.selector),2),o=i[0],a=i[1];t.currentQuerySelector=n.length?n+" "+o:o,zp(t.collectedStyles,t.currentQuerySelector,{});var s=kv(this,dv(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:s,originalSelector:e.selector,options:xv(e.options)}}},{key:"visitStagger",value:function(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");var n="full"===e.timings?{duration:0,delay:0,easing:"full"}:av(e.timings,t.errors,!0);return{type:12,animation:kv(this,dv(e.animation),t),timings:n,options:null}}}]),e}(),Dv=function e(t){_classCallCheck(this,e),this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function Rv(e){return!Array.isArray(e)&&"object"==typeof e}function xv(e){var t;return e?(e=sv(e)).params&&(e.params=(t=e.params)?sv(t):null):e={},e}function Ov(e,t,n){return{duration:e,delay:t,easing:n}}function Pv(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var Mv=function(){function e(){_classCallCheck(this,e),this._map=new Map}return _createClass(e,[{key:"consume",value:function(e){var t=this._map.get(e);return t?this._map.delete(e):t=[],t}},{key:"append",value:function(e,t){var n,r=this._map.get(e);r||this._map.set(e,r=[]),(n=r).push.apply(n,_toConsumableArray(t))}},{key:"has",value:function(e){return this._map.has(e)}},{key:"clear",value:function(){this._map.clear()}}]),e}(),Lv=new RegExp(":enter","g"),Fv=new RegExp(":leave","g");function Vv(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new Uv).buildKeyframes(e,t,n,r,i,o,a,s,u,c)}var Uv=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"buildKeyframes",value:function(e,t,n,r,i,o,a,s,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new Mv;var l=new jv(e,t,u,r,i,c,[]);l.options=s,l.currentTimeline.setStyles([o],null,l.errors,s),kv(this,n,l);var h=l.timelines.filter((function(e){return e.containsAnimation()}));if(h.length&&Object.keys(a).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,l.errors,s)}return h.length?h.map((function(e){return e.buildKeyframes()})):[Pv(t,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(e,t){}},{key:"visitState",value:function(e,t){}},{key:"visitTransition",value:function(e,t){}},{key:"visitAnimateChild",value:function(e,t){var n=t.subInstructions.consume(t.element);if(n){var r=t.createSubContext(e.options),i=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}},{key:"visitAnimateRef",value:function(e,t){var n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}},{key:"_visitSubInstructions",value:function(e,t,n){var r=t.currentTimeline.currentTime,i=null!=n.duration?iv(n.duration):null,o=null!=n.delay?iv(n.delay):null;return 0!==i&&e.forEach((function(e){var n=t.appendInstructionToTimeline(e,i,o);r=Math.max(r,n.duration+n.delay)})),r}},{key:"visitReference",value:function(e,t){t.updateOptions(e.options,!0),kv(this,e.animation,t),t.previousNode=e}},{key:"visitSequence",value:function(e,t){var n=this,r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&((i=t.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Bv);var a=iv(o.delay);i.delayNextStep(a)}e.steps.length&&(e.steps.forEach((function(e){return kv(n,e,i)})),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}},{key:"visitGroup",value:function(e,t){var n=this,r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?iv(e.options.delay):0;e.steps.forEach((function(a){var s=t.createSubContext(e.options);o&&s.delayNextStep(o),kv(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)})),r.forEach((function(e){return t.currentTimeline.mergeTimelineCollectedStyles(e)})),t.transformIntoNewTimeline(i),t.previousNode=e}},{key:"_visitTiming",value:function(e,t){if(e.dynamic){var n=e.strValue;return av(t.params?mv(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}},{key:"visitAnimate",value:function(e,t){var n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());var i=e.style;5==i.type?this.visitKeyframes(i,t):(t.incrementTime(n.duration),this.visitStyle(i,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}},{key:"visitStyle",value:function(e,t){var n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(i):n.setStyles(e.styles,i,t.errors,t.options),t.previousNode=e}},{key:"visitKeyframes",value:function(e,t){var n=t.currentAnimateTimings,r=t.currentTimeline.duration,i=n.duration,o=t.createSubContext().currentTimeline;o.easing=n.easing,e.styles.forEach((function(e){o.forwardTime((e.offset||0)*i),o.setStyles(e.styles,e.easing,t.errors,t.options),o.applyStylesToKeyframe()})),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(r+i),t.previousNode=e}},{key:"visitQuery",value:function(e,t){var n=this,r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?iv(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Bv);var a=r,s=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=s.length;var u=null;s.forEach((function(r,i){t.currentQueryIndex=i;var s=t.createSubContext(e.options,r);o&&s.delayNextStep(o),r===t.element&&(u=s.currentTimeline),kv(n,e.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)})),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}},{key:"visitStagger",value:function(e,t){var n=t.parentContext,r=t.currentTimeline,i=e.timings,o=Math.abs(i.duration),a=o*(t.currentQueryTotal-1),s=o*t.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=t.currentTimeline;s&&u.delayNextStep(s);var c=u.currentTime;kv(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}]),e}(),Bv={},jv=function(){function e(t,n,r,i,o,a,s,u){_classCallCheck(this,e),this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=a,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Bv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new qv(this._driver,n,0),s.push(this.currentTimeline)}return _createClass(e,[{key:"updateOptions",value:function(e,t){var n=this;if(e){var r=e,i=this.options;null!=r.duration&&(i.duration=iv(r.duration)),null!=r.delay&&(i.delay=iv(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach((function(e){t&&a.hasOwnProperty(e)||(a[e]=mv(o[e],a,n.errors))}))}}}},{key:"_copyOptions",value:function(){var e={};if(this.options){var t=this.options.params;if(t){var n=e.params={};Object.keys(t).forEach((function(e){n[e]=t[e]}))}}return e}},{key:"createSubContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,o=new e(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}},{key:"transformIntoNewTimeline",value:function(e){return this.previousNode=Bv,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(e,t,n){var r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},i=new zv(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}},{key:"delayNextStep",value:function(e){e>0&&this.currentTimeline.delayNextStep(e)}},{key:"invokeQuery",value:function(e,t,n,r,i,o){var a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Lv,"."+this._enterClassName)).replace(Fv,"."+this._leaveClassName);var s=this._driver.query(this.element,e,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),a.push.apply(a,_toConsumableArray(s))}return i||0!=a.length||o.push('`query("'.concat(t,'")` returned zero elements. (Use `query("').concat(t,'", { optional: true })` if you wish to allow this.)')),a}},{key:"params",get:function(){return this.options.params}}]),e}(),qv=function(){function e(t,n,r,i){_classCallCheck(this,e),this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return _createClass(e,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"delayNextStep",value:function(e){var t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}},{key:"fork",value:function(t,n){return this.applyStylesToKeyframe(),new e(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}},{key:"_updateStyle",value:function(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(e){var t=this;e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach((function(e){t._backFill[e]=t._globalTimelineStyles[e]||"*",t._currentKeyframe[e]="*"})),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(e,t,n,r){var i=this;t&&(this._previousKeyframe.easing=t);var o=r&&r.params||{},a=function(e,t){var n,r={};return e.forEach((function(e){"*"===e?(n=n||Object.keys(t)).forEach((function(e){r[e]="*"})):uv(e,!1,r)})),r}(e,this._globalTimelineStyles);Object.keys(a).forEach((function(e){var t=mv(a[e],o,n);i._pendingStyles[e]=t,i._localTimelineStyles.hasOwnProperty(e)||(i._backFill[e]=i._globalTimelineStyles.hasOwnProperty(e)?i._globalTimelineStyles[e]:"*"),i._updateStyle(e,t)}))}},{key:"applyStylesToKeyframe",value:function(){var e=this,t=this._pendingStyles,n=Object.keys(t);0!=n.length&&(this._pendingStyles={},n.forEach((function(n){e._currentKeyframe[n]=t[n]})),Object.keys(this._localTimelineStyles).forEach((function(t){e._currentKeyframe.hasOwnProperty(t)||(e._currentKeyframe[t]=e._localTimelineStyles[t])})))}},{key:"snapshotCurrentStyles",value:function(){var e=this;Object.keys(this._localTimelineStyles).forEach((function(t){var n=e._localTimelineStyles[t];e._pendingStyles[t]=n,e._updateStyle(t,n)}))}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"mergeTimelineCollectedStyles",value:function(e){var t=this;Object.keys(e._styleSummary).forEach((function(n){var r=t._styleSummary[n],i=e._styleSummary[n];(!r||i.time>r.time)&&t._updateStyle(n,i.value)}))}},{key:"buildKeyframes",value:function(){var e=this;this.applyStylesToKeyframe();var t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach((function(o,a){var s=uv(o,!0);Object.keys(s).forEach((function(e){var r=s[e];"!"==r?t.add(e):"*"==r&&n.add(e)})),r||(s.offset=a/e.duration),i.push(s)}));var o=t.size?yv(t.values()):[],a=n.size?yv(n.values()):[];if(r){var s=i[0],u=sv(s);s.offset=0,u.offset=1,i=[s,u]}return Pv(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"properties",get:function(){var e=[];for(var t in this._currentKeyframe)e.push(t);return e}}]),e}(),zv=function(e){function t(e,n,r,i,o,a){var s,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return _classCallCheck(this,t),(s=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,a.delay))).element=n,s.keyframes=r,s.preStyleProps=i,s.postStyleProps=o,s._stretchStartingKeyframe=u,s.timings={duration:a.duration,delay:a.delay,easing:a.easing},s}return _inherits(t,e),_createClass(t,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var e=this.keyframes,t=this.timings,n=t.delay,r=t.duration,i=t.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=uv(e[0],!1);u.offset=0,o.push(u);var c=uv(e[0],!1);c.offset=Hv(s),o.push(c);for(var l=e.length-1,h=1;h<=l;h++){var f=uv(e[h],!1);f.offset=Hv((n+f.offset*r)/a),o.push(f)}r=a,n=0,i="",e=o}return Pv(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),t}(qv);function Hv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,t-1);return Math.round(e*n)/n}var Kv=function e(){_classCallCheck(this,e)},Wv=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"normalizePropertyName",value:function(e,t){return _v(e)}},{key:"normalizeStyleValue",value:function(e,t,n,r){var i="",o=n.toString().trim();if(Gv[t]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for ".concat(e,":").concat(n))}return o+i}}]),t}(Kv),Gv=function(e){var t={};return e.forEach((function(e){return t[e]=!0})),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function Qv(e,t,n,r,i,o,a,s,u,c,l,h,f){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var Yv={},Xv=function(){function e(t,n,r){_classCallCheck(this,e),this._triggerName=t,this.ast=n,this._stateStyles=r}return _createClass(e,[{key:"match",value:function(e,t,n,r){return function(e,t,n,r,i){return e.some((function(e){return e(t,n,r,i)}))}(this.ast.matchers,e,t,n,r)}},{key:"buildStyles",value:function(e,t,n){var r=this._stateStyles["*"],i=this._stateStyles[e],o=r?r.buildStyles(t,n):{};return i?i.buildStyles(t,n):o}},{key:"build",value:function(e,t,n,r,i,o,a,s,u,c){var l=[],h=this.ast.options&&this.ast.options.params||Yv,f=this.buildStyles(n,a&&a.params||Yv,l),d=s&&s.params||Yv,p=this.buildStyles(r,d,l),v=new Set,m=new Map,y=new Map,g="void"===r,_={params:Object.assign({},h,d)},b=c?[]:Vv(e,t,this.ast.animation,i,o,f,p,_,u,l),w=0;if(b.forEach((function(e){w=Math.max(e.duration+e.delay,w)})),l.length)return Qv(t,this._triggerName,n,r,g,f,p,[],[],m,y,w,l);b.forEach((function(e){var n=e.element,r=zp(m,n,{});e.preStyleProps.forEach((function(e){return r[e]=!0}));var i=zp(y,n,{});e.postStyleProps.forEach((function(e){return i[e]=!0})),n!==t&&v.add(n)}));var k=yv(v.values());return Qv(t,this._triggerName,n,r,g,f,p,b,k,m,y,w)}}]),e}(),Zv=function(){function e(t,n){_classCallCheck(this,e),this.styles=t,this.defaultParams=n}return _createClass(e,[{key:"buildStyles",value:function(e,t){var n={},r=sv(this.defaultParams);return Object.keys(e).forEach((function(t){var n=e[t];null!=n&&(r[t]=n)})),this.styles.styles.forEach((function(e){if("string"!=typeof e){var i=e;Object.keys(i).forEach((function(e){var o=i[e];o.length>1&&(o=mv(o,r,t)),n[e]=o}))}})),n}}]),e}(),Jv=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.name=t,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach((function(e){r.states[e.name]=new Zv(e.style,e.options&&e.options.params||{})})),$v(this.states,"true","1"),$v(this.states,"false","0"),n.transitions.forEach((function(e){r.transitionFactories.push(new Xv(t,e,r.states))})),this.fallbackTransition=new Xv(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(e,t){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _createClass(e,[{key:"matchTransition",value:function(e,t,n,r){return this.transitionFactories.find((function(i){return i.match(e,t,n,r)}))||null}},{key:"matchStyles",value:function(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}},{key:"containsQueries",get:function(){return this.ast.queryCount>0}}]),e}();function $v(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}var em=new Mv,tm=function(){function e(t,n,r){_classCallCheck(this,e),this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return _createClass(e,[{key:"register",value:function(e,t){var n=[],r=Av(this._driver,t,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[e]=r}},{key:"_buildPlayer",value:function(e,t,n){var r=e.element,i=Up(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,i,e.duration,e.delay,e.easing,[],!0)}},{key:"create",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],a=this._animations[e],s=new Map;if(a?(n=Vv(this._driver,t,a,"ng-enter","ng-leave",{},{},i,em,o)).forEach((function(e){var t=zp(s,e.element,{});e.postStyleProps.forEach((function(e){return t[e]=null}))})):(o.push("The requested animation doesn't exist or has already been destroyed"),n=[]),o.length)throw new Error("Unable to create the animation due to the following errors: ".concat(o.join("\n")));s.forEach((function(e,t){Object.keys(e).forEach((function(n){e[n]=r._driver.computeStyle(t,n,"*")}))}));var u=Vp(n.map((function(e){var t=s.get(e.element);return r._buildPlayer(e,{},t)})));return this._playersById[e]=u,u.onDestroy((function(){return r.destroy(e)})),this.players.push(u),u}},{key:"destroy",value:function(e){var t=this._getPlayer(e);t.destroy(),delete this._playersById[e];var n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(e){var t=this._playersById[e];if(!t)throw new Error("Unable to find the timeline player referenced by ".concat(e));return t}},{key:"listen",value:function(e,t,n,r){var i=qp(t,"","","");return Bp(this._getPlayer(e),n,i,r),function(){}}},{key:"command",value:function(e,t,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(e);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}else this.create(e,t,r[0]||{});else this.register(e,r[0])}}]),e}(),nm=[],rm={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},im={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},om=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,e),this.namespaceId=n;var r,i=t&&t.hasOwnProperty("value");if(this.value=null!=(r=i?t.value:t)?r:null,i){var o=sv(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return _createClass(e,[{key:"absorbOptions",value:function(e){var t=e.params;if(t){var n=this.options.params;Object.keys(t).forEach((function(e){null==n[e]&&(n[e]=t[e])}))}}},{key:"params",get:function(){return this.options.params}}]),e}(),am=new om("void"),sm=function(){function e(t,n,r){_classCallCheck(this,e),this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,pm(n,this._hostClassName)}return _createClass(e,[{key:"listen",value:function(e,t,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(t))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(t,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(t,'" because the provided event is undefined!'));if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(t,'" is not supported!'));var a=zp(this._elementListeners,e,[]),s={name:t,phase:n,callback:r};a.push(s);var u=zp(this._engine.statesByElement,e,{});return u.hasOwnProperty(t)||(pm(e,"ng-trigger"),pm(e,"ng-trigger-"+t),u[t]=am),function(){o._engine.afterFlush((function(){var e=a.indexOf(s);e>=0&&a.splice(e,1),o._triggers[t]||delete u[t]}))}}},{key:"register",value:function(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}},{key:"_getTrigger",value:function(e){var t=this._triggers[e];if(!t)throw new Error('The provided animation trigger "'.concat(e,'" has not been registered!'));return t}},{key:"trigger",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this._getTrigger(t),a=new cm(this.id,t,e),s=this._engine.statesByElement.get(e);s||(pm(e,"ng-trigger"),pm(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,s={}));var u=s[t],c=new om(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),s[t]=c,u||(u=am),"void"===c.value||u.value!==c.value){var l=zp(this._engine.playersByElement,e,[]);l.forEach((function(e){e.namespaceId==r.id&&e.triggerName==t&&e.queued&&e.destroy()}));var h=o.matchTransition(u.value,c.value,e,c.params),f=!1;if(!h){if(!i)return;h=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:u,toState:c,player:a,isFallbackTransition:f}),f||(pm(e,"ng-animate-queued"),a.onStart((function(){vm(e,"ng-animate-queued")}))),a.onDone((function(){var t=r.players.indexOf(a);t>=0&&r.players.splice(t,1);var n=r._engine.playersByElement.get(e);if(n){var i=n.indexOf(a);i>=0&&n.splice(i,1)}})),this.players.push(a),l.push(a),a}if(!function(e,t){var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!t.hasOwnProperty(o)||e[o]!==t[o])return!1}return!0}(u.params,c.params)){var d=[],p=o.matchStyles(u.value,u.params,d),v=o.matchStyles(c.value,c.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush((function(){fv(e,p),hv(e,v)}))}}},{key:"deregister",value:function(e){var t=this;delete this._triggers[e],this._engine.statesByElement.forEach((function(t,n){delete t[e]})),this._elementListeners.forEach((function(n,r){t._elementListeners.set(r,n.filter((function(t){return t.name!=e})))}))}},{key:"clearElementCache",value:function(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);var t=this._engine.playersByElement.get(e);t&&(t.forEach((function(e){return e.destroy()})),this._engine.playersByElement.delete(e))}},{key:"_signalRemovalForInnerTriggers",value:function(e,t){var n=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._engine.driver.query(e,".ng-trigger",!0).forEach((function(e){if(!e.__ng_removed){var r=n._engine.fetchNamespacesByElement(e);r.size?r.forEach((function(n){return n.triggerLeaveAnimation(e,t,!1,!0)})):n.clearElementCache(e)}}))}},{key:"triggerLeaveAnimation",value:function(e,t,n,r){var i=this,o=this._engine.statesByElement.get(e);if(o){var a=[];if(Object.keys(o).forEach((function(t){if(i._triggers[t]){var n=i.trigger(e,t,"void",r);n&&a.push(n)}})),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&Vp(a).onDone((function(){return i._engine.processLeaveNode(e)})),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(e){var t=this,n=this._elementListeners.get(e);if(n){var r=new Set;n.forEach((function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=t._triggers[i].fallbackTransition,a=t._engine.statesByElement.get(e)[i]||am,s=new om("void"),u=new cm(t.id,i,e);t._engine.totalQueuedPlayers++,t._queue.push({element:e,triggerName:i,transition:o,fromState:a,toState:s,player:u,isFallbackTransition:!0})}}))}}},{key:"removeNode",value:function(e,t){var n=this,r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t,!0),!this.triggerLeaveAnimation(e,t,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else for(var a=e;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}this.prepareLeaveAnimationListeners(e),i?r.markElementAsRemoved(this.id,e,!1,t):(r.afterFlush((function(){return n.clearElementCache(e)})),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}},{key:"insertNode",value:function(e,t){pm(e,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(e){var t=this,n=[];return this._queue.forEach((function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=t._elementListeners.get(o);a&&a.forEach((function(t){if(t.name==r.triggerName){var n=qp(o,r.triggerName,r.fromState.value,r.toState.value);n._data=e,Bp(r.player,t.phase,n,t.callback)}})),i.markedForDestroy?t._engine.afterFlush((function(){i.destroy()})):n.push(r)}})),this._queue=[],n.sort((function(e,n){var r=e.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:t._engine.driver.containsElement(e.element,n.element)?1:-1}))}},{key:"destroy",value:function(e){this.players.forEach((function(e){return e.destroy()})),this._signalRemovalForInnerTriggers(this.hostElement,e)}},{key:"elementContainsData",value:function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find((function(t){return t.element===e}))||t}}]),e}(),um=function(){function e(t,n,r){_classCallCheck(this,e),this.bodyNode=t,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(e,t){}}return _createClass(e,[{key:"_onRemovalComplete",value:function(e,t){this.onRemovalComplete(e,t)}},{key:"createNamespace",value:function(e,t){var n=new sm(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}},{key:"_balanceNamespaceList",value:function(e,t){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,t)){this._namespaceList.splice(i+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}},{key:"register",value:function(e,t){var n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}},{key:"registerTrigger",value:function(e,t,n){var r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}},{key:"destroy",value:function(e,t){var n=this;if(e){var r=this._fetchNamespace(e);this.afterFlush((function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(r);t>=0&&n._namespaceList.splice(t,1)})),this.afterFlushAnimationsDone((function(){return r.destroy(t)}))}}},{key:"_fetchNamespace",value:function(e){return this._namespaceLookup[e]}},{key:"fetchNamespacesByElement",value:function(e){var t=new Set,n=this.statesByElement.get(e);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&t.add(a)}}return t}},{key:"trigger",value:function(e,t,n,r){if(lm(t)){var i=this._fetchNamespace(e);if(i)return i.trigger(t,n,r),!0}return!1}},{key:"insertNode",value:function(e,t,n,r){if(lm(t)){var i=t.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){var a=this._fetchNamespace(e);a&&a.insertNode(t,n)}r&&this.collectEnterElement(t)}}},{key:"collectEnterElement",value:function(e){this.collectedEnterElements.push(e)}},{key:"markElementAsDisabled",value:function(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),pm(e,"ng-animate-disabled")):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),vm(e,"ng-animate-disabled"))}},{key:"removeNode",value:function(e,t,n,r){if(lm(t)){var i=e?this._fetchNamespace(e):null;if(i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){var o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}},{key:"markElementAsRemoved",value:function(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(e,t,n,r,i){return lm(t)?this._fetchNamespace(e).listen(t,n,r,i):function(){}}},{key:"_buildInstruction",value:function(e,t,n,r,i){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,i)}},{key:"destroyInnerAnimations",value:function(e){var t=this,n=this.driver.query(e,".ng-trigger",!0);n.forEach((function(e){return t.destroyActiveAnimationsForElement(e)})),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,".ng-animating",!0)).forEach((function(e){return t.finishActiveQueriedAnimationOnElement(e)}))}},{key:"destroyActiveAnimationsForElement",value:function(e){var t=this.playersByElement.get(e);t&&t.forEach((function(e){e.queued?e.markedForDestroy=!0:e.destroy()}))}},{key:"finishActiveQueriedAnimationOnElement",value:function(e){var t=this.playersByQueriedElement.get(e);t&&t.forEach((function(e){return e.finish()}))}},{key:"whenRenderingDone",value:function(){var e=this;return new Promise((function(t){if(e.players.length)return Vp(e.players).onDone((function(){return t()}));t()}))}},{key:"processLeaveNode",value:function(e){var t=this,n=e.__ng_removed;if(n&&n.setForRemoval){if(e.__ng_removed=rm,n.namespaceId){this.destroyInnerAnimations(e);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}this.driver.matchesElement(e,".ng-animate-disabled")&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach((function(e){t.markElementAsDisabled(e,!1)}))}},{key:"flush",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((function(t,n){return e._balanceNamespaceList(t,n)})),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)pm(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,t)}finally{for(var o=0;o<i.length;o++)i[o]()}}else for(var a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach((function(e){return e()})),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?Vp(n).onDone((function(){s.forEach((function(e){return e()}))})):s.forEach((function(e){return e()}))}}},{key:"reportError",value:function(e){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(e.join("\n")))}},{key:"_flushAnimations",value:function(e,t){var n=this,r=new Mv,i=[],o=new Map,a=[],s=new Map,u=new Map,c=new Map,l=new Set;this.disabledNodes.forEach((function(e){l.add(e);for(var t=n.driver.query(e,".ng-animate-queued",!0),r=0;r<t.length;r++)l.add(t[r])}));var h=this.bodyNode,f=Array.from(this.statesByElement.keys()),d=dm(f,this.collectedEnterElements),p=new Map,v=0;d.forEach((function(e,t){var n="ng-enter"+v++;p.set(t,n),e.forEach((function(e){return pm(e,n)}))}));for(var m=[],y=new Set,g=new Set,_=0;_<this.collectedLeaveElements.length;_++){var b=this.collectedLeaveElements[_],w=b.__ng_removed;w&&w.setForRemoval&&(m.push(b),y.add(b),w.hasAnimation?this.driver.query(b,".ng-star-inserted",!0).forEach((function(e){return y.add(e)})):g.add(b))}var k=new Map,C=dm(f,Array.from(y));C.forEach((function(e,t){var n="ng-leave"+v++;k.set(t,n),e.forEach((function(e){return pm(e,n)}))})),e.push((function(){d.forEach((function(e,t){var n=p.get(t);e.forEach((function(e){return vm(e,n)}))})),C.forEach((function(e,t){var n=k.get(t);e.forEach((function(e){return vm(e,n)}))})),m.forEach((function(e){n.processLeaveNode(e)}))}));for(var S=[],E=[],T=this._namespaceList.length-1;T>=0;T--)this._namespaceList[T].drainQueuedTransitions(t).forEach((function(e){var t=e.player,o=e.element;if(S.push(t),n.collectedEnterElements.length){var l=o.__ng_removed;if(l&&l.setForMove)return void t.destroy()}var f=!h||!n.driver.containsElement(h,o),d=k.get(o),v=p.get(o),m=n._buildInstruction(e,r,v,d,f);if(!m.errors||!m.errors.length)return f?(t.onStart((function(){return fv(o,m.fromStyles)})),t.onDestroy((function(){return hv(o,m.toStyles)})),void i.push(t)):e.isFallbackTransition?(t.onStart((function(){return fv(o,m.fromStyles)})),t.onDestroy((function(){return hv(o,m.toStyles)})),void i.push(t)):(m.timelines.forEach((function(e){return e.stretchStartingKeyframe=!0})),r.append(o,m.timelines),a.push({instruction:m,player:t,element:o}),m.queriedElements.forEach((function(e){return zp(s,e,[]).push(t)})),m.preStyleProps.forEach((function(e,t){var n=Object.keys(e);if(n.length){var r=u.get(t);r||u.set(t,r=new Set),n.forEach((function(e){return r.add(e)}))}})),void m.postStyleProps.forEach((function(e,t){var n=Object.keys(e),r=c.get(t);r||c.set(t,r=new Set),n.forEach((function(e){return r.add(e)}))})));E.push(m)}));if(E.length){var I=[];E.forEach((function(e){I.push("@".concat(e.triggerName," has failed due to:\n")),e.errors.forEach((function(e){return I.push("- ".concat(e,"\n"))}))})),S.forEach((function(e){return e.destroy()})),this.reportError(I)}var A=new Map,N=new Map;a.forEach((function(e){var t=e.element;r.has(t)&&(N.set(t,t),n._beforeAnimationBuild(e.player.namespaceId,e.instruction,A))})),i.forEach((function(e){var t=e.element;n._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach((function(e){zp(A,t,[]).push(e),e.destroy()}))}));var D=m.filter((function(e){return ym(e,u,c)})),R=new Map;fm(R,this.driver,g,c,"*").forEach((function(e){ym(e,u,c)&&D.push(e)}));var x=new Map;d.forEach((function(e,t){fm(x,n.driver,new Set(e),u,"!")})),D.forEach((function(e){var t=R.get(e),n=x.get(e);R.set(e,Object.assign({},t,n))}));var O=[],P=[],M={};a.forEach((function(e){var t=e.element,a=e.player,s=e.instruction;if(r.has(t)){if(l.has(t))return a.onDestroy((function(){return hv(t,s.toStyles)})),a.disabled=!0,a.overrideTotalTime(s.totalTime),void i.push(a);var u=M;if(N.size>1){for(var c=t,h=[];c=c.parentNode;){var f=N.get(c);if(f){u=f;break}h.push(c)}h.forEach((function(e){return N.set(e,u)}))}var d=n._buildAnimation(a.namespaceId,s,A,o,x,R);if(a.setRealPlayer(d),u===M)O.push(a);else{var p=n.playersByElement.get(u);p&&p.length&&(a.parentPlayer=Vp(p)),i.push(a)}}else fv(t,s.fromStyles),a.onDestroy((function(){return hv(t,s.toStyles)})),P.push(a),l.has(t)&&i.push(a)})),P.forEach((function(e){var t=o.get(e.element);if(t&&t.length){var n=Vp(t);e.setRealPlayer(n)}})),i.forEach((function(e){e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()}));for(var L=0;L<m.length;L++){var F=m[L],V=F.__ng_removed;if(vm(F,"ng-leave"),!V||!V.hasAnimation){var U=[];if(s.size){var B=s.get(F);B&&B.length&&U.push.apply(U,_toConsumableArray(B));for(var j=this.driver.query(F,".ng-animating",!0),q=0;q<j.length;q++){var z=s.get(j[q]);z&&z.length&&U.push.apply(U,_toConsumableArray(z))}}var H=U.filter((function(e){return!e.destroyed}));H.length?mm(this,F,H):this.processLeaveNode(F)}}return m.length=0,O.forEach((function(e){n.players.push(e),e.onDone((function(){e.destroy();var t=n.players.indexOf(e);n.players.splice(t,1)})),e.play()})),O}},{key:"elementContainsData",value:function(e,t){var n=!1,r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}},{key:"afterFlush",value:function(e){this._flushFns.push(e)}},{key:"afterFlushAnimationsDone",value:function(e){this._whenQuietFns.push(e)}},{key:"_getPreviousPlayers",value:function(e,t,n,r,i){var o=[];if(t){var a=this.playersByQueriedElement.get(e);a&&(o=a)}else{var s=this.playersByElement.get(e);if(s){var u=!i||"void"==i;s.forEach((function(e){e.queued||(u||e.triggerName==r)&&o.push(e)}))}}return(n||r)&&(o=o.filter((function(e){return!(n&&n!=e.namespaceId||r&&r!=e.triggerName)}))),o}},{key:"_beforeAnimationBuild",value:function(e,t,n){var r=this,i=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName,s=!0,u=!1,c=void 0;try{for(var l,h=function(){var e=l.value.element,s=e!==i,u=zp(n,e,[]);r._getPreviousPlayers(e,s,o,a,t.toState).forEach((function(e){var t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),u.push(e)}))},f=t.timelines[Symbol.iterator]();!(s=(l=f.next()).done);s=!0)h()}catch(d){u=!0,c=d}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}fv(i,t.fromStyles)}},{key:"_buildAnimation",value:function(e,t,n,r,i,o){var a=this,s=t.triggerName,u=t.element,c=[],l=new Set,h=new Set,f=t.timelines.map((function(t){var f=t.element;l.add(f);var d=f.__ng_removed;if(d&&d.removedBeforeQueried)return new Mp(t.duration,t.delay);var p,v,m=f!==u,y=(p=(n.get(f)||nm).map((function(e){return e.getRealPlayer()})),v=[],function e(t,n){for(var r=0;r<t.length;r++){var i=t[r];i instanceof Lp?e(i.players,n):n.push(i)}}(p,v),v).filter((function(e){return!!e.element&&e.element===f})),g=i.get(f),_=o.get(f),b=Up(0,a._normalizer,0,t.keyframes,g,_),w=a._buildPlayer(t,b,y);if(t.subTimeline&&r&&h.add(f),m){var k=new cm(e,s,f);k.setRealPlayer(w),c.push(k)}return w}));c.forEach((function(e){zp(a.playersByQueriedElement,e.element,[]).push(e),e.onDone((function(){return function(e,t,n){var r;if(e instanceof Map){if(r=e.get(t)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&e.delete(t)}}else if(r=e[t]){if(r.length){var o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete e[t]}return r}(a.playersByQueriedElement,e.element,e)}))})),l.forEach((function(e){return pm(e,"ng-animating")}));var d=Vp(f);return d.onDestroy((function(){l.forEach((function(e){return vm(e,"ng-animating")})),hv(u,t.toStyles)})),h.forEach((function(e){zp(r,e,[]).push(d)})),d}},{key:"_buildPlayer",value:function(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Mp(e.duration,e.delay)}},{key:"queuedPlayers",get:function(){var e=[];return this._namespaceList.forEach((function(t){t.players.forEach((function(t){t.queued&&e.push(t)}))})),e}}]),e}(),cm=function(){function e(t,n,r){_classCallCheck(this,e),this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new Mp,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _createClass(e,[{key:"setRealPlayer",value:function(e){var t=this;this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach((function(n){t._queuedCallbacks[n].forEach((function(t){return Bp(e,n,void 0,t)}))})),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(e){this.totalTime=e}},{key:"syncPlayerEvents",value:function(e){var t=this,n=this._player;n.triggerCallback&&e.onStart((function(){return n.triggerCallback("start")})),e.onDone((function(){return t.finish()})),e.onDestroy((function(){return t.destroy()}))}},{key:"_queueEvent",value:function(e,t){zp(this._queuedCallbacks,e,[]).push(t)}},{key:"onDone",value:function(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}},{key:"onStart",value:function(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}},{key:"onDestroy",value:function(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(e){this.queued||this._player.setPosition(e)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(e){var t=this._player;t.triggerCallback&&t.triggerCallback(e)}}]),e}();function lm(e){return e&&1===e.nodeType}function hm(e,t){var n=e.style.display;return e.style.display=null!=t?t:"none",n}function fm(e,t,n,r,i){var o=[];n.forEach((function(e){return o.push(hm(e))}));var a=[];r.forEach((function(n,r){var o={};n.forEach((function(e){var n=o[e]=t.computeStyle(r,e,i);n&&0!=n.length||(r.__ng_removed=im,a.push(r))})),e.set(r,o)}));var s=0;return n.forEach((function(e){return hm(e,o[s++])})),a}function dm(e,t){var n=new Map;if(e.forEach((function(e){return n.set(e,[])})),0==t.length)return n;var r=new Set(t),i=new Map;return t.forEach((function(e){var t=function e(t){if(!t)return 1;var o=i.get(t);if(o)return o;var a=t.parentNode;return o=n.has(a)?a:r.has(a)?1:e(a),i.set(t,o),o}(e);1!==t&&n.get(t).push(e)})),n}function pm(e,t){if(e.classList)e.classList.add(t);else{var n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function vm(e,t){if(e.classList)e.classList.remove(t);else{var n=e.$$classes;n&&delete n[t]}}function mm(e,t,n){Vp(n).onDone((function(){return e.processLeaveNode(t)}))}function ym(e,t,n){var r=n.get(e);if(!r)return!1;var i=t.get(e);return i?r.forEach((function(e){return i.add(e)})):t.set(e,r),n.delete(e),!0}var gm=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.bodyNode=t,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(e,t){},this._transitionEngine=new um(t,n,r),this._timelineEngine=new tm(t,n,r),this._transitionEngine.onRemovalComplete=function(e,t){return i.onRemovalComplete(e,t)}}return _createClass(e,[{key:"registerTrigger",value:function(e,t,n,r,i){var o=e+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=Av(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));a=function(e,t){return new Jv(e,t)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}},{key:"register",value:function(e,t){this._transitionEngine.register(e,t)}},{key:"destroy",value:function(e,t){this._transitionEngine.destroy(e,t)}},{key:"onInsert",value:function(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}},{key:"onRemove",value:function(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}},{key:"disableAnimations",value:function(e,t){this._transitionEngine.markElementAsDisabled(e,t)}},{key:"process",value:function(e,t,n,r){if("@"==n.charAt(0)){var i=_slicedToArray(Hp(n),2),o=i[0],a=i[1];this._timelineEngine.command(o,t,a,r)}else this._transitionEngine.trigger(e,t,n,r)}},{key:"listen",value:function(e,t,n,r,i){if("@"==n.charAt(0)){var o=_slicedToArray(Hp(n),2),a=o[0],s=o[1];return this._timelineEngine.listen(a,t,s,i)}return this._transitionEngine.listen(e,t,n,r,i)}},{key:"flush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(e)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}}]),e}();function _m(e,t){var n=null,r=null;return Array.isArray(t)&&t.length?(n=wm(t[0]),t.length>1&&(r=wm(t[t.length-1]))):t&&(n=wm(t)),n||r?new bm(e,n,r):null}var bm=function(){var e=function(){function e(t,n,r){_classCallCheck(this,e),this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;var i=e.initialStylesByElement.get(t);i||e.initialStylesByElement.set(t,i={}),this._initialStyles=i}return _createClass(e,[{key:"start",value:function(){this._state<1&&(this._startStyles&&hv(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(hv(this._element,this._initialStyles),this._endStyles&&(hv(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(fv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fv(this._element,this._endStyles),this._endStyles=null),hv(this._element,this._initialStyles),this._state=3)}}]),e}();return e.initialStylesByElement=new WeakMap,e}();function wm(e){for(var t=null,n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];km(i)&&((t=t||{})[i]=e[i])}return t}function km(e){return"display"===e||"position"===e}var Cm=function(){function e(t,n,r,i,o,a,s){var u=this;_classCallCheck(this,e),this._element=t,this._name=n,this._duration=r,this._delay=i,this._easing=o,this._fillMode=a,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(e){return u._handleCallback(e)}}return _createClass(e,[{key:"apply",value:function(){var e,t,n;e=this._element,t="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=Nm(e,"").trim()).length&&(function(e,t){for(var n=0;n<e.length;n++)e.charAt(n)}(n),t="".concat(n,", ").concat(t)),Am(e,"",t),Im(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){Sm(this._element,this._name,"paused")}},{key:"resume",value:function(){Sm(this._element,this._name,"running")}},{key:"setPosition",value:function(e){var t=Em(this._element,this._name);this._position=e*this._duration,Am(this._element,"Delay","-".concat(this._position,"ms"),t)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(e){var t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),Im(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){var e,t,n,r;this._destroyed||(this._destroyed=!0,this.finish(),e=this._element,t=this._name,n=Nm(e,"").split(","),(r=Tm(n,t))>=0&&(n.splice(r,1),Am(e,"",n.join(","))))}}]),e}();function Sm(e,t,n){Am(e,"PlayState",n,Em(e,t))}function Em(e,t){var n=Nm(e,"");return n.indexOf(",")>0?Tm(n.split(","),t):Tm([n],t)}function Tm(e,t){for(var n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function Im(e,t,n){n?e.removeEventListener("animationend",t):e.addEventListener("animationend",t)}function Am(e,t,n,r){var i="animation"+t;if(null!=r){var o=e.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}e.style[i]=n}function Nm(e,t){return e.style["animation"+t]}var Dm=function(){function e(t,n,r,i,o,a,s,u){_classCallCheck(this,e),this.element=t,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=o,this._finalStyles=s,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=a||"linear",this.totalTime=i+o,this._buildStyler()}return _createClass(e,[{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(e){this._styler.setPosition(e)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var e=this;this._styler=new Cm(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",(function(){return e.finish()}))}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}},{key:"beforeDestroy",value:function(){var e=this;this.init();var t={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach((function(r){"offset"!=r&&(t[r]=n?e._finalStyles[r]:Cv(e.element,r))}))}this.currentSnapshot=t}}]),e}(),Rm=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).element=e,r._startingStyles={},r.__initialized=!1,r._styles=tv(n),r}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach((function(t){e._startingStyles[t]=e.element.style[t]})),_get(_getPrototypeOf(t.prototype),"init",this).call(this))}},{key:"play",value:function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach((function(t){return e.element.style.setProperty(t,e._styles[t])})),_get(_getPrototypeOf(t.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var e=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach((function(t){var n=e._startingStyles[t];n?e.element.style.setProperty(t,n):e.element.style.removeProperty(t)})),this._startingStyles=null,_get(_getPrototypeOf(t.prototype),"destroy",this).call(this))}}]),t}(Mp),xm=function(){function e(){_classCallCheck(this,e),this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return Zp(e)}},{key:"matchesElement",value:function(e,t){return Jp(e,t)}},{key:"containsElement",value:function(e,t){return $p(e,t)}},{key:"query",value:function(e,t,n){return ev(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"buildKeyframeElement",value:function(e,t,n){n=n.map((function(e){return tv(e)}));var r="@keyframes ".concat(t," {\n"),i="";n.forEach((function(e){i=" ";var t=parseFloat(e.offset);r+="".concat(i).concat(100*t,"% {\n"),i+=" ",Object.keys(e).forEach((function(t){var n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(t,": ").concat(n,";\n"))}})),r+="".concat(i,"}\n")})),r+="}\n";var o=document.createElement("style");return o.innerHTML=r,o}},{key:"animate",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;a&&this._notifyFaultyScrubber();var s=o.filter((function(e){return e instanceof Dm})),u={};bv(n,r)&&s.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return u[e]=t[e]}))}));var c=function(e){var t={};return e&&(Array.isArray(e)?e:[e]).forEach((function(e){Object.keys(e).forEach((function(n){"offset"!=n&&"easing"!=n&&(t[n]=e[n])}))})),t}(t=wv(e,t,u));if(0==n)return new Rm(e,c);var l="gen_css_kf_".concat(this._count++),h=this.buildKeyframeElement(e,l,t);document.querySelector("head").appendChild(h);var f=_m(e,t),d=new Dm(e,t,l,n,r,i,c,f);return d.onDestroy((function(){var e;(e=h).parentNode.removeChild(e)})),d}},{key:"_notifyFaultyScrubber",value:function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}]),e}(),Om=function(){function e(t,n,r,i){_classCallCheck(this,e),this.element=t,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return _createClass(e,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach((function(e){return e()})),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var e=this;if(!this._initialized){this._initialized=!0;var t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",(function(){return e._onFinish()}))}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(e,t,n){return e.animate(t,n)}},{key:"onStart",value:function(e){this._onStartFns.push(e)}},{key:"onDone",value:function(e){this._onDoneFns.push(e)}},{key:"onDestroy",value:function(e){this._onDestroyFns.push(e)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach((function(e){return e()})),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach((function(e){return e()})),this._onDestroyFns=[])}},{key:"setPosition",value:function(e){this.domPlayer.currentTime=e*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"beforeDestroy",value:function(){var e=this,t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach((function(n){"offset"!=n&&(t[n]=e._finished?e._finalKeyframe[n]:Cv(e.element,n))})),this.currentSnapshot=t}},{key:"triggerCallback",value:function(e){var t="start"==e?this._onStartFns:this._onDoneFns;t.forEach((function(e){return e()})),t.length=0}},{key:"totalTime",get:function(){return this._delay+this._duration}}]),e}(),Pm=function(){function e(){_classCallCheck(this,e),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Mm().toString()),this._cssKeyframesDriver=new xm}return _createClass(e,[{key:"validateStyleProperty",value:function(e){return Zp(e)}},{key:"matchesElement",value:function(e,t){return Jp(e,t)}},{key:"containsElement",value:function(e,t){return $p(e,t)}},{key:"query",value:function(e,t,n){return ev(e,t,n)}},{key:"computeStyle",value:function(e,t,n){return window.getComputedStyle(e)[t]}},{key:"overrideWebAnimationsSupport",value:function(e){this._isNativeImpl=e}},{key:"animate",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},c=o.filter((function(e){return e instanceof Om}));bv(n,r)&&c.forEach((function(e){var t=e.currentSnapshot;Object.keys(t).forEach((function(e){return u[e]=t[e]}))}));var l=_m(e,t=wv(e,t=t.map((function(e){return uv(e,!1)})),u));return new Om(e,t,s,l)}}]),e}();function Mm(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var Lm=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._nextAnimationId=0,r._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ke.None,styles:[],data:{animation:[]}}),r}return _inherits(t,e),_createClass(t,[{key:"build",value:function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?xp(e):e;return Um(this._renderer,null,t,"register",[n]),new Fm(t,this._renderer)}}]),t}(Rp),Fm=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._id=e,r._renderer=n,r}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e,t){return new Vm(this._id,e,t||{},this._renderer)}}]),t}(function(){return function e(){_classCallCheck(this,e)}}()),Vm=function(){function e(t,n,r,i){_classCallCheck(this,e),this.id=t,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return _createClass(e,[{key:"_listen",value:function(e,t){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(e),t)}},{key:"_command",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Um(this._renderer,this.element,this.id,e,n)}},{key:"onDone",value:function(e){this._listen("done",e)}},{key:"onStart",value:function(e){this._listen("start",e)}},{key:"onDestroy",value:function(e){this._listen("destroy",e)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(e){this._command("setPosition",e)}},{key:"getPosition",value:function(){return 0}}]),e}();function Um(e,t,n,r,i){return e.setProperty(t,"@@".concat(n,":").concat(r),i)}var Bm=function(){function e(t,n,r){_classCallCheck(this,e),this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return _createClass(e,[{key:"createRenderer",value:function(e,t){var n=this,r=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var i=this._rendererCache.get(r);return i||(i=new jm("",r,this.engine),this._rendererCache.set(r,i)),i}var o=t.id,a=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,e),t.data.animation.forEach((function(t){return n.engine.registerTrigger(o,a,e,t.name,t)})),new qm(this,a,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var e=this;this.promise.then((function(){e._microtaskId++}))}},{key:"scheduleListenerCallback",value:function(e,t,n){var r=this;e>=0&&e<this._microtaskId?this._zone.run((function(){return t(n)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){r._zone.run((function(){r._animationCallbacksBuffer.forEach((function(e){var t=_slicedToArray(e,2);(0,t[0])(t[1])})),r._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([t,n]))}},{key:"end",value:function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)})),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),e}(),jm=function(){function e(t,n,r){_classCallCheck(this,e),this.namespaceId=t,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(e){return n.destroyNode(e)}:null}return _createClass(e,[{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(e,t){return this.delegate.createElement(e,t)}},{key:"createComment",value:function(e){return this.delegate.createComment(e)}},{key:"createText",value:function(e){return this.delegate.createText(e)}},{key:"appendChild",value:function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}},{key:"insertBefore",value:function(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)}},{key:"removeChild",value:function(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}},{key:"selectRootElement",value:function(e,t){return this.delegate.selectRootElement(e,t)}},{key:"parentNode",value:function(e){return this.delegate.parentNode(e)}},{key:"nextSibling",value:function(e){return this.delegate.nextSibling(e)}},{key:"setAttribute",value:function(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}},{key:"removeAttribute",value:function(e,t,n){this.delegate.removeAttribute(e,t,n)}},{key:"addClass",value:function(e,t){this.delegate.addClass(e,t)}},{key:"removeClass",value:function(e,t){this.delegate.removeClass(e,t)}},{key:"setStyle",value:function(e,t,n,r){this.delegate.setStyle(e,t,n,r)}},{key:"removeStyle",value:function(e,t,n){this.delegate.removeStyle(e,t,n)}},{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)&&"@.disabled"==t?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}},{key:"setValue",value:function(e,t){this.delegate.setValue(e,t)}},{key:"listen",value:function(e,t,n){return this.delegate.listen(e,t,n)}},{key:"disableAnimations",value:function(e,t){this.engine.disableAnimations(e,t)}},{key:"data",get:function(){return this.delegate.data}}]),e}(),qm=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n,r,i))).factory=e,o.namespaceId=n,o}return _inherits(t,e),_createClass(t,[{key:"setProperty",value:function(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&"@.disabled"==t?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}},{key:"listen",value:function(e,t,n){var r,i,o=this;if("@"==t.charAt(0)){var a,s=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),u=t.substr(1),c="";return"@"!=u.charAt(0)&&(i=(r=u).indexOf("."),u=(a=_slicedToArray([r.substring(0,i),r.substr(i+1)],2))[0],c=a[1]),this.engine.listen(this.namespaceId,s,u,c,(function(e){o.factory.scheduleListenerCallback(e._data||-1,n,e)}))}return this.delegate.listen(e,t,n)}}]),t}(jm),zm=function(e){function t(e,n,r){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e.body,n,r))}return _inherits(t,e),t}(gm);function Hm(){return"function"==typeof Mm()?new Pm:new xm}function Km(){return new Wv}function Wm(e,t,n){return new Bm(e,t,n)}var Gm=new De("AnimationModuleType"),Qm=function e(){_classCallCheck(this,e)},Ym=Gn({encapsulation:2,styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media (hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-focus-overlay,.mat-stroked-button .mat-button-ripple.mat-ripple{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple.mat-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:#fff}}@media (-ms-high-contrast:black-on-white){.mat-button-focus-overlay{background-color:#000}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function Xm(e){return Jo(2,[qo(671088640,1,{ripple:0}),(e()(),Fo(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),Go(null,0),(e()(),Fo(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),ti(4,212992,[[1,4]],0,Cp,[on,Ji,Jd,[2,kp],[2,Gm]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(e()(),Fo(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],(function(e,t){var n=t.component;e(t,4,0,n.isIconButton,n._isRippleDisabled(),n._getHostElement())}),(function(e,t){var n=t.component;e(t,3,0,n.isRoundButton||n.isIconButton,qr(t,4).unbounded)}))}function Zm(){throw Error("Host already has a portal attached")}var Jm=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"attach",value:function(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&Zm(),this._attachedHost=e,e.attach(this)}},{key:"detach",value:function(){var e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}},{key:"setAttachedHost",value:function(e){this._attachedHost=e}},{key:"isAttached",get:function(){return null!=this._attachedHost}}]),e}(),$m=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).component=e,o.viewContainerRef=n,o.injector=r,o.componentFactoryResolver=i,o}return _inherits(t,e),t}(Jm),ey=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).templateRef=e,i.viewContainerRef=n,i.context=r,i}return _inherits(t,e),_createClass(t,[{key:"attach",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=n,_get(_getPrototypeOf(t.prototype),"attach",this).call(this,e)}},{key:"detach",value:function(){return this.context=void 0,_get(_getPrototypeOf(t.prototype),"detach",this).call(this)}},{key:"origin",get:function(){return this.templateRef.elementRef}}]),t}(Jm),ty=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).outletElement=e,o._componentFactoryResolver=n,o._appRef=r,o._defaultInjector=i,o}return _inherits(t,e),_createClass(t,[{key:"attachComponentPortal",value:function(e){var t,n=this,r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);return e.viewContainerRef?(t=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn((function(){return t.destroy()}))):(t=r.create(e.injector||this._defaultInjector),this._appRef.attachView(t.hostView),this.setDisposeFn((function(){n._appRef.detachView(t.hostView),t.destroy()}))),this.outletElement.appendChild(this._getComponentRootNode(t)),t}},{key:"attachTemplatePortal",value:function(e){var t=this,n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context);return r.detectChanges(),r.rootNodes.forEach((function(e){return t.outletElement.appendChild(e)})),this.setDisposeFn((function(){var e=n.indexOf(r);-1!==e&&n.remove(e)})),r}},{key:"dispose",value:function(){_get(_getPrototypeOf(t.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(e){return e.hostView.rootNodes[0]}}]),t}(function(){function e(){_classCallCheck(this,e),this._isDisposed=!1}return _createClass(e,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&Zm(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof $m?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof ey?(this._attachedPortal=e,this.attachTemplatePortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(e){this._disposeFn=e}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),e}()),ny=function e(){_classCallCheck(this,e)};function ry(e){return function(t){return t.lift(new iy(e))}}var iy=function(){function e(t){_classCallCheck(this,e),this.notifier=t}return _createClass(e,[{key:"call",value:function(e,t){var n=new oy(e),r=q(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}]),e}(),oy=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).seenValue=!1,n}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,n,r,i){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),t}(z);function ay(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ff,r=(t=e)instanceof Date&&!isNaN(+t)?+e-n.now():Math.abs(e);return function(e){return e.lift(new sy(r,n))}}var sy=function(){function e(t,n){_classCallCheck(this,e),this.delay=t,this.scheduler=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new uy(e,this.delay,this.scheduler))}}]),e}(),uy=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return _inherits(t,e),_createClass(t,[{key:"_schedule",value:function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}},{key:"scheduleNotification",value:function(e){if(!0!==this.errored){var t=this.scheduler,n=new cy(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}}},{key:"_next",value:function(e){this.scheduleNotification(Xf.createNext(e))}},{key:"_error",value:function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(Xf.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(e,o)}else this.unsubscribe(),t.active=!1}}]),t}(m),cy=function e(t,n){_classCallCheck(this,e),this.time=t,this.notification=n};function ly(e,t,n,i){return r(n)&&(i=n,n=void 0),i?ly(e,t,n).pipe(H((function(e){return u(e)?i.apply(void 0,_toConsumableArray(e)):i(e)}))):new C((function(r){!function e(t,n,r,i,o){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),a=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(n,r),a=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,h=t.length;l<h;l++)e(t[l],n,r,i,o)}i.add(a)}(e,t,(function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),r,n)}))}var hy=function(){function e(t){_classCallCheck(this,e),this.durationSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new fy(e,this.durationSelector))}}]),e}(),fy=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).durationSelector=n,r.hasValue=!1,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t;try{t=(0,this.durationSelector)(e)}catch(r){return this.destination.error(r)}var n=q(this,t);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}},{key:"notifyNext",value:function(e,t,n,r){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),t}(z);function dy(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function py(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ff;return t=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return Hf(t)?r=Number(t)<1?1:Number(t):x(t)&&(n=t),x(n)||(n=Ff),new C((function(t){var i=Hf(e)?e:+e-n.now();return n.schedule(dy,i,{index:0,period:r,subscriber:t})}))}(e,n)},function(e){return e.lift(new hy(t))}}var vy,my,yy=((vy=function(){function e(t,n){_classCallCheck(this,e),this._ngZone=t,this._platform=n,this._scrolled=new D,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}return _createClass(e,[{key:"register",value:function(e){var t=this;this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe((function(){return t._scrolled.next(e)})))}},{key:"deregister",value:function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}},{key:"scrolled",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new C((function(n){e._globalSubscription||e._addGlobalListener();var r=t>0?e._scrolled.pipe(py(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){r.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}})):Vs()}},{key:"ngOnDestroy",value:function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach((function(t,n){return e.deregister(n)})),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(e,t){var n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Gs((function(e){return!e||n.indexOf(e)>-1})))}},{key:"getAncestorScrollContainers",value:function(e){var t=this,n=[];return this.scrollContainers.forEach((function(r,i){t._scrollableContainsElement(i,e)&&n.push(i)})),n}},{key:"_scrollableContainsElement",value:function(e,t){var n=t.nativeElement,r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular((function(){return ly(window.document,"scroll").subscribe((function(){return e._scrolled.next()}))}))}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),e}()).ngInjectableDef=ge({factory:function(){return new vy(Fe(Ji),Fe(Jd))},token:vy,providedIn:"root"}),vy),gy=function e(){_classCallCheck(this,e)},_y=((my=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._platform=t,n.runOutsideAngular((function(){r._change=t.isBrowser?ee(ly(window,"resize"),ly(window,"orientationchange")):Vs(),r._invalidateCache=r.change().subscribe((function(){return r._updateViewportSize()}))}))}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._invalidateCache.unsubscribe()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}},{key:"getViewportRect",value:function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,r=t.height;return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=document.documentElement,t=e.getBoundingClientRect();return{top:-t.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-t.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e>0?this._change.pipe(py(e)):this._change}},{key:"_updateViewportSize",value:function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}]),e}()).ngInjectableDef=ge({factory:function(){return new my(Fe(Jd),Fe(Ji))},token:my,providedIn:"root"}),my),by=function(){function e(t,n){_classCallCheck(this,e),this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return _createClass(e,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Qd(-this._previousScrollPosition.left),e.style.top=Qd(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var e=this._document.documentElement,t=e.style,n=this._document.body.style,r=t.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.scrollBehavior=r,n.scrollBehavior=i}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}]),e}();function wy(){return Error("Scroll strategy has already been attached.")}var ky=function(){function e(t,n,r,i){var o=this;_classCallCheck(this,e),this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=function(){o.disable(),o._overlayRef.hasAttached()&&o._ngZone.run((function(){return o._overlayRef.detach()}))}}return _createClass(e,[{key:"attach",value:function(e){if(this._overlayRef)throw wy();this._overlayRef=e}},{key:"enable",value:function(){var e=this;if(!this._scrollSubscription){var t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe((function(){var t=e._viewportRuler.getViewportScrollPosition().top;Math.abs(t-e._initialScrollPosition)>e._config.threshold?e._detach():e._overlayRef.updatePosition()}))):this._scrollSubscription=t.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),Cy=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),e}();function Sy(e,t){return t.some((function(t){return e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right}))}function Ey(e,t){return t.some((function(t){return e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right}))}var Ty,Iy=function(){function e(t,n,r,i){_classCallCheck(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this._config=i,this._scrollSubscription=null}return _createClass(e,[{key:"attach",value:function(e){if(this._overlayRef)throw wy();this._overlayRef=e}},{key:"enable",value:function(){var e=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe((function(){if(e._overlayRef.updatePosition(),e._config&&e._config.autoClose){var t=e._overlayRef.overlayElement.getBoundingClientRect(),n=e._viewportRuler.getViewportSize(),r=n.width,i=n.height;Sy(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(e.disable(),e._ngZone.run((function(){return e._overlayRef.detach()})))}})))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),e}(),Ay=((Ty=function e(t,n,r,i){var o=this;_classCallCheck(this,e),this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=function(){return new Cy},this.close=function(e){return new ky(o._scrollDispatcher,o._ngZone,o._viewportRuler,e)},this.block=function(){return new by(o._viewportRuler,o._document)},this.reposition=function(e){return new Iy(o._scrollDispatcher,o._viewportRuler,o._ngZone,e)},this._document=i}).ngInjectableDef=ge({factory:function(){return new Ty(Fe(yy),Fe(_y),Fe(Ji),Fe(Ns))},token:Ty,providedIn:"root"}),Ty),Ny=function e(t){if(_classCallCheck(this,e),this.scrollStrategy=new Cy,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t)for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];void 0!==t[i]&&(this[i]=t[i])}},Dy=function e(t,n,r,i,o){_classCallCheck(this,e),this.offsetX=r,this.offsetY=i,this.panelClass=o,this.originX=t.originX,this.originY=t.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},Ry=function e(t,n){_classCallCheck(this,e),this.connectionPair=t,this.scrollableViewProperties=n};function xy(e,t){if("top"!==t&&"bottom"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid ".concat(e,' "').concat(t,'". ')+'Expected "top", "bottom" or "center".')}function Oy(e,t){if("start"!==t&&"end"!==t&&"center"!==t)throw Error("ConnectedPosition: Invalid ".concat(e,' "').concat(t,'". ')+'Expected "start", "end" or "center".')}var Py,My,Ly=((My=function(){function e(t){var n=this;_classCallCheck(this,e),this._attachedOverlays=[],this._keydownListener=function(e){for(var t=n._attachedOverlays,r=t.length-1;r>-1;r--)if(t[r]._keydownEventSubscriptions>0){t[r]._keydownEvents.next(e);break}},this._document=t}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._detach()}},{key:"add",value:function(e){this.remove(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(e)}},{key:"remove",value:function(e){var t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this._detach()}},{key:"_detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),e}()).ngInjectableDef=ge({factory:function(){return new My(Fe(Ns))},token:My,providedIn:"root"}),My),Fy=((Py=function(){function e(t){_classCallCheck(this,e),this._document=t}return _createClass(e,[{key:"ngOnDestroy",value:function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){for(var e=this._document.getElementsByClassName("cdk-overlay-container"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);var n=this._document.createElement("div");n.classList.add("cdk-overlay-container"),this._document.body.appendChild(n),this._containerElement=n}}]),e}()).ngInjectableDef=ge({factory:function(){return new Py(Fe(Ns))},token:Py,providedIn:"root"}),Py),Vy=function(){function e(t,n,r,i,o,a,s,u){var c=this;_classCallCheck(this,e),this._portalOutlet=t,this._host=n,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=u,this._backdropElement=null,this._backdropClick=new D,this._attachments=new D,this._detachments=new D,this._locationChanges=d.EMPTY,this._backdropClickHandler=function(e){return c._backdropClick.next(e)},this._keydownEventsObservable=new C((function(e){var t=c._keydownEvents.subscribe(e);return c._keydownEventSubscriptions++,function(){t.unsubscribe(),c._keydownEventSubscriptions--}})),this._keydownEvents=new D,this._keydownEventSubscriptions=0,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}return _createClass(e,[{key:"attach",value:function(e){var t=this,n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(du(1)).subscribe((function(){t.hasAttached()&&t.updatePosition()})),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe((function(){return t.dispose()}))),n}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),e}}},{key:"dispose",value:function(){var e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick.asObservable()}},{key:"attachments",value:function(){return this._attachments.asObservable()}},{key:"detachments",value:function(){return this._detachments.asObservable()}},{key:"keydownEvents",value:function(){return this._keydownEventsObservable}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(e){this._config=Object.assign({},this._config,e),this._updateElementSize()}},{key:"setDirection",value:function(e){this._config=Object.assign({},this._config,{direction:e}),this._updateElementDirection()}},{key:"addPanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!0)}},{key:"removePanelClass",value:function(e){this._pane&&this._toggleClasses(this._pane,e,!1)}},{key:"getDirection",value:function(){var e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}},{key:"updateScrollStrategy",value:function(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var e=this._pane.style;e.width=Qd(this._config.width),e.height=Qd(this._config.height),e.minWidth=Qd(this._config.minWidth),e.minHeight=Qd(this._config.minHeight),e.maxWidth=Qd(this._config.maxWidth),e.maxHeight=Qd(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(e){this._pane.style.pointerEvents=e?"auto":"none"}},{key:"_attachBackdrop",value:function(){var e=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){e._backdropElement&&e._backdropElement.classList.add("cdk-overlay-backdrop-showing")}))})):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var e,t=this,n=this._backdropElement;if(n){var r=function r(){n&&(n.removeEventListener("click",t._backdropClickHandler),n.removeEventListener("transitionend",r),n.parentNode&&n.parentNode.removeChild(n)),t._backdropElement==n&&(t._backdropElement=null),t._config.backdropClass&&t._toggleClasses(n,t._config.backdropClass,!1),clearTimeout(e)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular((function(){n.addEventListener("transitionend",r)})),n.style.pointerEvents="none",e=this._ngZone.runOutsideAngular((function(){return setTimeout(r,500)}))}}},{key:"_toggleClasses",value:function(e,t,n){var r=e.classList;Gd(t).forEach((function(e){e&&(n?r.add(e):r.remove(e))}))}},{key:"_detachContentWhenStable",value:function(){var e=this;this._ngZone.runOutsideAngular((function(){var t=e._ngZone.onStable.asObservable().pipe(ry(ee(e._attachments,e._detachments))).subscribe((function(){e._pane&&e._host&&0!==e._pane.children.length||(e._pane&&e._config.panelClass&&e._toggleClasses(e._pane,e._config.panelClass,!1),e._host&&e._host.parentElement&&(e._previousHostParent=e._host.parentElement,e._previousHostParent.removeChild(e._host)),t.unsubscribe())}))}))}},{key:"_disposeScrollStrategy",value:function(){var e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}},{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}}]),e}(),Uy=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this._viewportRuler=n,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new D,this._resizeSubscription=d.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}return _createClass(e,[{key:"attach",value:function(e){var t=this;if(this._overlayRef&&e!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),e.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe((function(){t._isInitialRender=!0,t.apply()}))}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser)if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)this.reapplyLastPosition();else{this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var e,t=this._originRect,n=this._overlayRect,r=this._viewportRect,i=[],o=!0,a=!1,s=void 0;try{for(var u,c=this._preferredPositions[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value,h=this._getOriginPoint(t,l),f=this._getOverlayPoint(h,n,l),d=this._getOverlayFit(f,n,r,l);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(l,h);this._canFitWithFlexibleDimensions(d,f,r)?i.push({position:l,origin:h,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(h,l)}):(!e||e.overlayFit.visibleArea<d.visibleArea)&&(e={overlayFit:d,overlayPoint:f,originPoint:h,position:l,overlayRect:n})}}catch(C){a=!0,s=C}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}if(i.length){var p=null,v=-1,m=!0,y=!1,g=void 0;try{for(var _,b=i[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var w=_.value,k=w.boundingBoxRect.width*w.boundingBoxRect.height*(w.position.weight||1);k>v&&(v=k,p=w)}}catch(C){y=!0,g=C}finally{try{m||null==b.return||b.return()}finally{if(y)throw g}}return this._isPushed=!1,void this._applyPosition(p.position,p.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(e.position,e.originPoint);this._applyPosition(e.position,e.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&By(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}},{key:"withScrollableContainers",value:function(e){return this._scrollables=e,this}},{key:"withPositions",value:function(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(e){return this._viewportMargin=e,this}},{key:"withFlexibleDimensions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=e,this}},{key:"withGrowAfterOpen",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=e,this}},{key:"withPush",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=e,this}},{key:"withLockedPosition",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=e,this}},{key:"setOrigin",value:function(e){return this._origin=e,this}},{key:"withDefaultOffsetX",value:function(e){return this._offsetX=e,this}},{key:"withDefaultOffsetY",value:function(e){return this._offsetY=e,this}},{key:"withTransformOriginOn",value:function(e){return this._transformOriginSelector=e,this}},{key:"_getOriginPoint",value:function(e,t){var n;if("center"==t.originX)n=e.left+e.width/2;else{var r=this._isRtl()?e.right:e.left,i=this._isRtl()?e.left:e.right;n="start"==t.originX?r:i}return{x:n,y:"center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom}}},{key:"_getOverlayPoint",value:function(e,t,n){var r,i;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,i="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+i}}},{key:"_getOverlayFit",value:function(e,t,n,r){var i=e.x,o=e.y,a=this._getOffset(r,"x"),s=this._getOffset(r,"y");a&&(i+=a),s&&(o+=s);var u=0-o,c=o+t.height-n.height,l=this._subtractOverflows(t.width,0-i,i+t.width-n.width),h=this._subtractOverflows(t.height,u,c),f=l*h;return{visibleArea:f,isCompletelyWithinViewport:t.width*t.height===f,fitsInViewportVertically:h===t.height,fitsInViewportHorizontally:l==t.width}}},{key:"_canFitWithFlexibleDimensions",value:function(e,t,n){if(this._hasFlexibleDimensions){var r=n.bottom-t.y,i=n.right-t.x,o=this._overlayRef.getConfig().minHeight,a=this._overlayRef.getConfig().minWidth,s=e.fitsInViewportHorizontally||null!=a&&a<=i;return(e.fitsInViewportVertically||null!=o&&o<=r)&&s}return!1}},{key:"_pushOverlayOnScreen",value:function(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};var r,i,o=this._viewportRect,a=Math.max(e.x+t.width-o.right,0),s=Math.max(e.y+t.height-o.bottom,0),u=Math.max(o.top-n.top-e.y,0),c=Math.max(o.left-n.left-e.x,0);return r=t.width<=o.width?c||-a:e.x<this._viewportMargin?o.left-n.left-e.x:0,i=t.height<=o.height?u||-s:e.y<this._viewportMargin?o.top-n.top-e.y:0,this._previousPushAmount={x:r,y:i},{x:e.x+r,y:e.y+i}}},{key:"_applyPosition",value:function(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){var n=this._getScrollVisibility(),r=new Ry(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(e){if(this._transformOriginSelector){var t,n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r=e.overlayY;t="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(var i=0;i<n.length;i++)n[i].style.transformOrigin="".concat(t," ").concat(r)}}},{key:"_calculateBoundingBoxRect",value:function(e,t){var n,r,i,o,a,s,u=this._viewportRect,c=this._isRtl();if("top"===t.overlayY)r=e.y,n=u.height-r+this._viewportMargin;else if("bottom"===t.overlayY)i=u.height-e.y+2*this._viewportMargin,n=u.height-i+this._viewportMargin;else{var l=Math.min(u.bottom-e.y+u.top,e.y),h=this._lastBoundingBoxSize.height;n=2*l,r=e.y-l,n>h&&!this._isInitialRender&&!this._growAfterOpen&&(r=e.y-h/2)}if("end"===t.overlayX&&!c||"start"===t.overlayX&&c)s=u.width-e.x+this._viewportMargin,o=e.x-this._viewportMargin;else if("start"===t.overlayX&&!c||"end"===t.overlayX&&c)a=e.x,o=u.right-e.x;else{var f=Math.min(u.right-e.x+u.left,e.x),d=this._lastBoundingBoxSize.width;o=2*f,a=e.x-f,o>d&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.x-d/2)}return{top:r,left:a,bottom:i,right:s,width:o,height:n}}},{key:"_setBoundingBoxStyles",value:function(e,t){var n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));var r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right="",r.width=r.height="100%";else{var i=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Qd(n.height),r.top=Qd(n.top),r.bottom=Qd(n.bottom),r.width=Qd(n.width),r.left=Qd(n.left),r.right=Qd(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",i&&(r.maxHeight=Qd(i)),o&&(r.maxWidth=Qd(o))}this._lastBoundingBoxSize=n,By(this._boundingBox.style,r)}},{key:"_resetBoundingBoxStyles",value:function(){By(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){By(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(e,t){var n={};if(this._hasExactPosition()){var r=this._viewportRuler.getViewportScrollPosition();By(n,this._getExactOverlayY(t,e,r)),By(n,this._getExactOverlayX(t,e,r))}else n.position="static";var i="",o=this._getOffset(t,"x"),a=this._getOffset(t,"y");o&&(i+="translateX(".concat(o,"px) ")),a&&(i+="translateY(".concat(a,"px)")),n.transform=i.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),By(this._pane.style,n)}},{key:"_getExactOverlayY",value:function(e,t,n){var r={top:null,bottom:null},i=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));var o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===e.overlayY?r.bottom="".concat(this._document.documentElement.clientHeight-(i.y+this._overlayRect.height),"px"):r.top=Qd(i.y),r}},{key:"_getExactOverlayX",value:function(e,t,n){var r={left:null,right:null},i=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n)),"right"===(this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left")?r.right="".concat(this._document.documentElement.clientWidth-(i.x+this._overlayRect.width),"px"):r.left=Qd(i.x),r}},{key:"_getScrollVisibility",value:function(){var e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map((function(e){return e.getElementRef().nativeElement.getBoundingClientRect()}));return{isOriginClipped:Ey(e,n),isOriginOutsideView:Sy(e,n),isOverlayClipped:Ey(t,n),isOverlayOutsideView:Sy(t,n)}}},{key:"_subtractOverflows",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return e-Math.max(t,0)}),e)}},{key:"_getNarrowedViewportRect",value:function(){var e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}},{key:"_validatePositions",value:function(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach((function(e){Oy("originX",e.originX),xy("originY",e.originY),Oy("overlayX",e.overlayX),xy("overlayY",e.overlayY)}))}},{key:"_addPanelClasses",value:function(e){var t=this;this._pane&&Gd(e).forEach((function(e){""!==e&&-1===t._appliedPanelClasses.indexOf(e)&&(t._appliedPanelClasses.push(e),t._pane.classList.add(e))}))}},{key:"_clearPanelClasses",value:function(){var e=this;this._pane&&(this._appliedPanelClasses.forEach((function(t){e._pane.classList.remove(t)})),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var e=this._origin;if(e instanceof on)return e.nativeElement.getBoundingClientRect();if(e instanceof HTMLElement)return e.getBoundingClientRect();var t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}},{key:"positions",get:function(){return this._preferredPositions}}]),e}();function By(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var jy,qy=function(){function e(t,n,r,i,o,a,s){_classCallCheck(this,e),this._preferredPositions=[],this._positionStrategy=new Uy(r,i,o,a,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,n)}return _createClass(e,[{key:"attach",value:function(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(e){this._positionStrategy.withScrollableContainers(e)}},{key:"withFallbackPosition",value:function(e,t,n,r){var i=new Dy(e,t,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}},{key:"withOffsetX",value:function(e){return this._positionStrategy.withDefaultOffsetX(e),this}},{key:"withOffsetY",value:function(e){return this._positionStrategy.withDefaultOffsetY(e),this}},{key:"withLockedPosition",value:function(e){return this._positionStrategy.withLockedPosition(e),this}},{key:"withPositions",value:function(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(e){return this._positionStrategy.setOrigin(e),this}},{key:"_isRtl",get:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"onPositionChange",get:function(){return this._positionStrategy.positionChanges}},{key:"positions",get:function(){return this._preferredPositions}}]),e}(),zy=function(){function e(){_classCallCheck(this,e),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return _createClass(e,[{key:"attach",value:function(e){var t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}},{key:"top",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}},{key:"left",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}},{key:"right",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}},{key:"width",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}},{key:"height",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}},{key:"centerHorizontally",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(e),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(e),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();e.position=this._cssPosition,e.marginLeft="100%"===n.width?"0":this._leftOffset,e.marginTop="100%"===n.height?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,"100%"===n.width?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems="100%"===n.height?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}}]),e}(),Hy=((jy=function(){function e(t,n,r,i){_classCallCheck(this,e),this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=i}return _createClass(e,[{key:"global",value:function(){return new zy}},{key:"connectedTo",value:function(e,t,n){return new qy(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(e){return new Uy(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),e}()).ngInjectableDef=ge({factory:function(){return new jy(Fe(_y),Fe(Ns),Fe(Jd),Fe(Fy))},token:jy,providedIn:"root"}),jy),Ky=0,Wy=function(){function e(t,n,r,i,o,a,s,u,c,l){_classCallCheck(this,e),this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=i,this._keyboardDispatcher=o,this._injector=a,this._ngZone=s,this._document=u,this._directionality=c,this._location=l}return _createClass(e,[{key:"create",value:function(e){var t=this._createHostElement(),n=this._createPaneElement(t),r=this._createPortalOutlet(n),i=new Ny(e);return i.direction=i.direction||this._directionality.value,new Vy(r,t,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(e){var t=this._document.createElement("div");return t.id="cdk-overlay-".concat(Ky++),t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}},{key:"_createHostElement",value:function(){var e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}},{key:"_createPortalOutlet",value:function(e){return this._appRef||(this._appRef=this._injector.get(yo)),new ty(e,this._componentFactoryResolver,this._appRef,this._injector)}}]),e}(),Gy=new De("cdk-connected-overlay-scroll-strategy");function Qy(e){return function(){return e.scrollStrategies.reposition()}}var Yy=function e(){_classCallCheck(this,e)},Xy=new De("MAT_MENU_PANEL"),Zy=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._elementRef=e,o._focusMonitor=r,o._parentMenu=i,o.role="menuitem",o._hovered=new D,o._highlighted=!1,o._triggersSubmenu=!1,r&&r.monitor(o._elementRef,!1),i&&i.addItem&&i.addItem(_assertThisInitialized(o)),o._document=n,o}return _inherits(t,e),_createClass(t,[{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t)}},{key:"ngOnDestroy",value:function(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete()}},{key:"_getTabIndex",value:function(){return this.disabled?"-1":"0"}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_checkDisabled",value:function(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}},{key:"_handleMouseEnter",value:function(){this._hovered.next(this)}},{key:"getLabel",value:function(){var e=this._elementRef.nativeElement,t=this._document?this._document.TEXT_NODE:3,n="";if(e.childNodes)for(var r=e.childNodes.length,i=0;i<r;i++)e.childNodes[i].nodeType===t&&(n+=e.childNodes[i].textContent);return n.trim()}}]),t}(vp(dp((function e(){_classCallCheck(this,e)})))),Jy=new De("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}}),$y=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(function(){function e(t,n,r){_classCallCheck(this,e),this._elementRef=t,this._ngZone=n,this._defaultOptions=r,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Ei,this._tabSubscription=d.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new D,this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Ci,this.close=this.closed}return _createClass(e,[{key:"ngOnInit",value:function(){this.setPositionClasses()}},{key:"ngAfterContentInit",value:function(){var e=this;this._updateDirectDescendants(),this._keyManager=new ap(this._directDescendantItems).withWrap().withTypeAhead(),this._tabSubscription=this._keyManager.tabOut.subscribe((function(){return e.closed.emit("tab")}))}},{key:"ngOnDestroy",value:function(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}},{key:"_hovered",value:function(){return this._directDescendantItems.changes.pipe(Cu(this._directDescendantItems),_u((function(e){return ee.apply(void 0,_toConsumableArray(e.map((function(e){return e._hovered}))))})))}},{key:"addItem",value:function(e){}},{key:"removeItem",value:function(e){}},{key:"_handleKeydown",value:function(e){var t=e.keyCode,n=this._keyManager;switch(t){case 27:tp(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;case 36:case 35:tp(e)||(36===t?n.setFirstItemActive():n.setLastItemActive(),e.preventDefault());break;default:38!==t&&40!==t||n.setFocusOrigin("keyboard"),n.onKeydown(e)}}},{key:"focusFirstItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=this._keyManager;if(this.lazyContent?this._ngZone.onStable.asObservable().pipe(du(1)).subscribe((function(){return t.setFocusOrigin(e).setFirstItemActive()})):t.setFocusOrigin(e).setFirstItemActive(),!t.activeItem&&this._directDescendantItems.length)for(var n=this._directDescendantItems.first._getHostElement().parentElement;n;){if("menu"===n.getAttribute("role")){n.focus();break}n=n.parentElement}}},{key:"resetActiveItem",value:function(){this._keyManager.setActiveItem(-1)}},{key:"setElevation",value:function(e){var t="mat-elevation-z".concat(4+e),n=Object.keys(this._classList).find((function(e){return e.startsWith("mat-elevation-z")}));n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[t]=!0,this._previousElevation=t)}},{key:"setPositionClasses",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.xPosition,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.yPosition,n=this._classList;n["mat-menu-before"]="before"===e,n["mat-menu-after"]="after"===e,n["mat-menu-above"]="above"===t,n["mat-menu-below"]="below"===t}},{key:"_startAnimation",value:function(){this._panelAnimationState="enter"}},{key:"_resetAnimation",value:function(){this._panelAnimationState="void"}},{key:"_onAnimationDone",value:function(e){this._animationDone.next(e),this._isAnimating=!1}},{key:"_onAnimationStart",value:function(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}},{key:"_updateDirectDescendants",value:function(){var e=this;this._allItems.changes.pipe(Cu(this._allItems)).subscribe((function(t){e._directDescendantItems.reset(t.filter((function(t){return t._parentMenu===e}))),e._directDescendantItems.notifyOnChanges()}))}},{key:"xPosition",get:function(){return this._xPosition},set:function(e){"before"!==e&&"after"!==e&&function(){throw Error('xPosition value must be either \'before\' or after\'.\n      Example: <mat-menu xPosition="before" #menu="matMenu"></mat-menu>')}(),this._xPosition=e,this.setPositionClasses()}},{key:"yPosition",get:function(){return this._yPosition},set:function(e){"above"!==e&&"below"!==e&&function(){throw Error('yPosition value must be either \'above\' or below\'.\n      Example: <mat-menu yPosition="above" #menu="matMenu"></mat-menu>')}(),this._yPosition=e,this.setPositionClasses()}},{key:"overlapTrigger",get:function(){return this._overlapTrigger},set:function(e){this._overlapTrigger=Wd(e)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=Wd(e)}},{key:"panelClass",set:function(e){var t=this,n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach((function(e){t._classList[e]=!1})),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach((function(e){t._classList[e]=!0})),this._elementRef.nativeElement.className="")}},{key:"classList",get:function(){return this.panelClass},set:function(e){this.panelClass=e}}]),e}()),eg=function(e){function t(e,n,r){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,r))}return _inherits(t,e),t}($y),tg=new De("mat-menu-scroll-strategy");function ng(e){return function(){return e.scrollStrategies.reposition()}}var rg=ep({passive:!0}),ig=function(){function e(t,n,r,i,o,a,s,u){var c=this;_classCallCheck(this,e),this._overlay=t,this._element=n,this._viewContainerRef=r,this._parentMenu=o,this._menuItemInstance=a,this._dir=s,this._focusMonitor=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=d.EMPTY,this._hoverSubscription=d.EMPTY,this._menuCloseSubscription=d.EMPTY,this._handleTouchStart=function(){return c._openedBy="touch"},this._openedBy=null,this.restoreFocus=!0,this.menuOpened=new Ci,this.onMenuOpen=this.menuOpened,this.menuClosed=new Ci,this.onMenuClose=this.menuClosed,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,rg),a&&(a._triggersSubmenu=this.triggersSubmenu()),this._scrollStrategy=i}return _createClass(e,[{key:"ngAfterContentInit",value:function(){this._checkMenu(),this._handleHover()}},{key:"ngOnDestroy",value:function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,rg),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}},{key:"triggersSubmenu",value:function(){return!(!this._menuItemInstance||!this._parentMenu)}},{key:"toggleMenu",value:function(){return this._menuOpen?this.closeMenu():this.openMenu()}},{key:"openMenu",value:function(){var e=this;if(!this._menuOpen){this._checkMenu();var t=this._createOverlay(),n=t.getConfig();this._setPosition(n.positionStrategy),n.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe((function(){return e.closeMenu()})),this._initMenu(),this.menu instanceof $y&&this.menu._startAnimation()}}},{key:"closeMenu",value:function(){this.menu.close.emit()}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program",t=arguments.length>1?arguments[1]:void 0;this._focusMonitor?this._focusMonitor.focusVia(this._element,e,t):this._element.nativeElement.focus(t)}},{key:"_destroyMenu",value:function(){var e=this;if(this._overlayRef&&this.menuOpen){var t=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),t instanceof $y?(t._resetAnimation(),t.lazyContent?t._animationDone.pipe(Gs((function(e){return"void"===e.toState})),du(1),ry(t.lazyContent._attached)).subscribe({next:function(){return t.lazyContent.detach()},complete:function(){return e._setIsMenuOpen(!1)}}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),t.lazyContent&&t.lazyContent.detach()),this._restoreFocus()}}},{key:"_initMenu",value:function(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this._setIsMenuOpen(!0),this.menu.focusFirstItem(this._openedBy||"program")}},{key:"_setMenuElevation",value:function(){if(this.menu.setElevation){for(var e=0,t=this.menu.parentMenu;t;)e++,t=t.parentMenu;this.menu.setElevation(e)}}},{key:"_restoreFocus",value:function(){this.restoreFocus&&(this._openedBy?this.triggersSubmenu()||this.focus(this._openedBy):this.focus()),this._openedBy=null}},{key:"_setIsMenuOpen",value:function(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=e)}},{key:"_checkMenu",value:function(){this.menu||function(){throw Error('matMenuTriggerFor: must pass in an mat-menu instance.\n\n    Example:\n      <mat-menu #menu="matMenu"></mat-menu>\n      <button [matMenuTriggerFor]="menu"></button>')}()}},{key:"_createOverlay",value:function(){if(!this._overlayRef){var e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}},{key:"_getOverlayConfig",value:function(){return new Ny({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",scrollStrategy:this._scrollStrategy(),direction:this._dir})}},{key:"_subscribeToPositions",value:function(e){var t=this;this.menu.setPositionClasses&&e.positionChanges.subscribe((function(e){t.menu.setPositionClasses("start"===e.connectionPair.overlayX?"after":"before","top"===e.connectionPair.overlayY?"below":"above")}))}},{key:"_setPosition",value:function(e){var t=_slicedToArray("before"===this.menu.xPosition?["end","start"]:["start","end"],2),n=t[0],r=t[1],i=_slicedToArray("above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],2),o=i[0],a=i[1],s=o,u=a,c=n,l=r,h=0;this.triggersSubmenu()?(l=n="before"===this.menu.xPosition?"start":"end",r=c="end"===n?"start":"end",h="bottom"===o?8:-8):this.menu.overlapTrigger||(s="top"===o?"bottom":"top",u="top"===a?"bottom":"top"),e.withPositions([{originX:n,originY:s,overlayX:c,overlayY:o,offsetY:h},{originX:r,originY:s,overlayX:l,overlayY:o,offsetY:h},{originX:n,originY:u,overlayX:c,overlayY:a,offsetY:-h},{originX:r,originY:u,overlayX:l,overlayY:a,offsetY:-h}])}},{key:"_menuClosingActions",value:function(){var e=this,t=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return ee(t,this._parentMenu?this._parentMenu.closed:Vs(),this._parentMenu?this._parentMenu._hovered().pipe(Gs((function(t){return t!==e._menuItemInstance})),Gs((function(){return e._menuOpen}))):Vs(),n)}},{key:"_handleMousedown",value:function(e){cp(e)||(this._openedBy=0===e.button?"mouse":null,this.triggersSubmenu()&&e.preventDefault())}},{key:"_handleKeydown",value:function(e){var t=e.keyCode;this.triggersSubmenu()&&(39===t&&"ltr"===this.dir||37===t&&"rtl"===this.dir)&&this.openMenu()}},{key:"_handleClick",value:function(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}},{key:"_handleHover",value:function(){var e=this;this.triggersSubmenu()&&(this._hoverSubscription=this._parentMenu._hovered().pipe(Gs((function(t){return t===e._menuItemInstance&&!t.disabled})),ay(0,zf)).subscribe((function(){e._openedBy="mouse",e.menu instanceof $y&&e.menu._isAnimating?e.menu._animationDone.pipe(du(1),ay(0,zf),ry(e._parentMenu._hovered())).subscribe((function(){return e.openMenu()})):e.openMenu()})))}},{key:"_getPortal",value:function(){return this._portal&&this._portal.templateRef===this.menu.templateRef||(this._portal=new ey(this.menu.templateRef,this._viewContainerRef)),this._portal}},{key:"_deprecatedMatMenuTriggerFor",get:function(){return this.menu},set:function(e){this.menu=e}},{key:"menu",get:function(){return this._menu},set:function(e){var t=this;e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.asObservable().subscribe((function(e){t._destroyMenu(),"click"!==e&&"tab"!==e||!t._parentMenu||t._parentMenu.closed.emit(e)}))))}},{key:"menuOpen",get:function(){return this._menuOpen}},{key:"dir",get:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}}]),e}(),og=function e(){_classCallCheck(this,e)},ag=function e(){_classCallCheck(this,e)},sg=Gn({encapsulation:2,styles:[".mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}@media (-ms-high-contrast:active){.mat-menu-panel{outline:solid 1px}}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}@media (-ms-high-contrast:active){.mat-menu-item-highlighted,.mat-menu-item.cdk-keyboard-focused,.mat-menu-item.cdk-program-focused{outline:dotted 1px}}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:'';display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],data:{animation:[{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:{type:3,steps:[{type:11,selector:".mat-menu-content, .mat-mdc-menu-content",animation:{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"100ms linear"},options:null},{type:4,styles:{type:6,styles:{transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"}],options:null},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function ug(e){return Jo(0,[(e()(),Fo(0,0,null,null,4,"div",[["class","mat-menu-panel"],["role","menu"],["tabindex","-1"]],[[24,"@transformMenu",0]],[[null,"keydown"],[null,"click"],[null,"@transformMenu.start"],[null,"@transformMenu.done"]],(function(e,t,n){var r=!0,i=e.component;return"keydown"===t&&(r=!1!==i._handleKeydown(n)&&r),"click"===t&&(r=!1!==i.closed.emit("click")&&r),"@transformMenu.start"===t&&(r=!1!==i._onAnimationStart(n)&&r),"@transformMenu.done"===t&&(r=!1!==i._onAnimationDone(n)&&r),r}),null,null)),ri(512,null,gs,_s,[Cn,Sn,on,cn]),ti(2,278528,null,0,bs,[gs],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),Fo(3,0,null,null,1,"div",[["class","mat-menu-content"]],null,null,null,null,null)),Go(null,0)],(function(e,t){e(t,2,0,"mat-menu-panel",t.component._classList)}),(function(e,t){e(t,0,0,t.component._panelAnimationState)}))}function cg(e){return Jo(2,[qo(671088640,1,{templateRef:0}),(e()(),Lo(0,[[1,2]],null,0,null,ug))],null,null)}var lg=Gn({encapsulation:2,styles:[],data:{}});function hg(e){return Jo(2,[Go(null,0),(e()(),Fo(1,0,null,null,1,"div",[["class","mat-menu-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),ti(2,212992,null,0,Cp,[on,Ji,Jd,[2,kp],[2,Gm]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],(function(e,t){var n=t.component;e(t,2,0,n.disableRipple||n.disabled,n._getHostElement())}),(function(e,t){e(t,1,0,qr(t,2).unbounded)}))}var fg=function(){function e(t){var n=this;_classCallCheck(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),i=r.toLowerCase(),o=e.slice(t+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}}))}:function(){n.headers=new Map,Object.keys(t).forEach((function(e){var r=t[e],i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(e,i))}))}:this.headers=new Map}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(e){return t.applyUpdate(e)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach((function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))}))}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,_toConsumableArray(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var o=this.headers.get(t);if(!o)return;0===(o=o.filter((function(e){return-1===i.indexOf(e)}))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return e(t.normalizedNames.get(n),t.headers.get(n))}))}}]),e}(),dg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"encodeKey",value:function(e){return pg(e)}},{key:"encodeValue",value:function(e){return pg(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function pg(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var vg=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new dg,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){var n=new Map;return e.length>0&&e.split("&").forEach((function(e){var r=e.indexOf("="),i=_slicedToArray(-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],2),o=i[0],a=i[1],s=n.get(o)||[];s.push(a),n.set(o,s)})),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(e){var r=n.fromObject[e];t.map.set(e,Array.isArray(r)?r:[r])}))):this.map=null}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map((function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map((function(t){return n+"="+e.encoder.encodeValue(t)})).join("&")})).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(t){return e.map.set(t,e.cloneFrom.map.get(t))})),this.updates.forEach((function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function mg(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function yg(e){return"undefined"!=typeof Blob&&e instanceof Blob}function gg(e){return"undefined"!=typeof FormData&&e instanceof FormData}var _g=function(){function e(t,n,r,i){var o;if(_classCallCheck(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new fg),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+a}}else this.params=new vg,this.urlWithParams=n}return _createClass(e,[{key:"serializeBody",value:function(){return null===this.body?null:mg(this.body)||yg(this.body)||gg(this.body)||"string"==typeof this.body?this.body:this.body instanceof vg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body?null:gg(this.body)?null:yg(this.body)?this.body.type||null:mg(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((function(e,n){return e.set(n,t.setHeaders[n])}),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((function(e,n){return e.set(n,t.setParams[n])}),c)),new e(n,r,o,{params:c,headers:u,reportProgress:s,responseType:i,withCredentials:a})}}]),e}(),bg=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}(),wg=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).type=bg.Response,e.body=void 0!==n.body?n.body:null,e}return _inherits(t,e),_createClass(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),t}(function(){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,e),this.headers=t.headers||new fg,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}());function kg(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var Cg=function(){function e(t){_classCallCheck(this,e),this.handler=t}return _createClass(e,[{key:"request",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof _g)n=e;else{var o=void 0;o=i.headers instanceof fg?i.headers:new fg(i.headers);var a=void 0;i.params&&(a=i.params instanceof vg?i.params:new vg({fromObject:i.params})),n=new _g(e,t,void 0!==i.body?i.body:null,{headers:o,params:a,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var s=Vs(n).pipe(Iu((function(e){return r.handler.handle(e)})));if(e instanceof _g||"events"===i.observe)return s;var u=s.pipe(Gs((function(e){return e instanceof wg})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(H((function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body})));case"blob":return u.pipe(H((function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body})));case"text":return u.pipe(H((function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body})));case"json":default:return u.pipe(H((function(e){return e.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new vg).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,kg(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,kg(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,kg(n,t))}}]),e}(),Sg=function(e){function t(e,n){var r;_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var a=q(_assertThisInitialized(r),n[o],null,o);a&&r.add(a)}return r}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,n,r,i){this.values[n]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)}},{key:"notifyComplete",value:function(e){var t=this.destination,n=this.haveValues,r=this.values,i=r.length;e._hasValue?(this.completed++,this.completed===i&&(n===i&&t.next(r),t.complete())):t.complete()}}]),t}(z);function Eg(e){return Error('Unable to find icon with the name "'.concat(e,'"'))}function Tg(e){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL "+"via Angular's DomSanitizer. Attempted URL was \"".concat(e,'".'))}function Ig(e){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by "+"Angular's DomSanitizer. Attempted literal was \"".concat(e,'".'))}var Ag,Ng=function e(t,n){_classCallCheck(this,e),this.options=n,t.nodeName?this.svgElement=t:this.url=t},Dg=((Ag=function(){function e(t,n,r,i){_classCallCheck(this,e),this._httpClient=t,this._sanitizer=n,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=r}return _createClass(e,[{key:"addSvgIcon",value:function(e,t,n){return this.addSvgIconInNamespace("",e,t,n)}},{key:"addSvgIconLiteral",value:function(e,t,n){return this.addSvgIconLiteralInNamespace("",e,t,n)}},{key:"addSvgIconInNamespace",value:function(e,t,n,r){return this._addSvgIconConfig(e,t,new Ng(n,r))}},{key:"addSvgIconLiteralInNamespace",value:function(e,t,n,r){var i=this._sanitizer.sanitize(wt.HTML,n);if(!i)throw Ig(n);var o=this._createSvgElementForSingleIcon(i,r);return this._addSvgIconConfig(e,t,new Ng(o,r))}},{key:"addSvgIconSet",value:function(e,t){return this.addSvgIconSetInNamespace("",e,t)}},{key:"addSvgIconSetLiteral",value:function(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}},{key:"addSvgIconSetInNamespace",value:function(e,t,n){return this._addSvgIconSetConfig(e,new Ng(t,n))}},{key:"addSvgIconSetLiteralInNamespace",value:function(e,t,n){var r=this._sanitizer.sanitize(wt.HTML,t);if(!r)throw Ig(t);var i=this._svgElementFromString(r);return this._addSvgIconSetConfig(e,new Ng(i,n))}},{key:"registerFontClassAlias",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this._fontCssClassesByAlias.set(e,t),this}},{key:"classNameForFontAlias",value:function(e){return this._fontCssClassesByAlias.get(e)||e}},{key:"setDefaultFontSetClass",value:function(e){return this._defaultFontSetClass=e,this}},{key:"getDefaultFontSetClass",value:function(){return this._defaultFontSetClass}},{key:"getSvgIconFromUrl",value:function(e){var t=this,n=this._sanitizer.sanitize(wt.RESOURCE_URL,e);if(!n)throw Tg(e);var r=this._cachedIconsByUrl.get(n);return r?Vs(Rg(r)):this._loadSvgIconFromConfig(new Ng(e)).pipe(tu((function(e){return t._cachedIconsByUrl.set(n,e)})),H((function(e){return Rg(e)})))}},{key:"getNamedSvgIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=xg(t,e),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);var i=this._iconSetConfigs.get(t);return i?this._getSvgFromIconSetConfigs(e,i):Gf(Eg(n))}},{key:"ngOnDestroy",value:function(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}},{key:"_getSvgFromConfig",value:function(e){return e.svgElement?Vs(Rg(e.svgElement)):this._loadSvgIconFromConfig(e).pipe(tu((function(t){return e.svgElement=t})),H((function(e){return Rg(e)})))}},{key:"_getSvgFromIconSetConfigs",value:function(e,t){var n=this,r=this._extractIconWithNameFromAnySet(e,t);return r?Vs(r):function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i;return"function"==typeof n[n.length-1]&&(i=n.pop()),1===n.length&&u(n[0])&&(n=n[0]),0===n.length?Ms:i?e(n).pipe(H((function(e){return i.apply(void 0,_toConsumableArray(e))}))):new C((function(e){return new Sg(e,n)}))}(t.filter((function(e){return!e.svgElement})).map((function(e){return n._loadSvgIconSetFromConfig(e).pipe(lu((function(t){var r="Loading icon set URL: ".concat(n._sanitizer.sanitize(wt.RESOURCE_URL,e.url)," failed: ").concat(t.message);return n._errorHandler?n._errorHandler.handleError(new Error(r)):console.error(r),Vs(null)})))}))).pipe(H((function(){var r=n._extractIconWithNameFromAnySet(e,t);if(!r)throw Eg(e);return r})))}},{key:"_extractIconWithNameFromAnySet",value:function(e,t){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.svgElement){var i=this._extractSvgIconFromSet(r.svgElement,e,r.options);if(i)return i}}return null}},{key:"_loadSvgIconFromConfig",value:function(e){var t=this;return this._fetchUrl(e.url).pipe(H((function(n){return t._createSvgElementForSingleIcon(n,e.options)})))}},{key:"_loadSvgIconSetFromConfig",value:function(e){var t=this;return e.svgElement?Vs(e.svgElement):this._fetchUrl(e.url).pipe(H((function(n){return e.svgElement||(e.svgElement=t._svgElementFromString(n)),e.svgElement})))}},{key:"_createSvgElementForSingleIcon",value:function(e,t){var n=this._svgElementFromString(e);return this._setSvgAttributes(n,t),n}},{key:"_extractSvgIconFromSet",value:function(e,t,n){var r=e.querySelector('[id="'.concat(t,'"]'));if(!r)return null;var i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);var o=this._svgElementFromString("<svg></svg>");return o.appendChild(i),this._setSvgAttributes(o,n)}},{key:"_svgElementFromString",value:function(e){var t=this._document.createElement("DIV");t.innerHTML=e;var n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}},{key:"_toSvgElement",value:function(e){for(var t=this._svgElementFromString("<svg></svg>"),n=e.attributes,r=0;r<n.length;r++){var i=n[r],o=i.name,a=i.value;"id"!==o&&t.setAttribute(o,a)}for(var s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[s].cloneNode(!0));return t}},{key:"_setSvgAttributes",value:function(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}},{key:"_fetchUrl",value:function(e){var t=this;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==e)throw Error('Cannot fetch icon from URL "'.concat(e,'".'));var n=this._sanitizer.sanitize(wt.RESOURCE_URL,e);if(!n)throw Tg(e);var r=this._inProgressUrlFetches.get(n);if(r)return r;var i=this._httpClient.get(n,{responseType:"text"}).pipe(Au((function(){return t._inProgressUrlFetches.delete(n)})),le());return this._inProgressUrlFetches.set(n,i),i}},{key:"_addSvgIconConfig",value:function(e,t,n){return this._svgIconConfigs.set(xg(e,t),n),this}},{key:"_addSvgIconSetConfig",value:function(e,t){var n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}}]),e}()).ngInjectableDef=ge({factory:function(){return new Ag(Fe(Cg,8),Fe(Ec),Fe(Ns,8),Fe(Xe,8))},token:Ag,providedIn:"root"}),Ag);function Rg(e){return e.cloneNode(!0)}function xg(e,t){return e+":"+t}var Og=pp((function e(t){_classCallCheck(this,e),this._elementRef=t})),Pg=new De("mat-icon-location",{providedIn:"root",factory:function(){var e=Ve(Ns),t=e?e.location:null;return{getPathname:function(){return t?t.pathname+t.search:""}}}}),Mg=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Lg=Mg.map((function(e){return"[".concat(e,"]")})).join(", "),Fg=/^url\(['"]?#(.*?)['"]?\)$/,Vg=function(e){function t(e,n,r,i,o){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._iconRegistry=n,a._location=i,a._errorHandler=o,a._inline=!1,r||e.nativeElement.setAttribute("aria-hidden","true"),a}return _inherits(t,e),_createClass(t,[{key:"_splitIconName",value:function(e){if(!e)return["",""];var t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error('Invalid icon name: "'.concat(e,'"'))}}},{key:"ngOnChanges",value:function(e){var t=this,n=e.svgIcon;if(n)if(this.svgIcon){var r=_slicedToArray(this._splitIconName(this.svgIcon),2),i=r[0],o=r[1];this._iconRegistry.getNamedSvgIcon(o,i).pipe(du(1)).subscribe((function(e){return t._setSvgElement(e)}),(function(e){var n="Error retrieving icon ".concat(i,":").concat(o,"! ").concat(e.message);t._errorHandler?t._errorHandler.handleError(new Error(n)):console.error(n)}))}else n.previousValue&&this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()}},{key:"ngOnInit",value:function(){this._usingFontIcon()&&this._updateFontIconClasses()}},{key:"ngAfterViewChecked",value:function(){var e=this._elementsWithExternalReferences;if(e&&this._location&&e.size){var t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}},{key:"ngOnDestroy",value:function(){this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}},{key:"_usingFontIcon",value:function(){return!this.svgIcon}},{key:"_setSvgElement",value:function(e){this._clearSvgElement();for(var t=e.querySelectorAll("style"),n=0;n<t.length;n++)t[n].textContent+=" ";if(this._location){var r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r)}this._elementRef.nativeElement.appendChild(e)}},{key:"_clearSvgElement",value:function(){var e=this._elementRef.nativeElement,t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){var n=e.childNodes[t];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||e.removeChild(n)}}},{key:"_updateFontIconClasses",value:function(){if(this._usingFontIcon()){var e=this._elementRef.nativeElement,t=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();t!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),t&&e.classList.add(t),this._previousFontSetClass=t),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}}},{key:"_cleanupFontValue",value:function(e){return"string"==typeof e?e.trim().split(" ")[0]:e}},{key:"_prependPathToReferences",value:function(e){var t=this._elementsWithExternalReferences;t&&t.forEach((function(t,n){t.forEach((function(t){n.setAttribute(t.name,"url('".concat(e,"#").concat(t.value,"')"))}))}))}},{key:"_cacheChildrenWithExternalReferences",value:function(e){for(var t=e.querySelectorAll(Lg),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map,r=function(e){Mg.forEach((function(r){var i=t[e],o=i.getAttribute(r),a=o?o.match(Fg):null;if(a){var s=n.get(i);s||(s=[],n.set(i,s)),s.push({name:r,value:a[1]})}}))},i=0;i<t.length;i++)r(i)}},{key:"inline",get:function(){return this._inline},set:function(e){this._inline=Wd(e)}},{key:"fontSet",get:function(){return this._fontSet},set:function(e){this._fontSet=this._cleanupFontValue(e)}},{key:"fontIcon",get:function(){return this._fontIcon},set:function(e){this._fontIcon=this._cleanupFontValue(e)}}]),t}(Og),Ug=function e(){_classCallCheck(this,e)},Bg=Gn({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1,1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],data:{}});function jg(e){return Jo(2,[Go(null,0)],null,null)}var qg=function(){function e(){_classCallCheck(this,e),this._vertical=!1,this._inset=!1}return _createClass(e,[{key:"vertical",get:function(){return this._vertical},set:function(e){this._vertical=Wd(e)}},{key:"inset",get:function(){return this._inset},set:function(e){this._inset=Wd(e)}}]),e}(),zg=function e(){_classCallCheck(this,e)},Hg=Gn({encapsulation:2,styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],data:{}});function Kg(e){return Jo(2,[],null,null)}var Wg=pp((function e(t){_classCallCheck(this,e),this._elementRef=t})),Gg=function e(){_classCallCheck(this,e)},Qg=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._platform=n,i._document=r,i}return _inherits(t,e),_createClass(t,[{key:"ngAfterViewInit",value:function(){var e=this;$e()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe((function(){return e._checkToolbarMixedModes()})))}},{key:"_checkToolbarMixedModes",value:function(){var e=this;this._toolbarRows.length&&Array.from(this._elementRef.nativeElement.childNodes).filter((function(e){return!(e.classList&&e.classList.contains("mat-toolbar-row"))})).filter((function(t){return t.nodeType!==(e._document?e._document.COMMENT_NODE:8)})).some((function(e){return!(!e.textContent||!e.textContent.trim())}))&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()}}]),t}(Wg),Yg=function e(){_classCallCheck(this,e)},Xg=Gn({encapsulation:2,styles:["@media (-ms-high-contrast:active){.mat-toolbar{outline:solid 1px}}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media (max-width:599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}"],data:{}});function Zg(e){return Jo(2,[Go(null,0),Go(null,1)],null,null)}var Jg=Gn({encapsulation:2,styles:[],data:{}});function $g(e){return Jo(0,[(e()(),Fo(0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function e_(e){return Jo(0,[(e()(),Fo(0,0,null,null,2,"button",[["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.auth.googleSignin()&&r),r}),Xm,Ym)),ti(1,180224,null,0,Tp,[on,up,[2,Gm]],null,null),(e()(),Yo(-1,0,[" Sign In "]))],null,(function(e,t){e(t,0,0,qr(t,1).disabled||null,"NoopAnimations"===qr(t,1)._animationMode)}))}function t_(e){return Jo(0,[(e()(),Fo(0,16777216,null,null,4,"button",[["aria-haspopup","true"],["class","mat-menu-trigger"],["mat-button",""]],[[1,"aria-expanded",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],(function(e,t,n){var r=!0;return"mousedown"===t&&(r=!1!==qr(e,1)._handleMousedown(n)&&r),"keydown"===t&&(r=!1!==qr(e,1)._handleKeydown(n)&&r),"click"===t&&(r=!1!==qr(e,1)._handleClick(n)&&r),r}),Xm,Ym)),ti(1,1196032,null,0,ig,[Wy,on,Dn,tg,[2,$y],[8,null],[2,Np],up],{menu:[0,"menu"]},null),ti(2,180224,null,0,Tp,[on,up,[2,Gm]],null,null),(e()(),Fo(3,0,null,0,0,"img",[["class","menu-user-image"]],[[8,"src",4]],null,null,null,null)),(e()(),Yo(4,0,[" "," "])),(e()(),Lo(0,null,null,0))],(function(e,t){e(t,1,0,qr(t.parent,4))}),(function(e,t){e(t,0,0,qr(t,1).menuOpen||null,qr(t,2).disabled||null,"NoopAnimations"===qr(t,2)._animationMode),e(t,3,0,t.context.ngIf.photoURL),e(t,4,0,t.context.ngIf.displayName)}))}function n_(e){return Jo(0,[(e()(),Lo(16777216,null,null,2,null,t_)),ti(1,16384,null,0,ws,[Dn,An],{ngIf:[0,"ngIf"]},null),ni(131072,Is,[It]),(e()(),Fo(3,0,null,null,23,"mat-menu",[["xPosition","before"]],null,null,null,cg,sg)),ti(4,1294336,[["userMenu",4]],3,eg,[on,Ji,Jy],{xPosition:[0,"xPosition"]},null),qo(603979776,2,{_allItems:1}),qo(603979776,3,{items:1}),qo(603979776,4,{lazyContent:0}),ri(2048,null,$y,null,[eg]),ri(2048,null,Xy,null,[$y]),(e()(),Fo(10,0,null,0,7,"a",[["class","mat-menu-item"],["mat-menu-item",""],["routerLink","profile/"]],[[1,"target",0],[8,"href",4],[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==qr(e,11).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),"click"===t&&(r=!1!==qr(e,12)._checkDisabled(n)&&r),"mouseenter"===t&&(r=!1!==qr(e,12)._handleMouseEnter()&&r),r}),hg,lg)),ti(11,671744,null,0,Jh,[Zh,ql,us],{routerLink:[0,"routerLink"]},null),ti(12,180224,[[2,4],[3,4]],0,Zy,[on,Ns,up,[2,Xy]],null,null),(e()(),Fo(13,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,jg,Bg)),ti(14,9158656,null,0,Vg,[on,Dg,[8,null],[2,Pg],[2,Xe]],null,null),(e()(),Yo(-1,0,["person"])),(e()(),Fo(16,0,null,0,1,"span",[],null,null,null,null,null)),(e()(),Yo(-1,null,["Profile"])),(e()(),Fo(18,0,null,0,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,Kg,Hg)),ti(19,49152,null,0,qg,[],{inset:[0,"inset"]},null),(e()(),Fo(20,0,null,0,6,"button",[["class","mat-menu-item"],["mat-menu-item",""]],[[1,"role",0],[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],(function(e,t,n){var r=!0,i=e.component;return"click"===t&&(r=!1!==qr(e,21)._checkDisabled(n)&&r),"mouseenter"===t&&(r=!1!==qr(e,21)._handleMouseEnter()&&r),"click"===t&&(r=!1!==i.auth.signOut()&&r),r}),hg,lg)),ti(21,180224,[[2,4],[3,4]],0,Zy,[on,Ns,up,[2,Xy]],null,null),(e()(),Fo(22,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,jg,Bg)),ti(23,9158656,null,0,Vg,[on,Dg,[8,null],[2,Pg],[2,Xe]],null,null),(e()(),Yo(-1,0,["exit_to_app"])),(e()(),Fo(25,0,null,0,1,"span",[],null,null,null,null,null)),(e()(),Yo(-1,null,["Sign Out"]))],(function(e,t){var n=t.component;e(t,1,0,Wn(t,1,0,qr(t,2).transform(n.auth.user$))),e(t,4,0,"before"),e(t,11,0,"profile/"),e(t,14,0),e(t,19,0,!1),e(t,23,0)}),(function(e,t){e(t,10,0,qr(t,11).target,qr(t,11).href,qr(t,12).role,qr(t,12)._highlighted,qr(t,12)._triggersSubmenu,qr(t,12)._getTabIndex(),qr(t,12).disabled.toString(),qr(t,12).disabled||null),e(t,13,0,qr(t,14).inline,"primary"!==qr(t,14).color&&"accent"!==qr(t,14).color&&"warn"!==qr(t,14).color),e(t,18,0,qr(t,19).vertical?"vertical":"horizontal",qr(t,19).vertical,!qr(t,19).vertical,qr(t,19).inset),e(t,20,0,qr(t,21).role,qr(t,21)._highlighted,qr(t,21)._triggersSubmenu,qr(t,21)._getTabIndex(),qr(t,21).disabled.toString(),qr(t,21).disabled||null),e(t,22,0,qr(t,23).inline,"primary"!==qr(t,23).color&&"accent"!==qr(t,23).color&&"warn"!==qr(t,23).color)}))}function r_(e){return Jo(0,[(e()(),Fo(0,0,null,null,11,"mat-toolbar",[["class","mat-toolbar"],["color","primary"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,Zg,Xg)),ti(1,4243456,null,1,Qg,[on,Jd,Ns],{color:[0,"color"]},null),qo(603979776,1,{_toolbarRows:1}),(e()(),Fo(3,0,null,1,8,"mat-toolbar-row",[["class","mat-toolbar-row"]],null,null,null,null,null)),ti(4,16384,[[1,4]],0,Gg,[],null,null),(e()(),Fo(5,0,null,null,2,"a",[["routerLink","/"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==qr(e,6).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&r),r}),null,null)),ti(6,671744,null,0,Jh,[Zh,ql,us],{routerLink:[0,"routerLink"]},null),(e()(),Yo(-1,null,["Groceries"])),(e()(),Fo(8,0,null,null,0,"span",[["class","spacer"]],null,null,null,null,null)),(e()(),Lo(16777216,null,null,2,null,$g)),ti(10,16384,null,0,ws,[Dn,An],{ngIf:[0,"ngIf"],ngIfThen:[1,"ngIfThen"],ngIfElse:[2,"ngIfElse"]},null),ni(131072,Is,[It]),(e()(),Lo(0,[["guestMenu",2]],null,0,null,e_)),(e()(),Lo(0,[["authenticatedMenu",2]],null,0,null,n_)),(e()(),Fo(14,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),ti(15,212992,null,0,nf,[tf,Dn,en,[8,null],It],null,null)],(function(e,t){var n=t.component;e(t,1,0,"primary"),e(t,6,0,"/"),e(t,10,0,Wn(t,10,0,qr(t,11).transform(n.auth.user$)),qr(t,13),qr(t,12)),e(t,15,0)}),(function(e,t){e(t,0,0,qr(t,1)._toolbarRows.length>0,0===qr(t,1)._toolbarRows.length),e(t,5,0,qr(t,6).target,qr(t,6).href)}))}var i_=Rr("app-root",os,(function(e){return Jo(0,[(e()(),Fo(0,0,null,null,1,"app-root",[],null,null,null,r_,Jg)),ti(1,49152,null,0,os,[xd],null,null)],null,null)}),{},{},[]),o_=new C(_),a_="Service workers are disabled or not supported by this browser",s_=function(){function e(t){if(_classCallCheck(this,e),this.serviceWorker=t,t){var n=ly(t,"controllerchange").pipe(H((function(){return t.controller}))),r=ku(Ks((function(){return Vs(t.controller)})),n);this.worker=r.pipe(Gs((function(e){return!!e}))),this.registration=this.worker.pipe(_u((function(){return t.getRegistration()})));var i=ly(t,"message").pipe(H((function(e){return e.data}))).pipe(Gs((function(e){return e&&e.type}))).pipe(se(new D));i.connect(),this.events=i}else this.worker=this.events=this.registration=Ks((function(){return Gf(new Error("Service workers are disabled or not supported by this browser"))}))}return _createClass(e,[{key:"postMessage",value:function(e,t){return this.worker.pipe(du(1),tu((function(n){n.postMessage(Object.assign({action:e},t))}))).toPromise().then((function(){}))}},{key:"postMessageWithStatus",value:function(e,t,n){var r=this.waitForStatus(n),i=this.postMessage(e,t);return Promise.all([r,i]).then((function(){}))}},{key:"generateNonce",value:function(){return Math.round(1e7*Math.random())}},{key:"eventsOfType",value:function(e){return this.events.pipe(Gs((function(t){return t.type===e})))}},{key:"nextEventOfType",value:function(e){return this.eventsOfType(e).pipe(du(1))}},{key:"waitForStatus",value:function(e){return this.eventsOfType("STATUS").pipe(Gs((function(t){return t.nonce===e})),du(1),H((function(e){if(!e.status)throw new Error(e.error)}))).toPromise()}},{key:"isEnabled",get:function(){return!!this.serviceWorker}}]),e}(),u_=function(){function e(t){if(_classCallCheck(this,e),this.sw=t,this.subscriptionChanges=new D,!t.isEnabled)return this.messages=o_,this.notificationClicks=o_,void(this.subscription=o_);this.messages=this.sw.eventsOfType("PUSH").pipe(H((function(e){return e.data}))),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(H((function(e){return e.data}))),this.pushManager=this.sw.registration.pipe(H((function(e){return e.pushManager})));var n=this.pushManager.pipe(_u((function(e){return e.getSubscription()})));this.subscription=ee(n,this.subscriptionChanges)}return _createClass(e,[{key:"requestSubscription",value:function(e){var t=this;if(!this.sw.isEnabled)return Promise.reject(new Error(a_));for(var n={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(r.length)),o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return n.applicationServerKey=i,this.pushManager.pipe(_u((function(e){return e.subscribe(n)})),du(1)).toPromise().then((function(e){return t.subscriptionChanges.next(e),e}))}},{key:"unsubscribe",value:function(){var e=this;return this.sw.isEnabled?this.subscription.pipe(du(1),_u((function(t){if(null===t)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then((function(t){if(!t)throw new Error("Unsubscribe failed!");e.subscriptionChanges.next(null)}))}))).toPromise():Promise.reject(new Error(a_))}},{key:"decodeBase64",value:function(e){return atob(e)}},{key:"isEnabled",get:function(){return this.sw.isEnabled}}]),e}(),c_=function(){function e(t){if(_classCallCheck(this,e),this.sw=t,!t.isEnabled)return this.available=o_,void(this.activated=o_);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED")}return _createClass(e,[{key:"checkForUpdate",value:function(){if(!this.sw.isEnabled)return Promise.reject(new Error(a_));var e=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:e},e)}},{key:"activateUpdate",value:function(){if(!this.sw.isEnabled)return Promise.reject(new Error(a_));var e=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:e},e)}},{key:"isEnabled",get:function(){return this.sw.isEnabled}}]),e}(),l_=function e(){_classCallCheck(this,e)},h_=new De("NGSW_REGISTER_SCRIPT");function f_(e,t,n,r){return function(){if(Ds(r)&&"serviceWorker"in navigator&&!1!==n.enabled){var i;if(navigator.serviceWorker.addEventListener("controllerchange",(function(){null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})})),"function"==typeof n.registrationStrategy)i=n.registrationStrategy();else{var o=_toArray((n.registrationStrategy||"registerWhenStable").split(":")),a=o[0],s=o.slice(1);switch(a){case"registerImmediately":i=Vs(null);break;case"registerWithDelay":i=Vs(null).pipe(ay(+s[0]||0));break;case"registerWhenStable":i=e.get(yo).isStable.pipe(Gs((function(e){return e})));break;default:throw new Error("Unknown ServiceWorker registration strategy: ".concat(n.registrationStrategy))}}i.pipe(du(1)).subscribe((function(){return navigator.serviceWorker.register(t,{scope:n.scope}).catch((function(e){return console.error("Service worker registration failed with:",e)}))}))}}}function d_(e,t){return new s_(Ds(t)&&!1!==e.enabled?navigator.serviceWorker:void 0)}var p_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"register",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{ngModule:e,providers:[{provide:h_,useValue:t},{provide:l_,useValue:n},{provide:s_,useFactory:d_,deps:[l_,xi]},{provide:Ti,useFactory:f_,deps:[Rt,h_,l_,xi],multi:!0}]}}}]),e}(),v_=n("wj3C"),m_=n.n(v_);(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},n=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,e];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}return globalThis}(this);function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}!function(e,r){if(r){var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function r(){this.a=null}function o(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=n.setTimeout;r.prototype.c=function(e){a(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new r;return t.prototype.o=function(e){var t=this.f();e.La(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.La(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.La=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=i(e),a=r.next();!a.done;a=r.next())o(a.value).La(t,n)}))},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t((function(e,t){function i(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).La(i(a.length-1),t),r=n.next()}while(!r.done)}))},t}));var o=o||{},a=this||self;function s(e){return"string"==typeof e}function u(e){return"boolean"==typeof e}var c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(){}function f(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function d(e){return null===e}function p(e){return"array"==f(e)}function v(e){var t=f(e);return"array"==t||"object"==t&&"number"==typeof e.length}function m(e){return"function"==f(e)}function y(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var g="closure_uid_"+(1e9*Math.random()>>>0),_=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function k(e,t,n){return(k=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function C(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var S=Date.now||function(){return+new Date};function E(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function T(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function I(e){if(Error.captureStackTrace)Error.captureStackTrace(this,I);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function A(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");I.call(this,n+e[r])}function N(e,t){throw new A("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function D(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function R(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function x(){this.b=this.a=null}E(I,Error),I.prototype.name="CustomError",E(A,I),A.prototype.name="AssertionError",D.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var O=new D((function(){return new M}),(function(e){e.reset()}));function P(){var e=je,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function M(){this.next=this.b=this.a=null}function L(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break e}}catch(s){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(y(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(s){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;N("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}x.prototype.add=function(e,t){var n=O.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},V=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},U=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=s(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},B=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function j(e,t){return 0<=F(e,t)}function q(e,t){var n;return(n=0<=(t=F(e,t)))&&Array.prototype.splice.call(e,t,1),n}function z(e,t){!function(e,t){for(var n=s(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1)}))}function H(e){return Array.prototype.concat.apply([],arguments)}function K(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function W(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function G(e){for(var t in e)return!1;return!0}function Q(e){var t,n={};for(t in e)n[t]=e[t];return n}var Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Y.length;o++)n=Y[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Z(e,t){this.a=e===ee&&t||"",this.b=$}function J(e){return e instanceof Z&&e.constructor===Z&&e.b===$?e.a:(N("expected object of type Const, got '"+e+"'"),"type_error:Const")}Z.prototype.qa=!0,Z.prototype.pa=function(){return this.a},Z.prototype.toString=function(){return"Const{"+this.a+"}"};var $={},ee={},te=new Z(ee,"");function ne(){this.a="",this.b=se}function re(e){return e instanceof ne&&e.constructor===ne&&e.b===se?e.a:(N("expected object of type TrustedResourceUrl, got '"+e+"' of type "+f(e)),"type_error:TrustedResourceUrl")}function ie(e,t){var n=J(e);if(!ae.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ue(e=n.replace(oe,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof Z?J(e):encodeURIComponent(String(e))})))}ne.prototype.qa=!0,ne.prototype.pa=function(){return this.a.toString()},ne.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var oe=/%{(\w+)}/g,ae=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,se={};function ue(e){var t=new ne;return t.a=e,t}var ce=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},le=/&/g,he=/</g,fe=/>/g,de=/"/g,pe=/'/g,ve=/\x00/g,me=/[\x00&<>"']/;function ye(e,t){return-1!=e.indexOf(t)}function ge(e,t){return e<t?-1:e>t?1:0}function _e(){this.a="",this.b=Se}function be(e){return e instanceof _e&&e.constructor===_e&&e.b===Se?e.a:(N("expected object of type SafeUrl, got '"+e+"' of type "+f(e)),"type_error:SafeUrl")}_e.prototype.qa=!0,_e.prototype.pa=function(){return this.a.toString()},_e.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var we=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function ke(e){return e instanceof _e?e:(e="object"==typeof e&&e.qa?e.pa():String(e),we.test(e)||(e="about:invalid#zClosurez"),Ee(e))}var Ce,Se={};function Ee(e){var t=new _e;return t.a=e,t}Ee("about:blank");e:{var Te=a.navigator;if(Te){var Ie=Te.userAgent;if(Ie){Ce=Ie;break e}}Ce=""}function Ae(e){return ye(Ce,e)}function Ne(){this.a="",this.b=Re}function De(e){return e instanceof Ne&&e.constructor===Ne&&e.b===Re?e.a:(N("expected object of type SafeHtml, got '"+e+"' of type "+f(e)),"type_error:SafeHtml")}Ne.prototype.qa=!0,Ne.prototype.pa=function(){return this.a.toString()},Ne.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Re={};function xe(e){var t=new Ne;return t.a=e,t}xe("<!DOCTYPE html>");var Oe,Pe,Me=xe("");function Le(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Fe(e){return me.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(le,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(he,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(fe,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(de,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(pe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ve,"&#0;"))),e}function Ve(e){a.setTimeout((function(){throw e}),0)}function Ue(e,t){Pe||function(){if(a.Promise&&a.Promise.resolve){var e=a.Promise.resolve(void 0);Pe=function(){e.then(qe)}}else Pe=function(){var e=qe;!m(a.setImmediate)||a.Window&&a.Window.prototype&&!Ae("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(Oe||(Oe=function(){var e=a.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ae("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",function(e){var t=ue(J(te));L(e,"HTMLIFrameElement"),e.src=re(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(De(Me)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=k((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!Ae("Trident")&&!Ae("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){a.setTimeout(e,0)}}()),Oe(e)):a.setImmediate(e)}}(),Be||(Pe(),Be=!0),je.add(e,t)}xe("<br>");var Be=!1,je=new x;function qe(){for(var e;e=P();){try{e.a.call(e.b)}catch(t){Ve(t)}R(O,e)}Be=!1}function ze(e,t){if(this.a=He,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=h)try{var n=this;e.call(t,(function(e){nt(n,Ke,e)}),(function(e){if(!(e instanceof ct))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}nt(n,We,e)}))}catch(r){nt(this,We,r)}}var He=0,Ke=2,We=3;function Ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Qe=new D((function(){return new Ge}),(function(e){e.reset()}));function Ye(e,t,n){var r=Qe.get();return r.g=e,r.b=t,r.f=n,r}function Xe(e){if(e instanceof ze)return e;var t=new ze(h);return nt(t,Ke,e),t}function Ze(e){return new ze((function(t,n){n(e)}))}function Je(e,t,n){rt(e,t,n,null)||Ue(C(t,e))}function $e(e){return new ze((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Je(e[o],C(i,o,!0),C(i,o,!1));else t(r)}))}function et(e,t){e.b||e.a!=Ke&&e.a!=We||it(e),e.f?e.f.next=t:e.b=t,e.f=t}function tt(e,t,n,r){var i=Ye(null,null,null);return i.a=new ze((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof ct?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,et(e,i),i.a}function nt(e,t,n){e.a==He&&(e===n&&(t=We,n=new TypeError("Promise cannot resolve to itself")),e.a=1,rt(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,it(e),t!=We||n instanceof ct||function(e,t){e.g=!0,Ue((function(){e.g&&ut.call(null,t)}))}(e,n)))}function rt(e,t,n,r){if(e instanceof ze)return et(e,Ye(t||h,n||null,r)),!0;if(T(e))return e.then(t,n,r),!0;if(y(e))try{var i=e.then;if(m(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(s){o(s)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function it(e){e.h||(e.h=!0,Ue(e.Zb,e))}function ot(e){var t=null;return e.b&&(e.b=(t=e.b).next,t.next=null),e.b||(e.f=null),t}function at(e,t,n,r){if(n==We&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,st(t,n,r);else try{t.c?t.g.call(t.f):st(t,n,r)}catch(i){ut.call(null,i)}R(Qe,t)}function st(e,t,n){t==Ke?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}ze.prototype.then=function(e,t,n){return tt(this,m(e)?e:null,m(t)?t:null,n)},ze.prototype.$goog_Thenable=!0,(e=ze.prototype).ka=function(e,t){return(e=Ye(e,e,t)).c=!0,et(this,e),this},e.s=function(e,t){return tt(this,null,e,t)},e.cancel=function(e){this.a==He&&Ue((function(){!function e(t,n){if(t.a==He)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==He&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):ot(r),at(r,o,We,n)))}t.c=null}else nt(t,We,n)}(this,new ct(e))}),this)},e.Oc=function(e){this.a=He,nt(this,Ke,e)},e.Pc=function(e){this.a=He,nt(this,We,e)},e.Zb=function(){for(var e;e=ot(this);)at(this,e,this.a,this.i);this.h=!1};var ut=Ve;function ct(e){I.call(this,e)}function lt(){0!=ht&&(ft[this[g]||(this[g]=++_)]=this),this.va=this.va,this.la=this.la}E(ct,I),ct.prototype.name="cancel";var ht=0,ft={};function dt(e){if(!e.va&&(e.va=!0,e.za(),0!=ht)){var t=e[g]||(e[g]=++_);if(0!=ht&&e.la&&0<e.la.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ft[t]}}function pt(e){return pt[" "](e),e}lt.prototype.va=!1,lt.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},pt[" "]=h;var vt,mt,yt=Ae("Opera"),gt=Ae("Trident")||Ae("MSIE"),_t=Ae("Edge"),bt=_t||gt,wt=Ae("Gecko")&&!(ye(Ce.toLowerCase(),"webkit")&&!Ae("Edge"))&&!(Ae("Trident")||Ae("MSIE"))&&!Ae("Edge"),kt=ye(Ce.toLowerCase(),"webkit")&&!Ae("Edge");function Ct(){var e=a.document;return e?e.documentMode:void 0}e:{var St="",Et=(mt=Ce,wt?/rv:([^\);]+)(\)|;)/.exec(mt):_t?/Edge\/([\d\.]+)/.exec(mt):gt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(mt):kt?/WebKit\/(\S+)/.exec(mt):yt?/(?:Version)[ \/]?(\S+)/.exec(mt):void 0);if(Et&&(St=Et?Et[1]:""),gt){var Tt=Ct();if(null!=Tt&&Tt>parseFloat(St)){vt=String(Tt);break e}}vt=St}var It,At={};function Nt(e){return function(e,t){var n=At;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=ce(String(vt)).split("."),r=ce(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ge(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ge(0==a[2].length,0==s[2].length)||ge(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}It=a.document&&gt?Ct():void 0;var Dt=Object.freeze||function(e){return e},Rt=!gt||9<=Number(It),xt=gt&&!Nt("9"),Ot=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",h,t),a.removeEventListener("test",h,t)}catch(n){}return e}();function Pt(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function Mt(e,t){if(Pt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(wt){e:{try{pt(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:Lt[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Pt.prototype.preventDefault=function(){this.Mb=!1},E(Mt,Pt);var Lt=Dt({2:"touch",3:"pen",4:"mouse"});Mt.prototype.preventDefault=function(){Mt.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,xt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Mt.prototype.f=function(){return this.a};var Ft="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function Ut(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Vt,this.ta=this.Ka=!1}function Bt(e){e.ta=!0,e.listener=null,e.proxy=null,e.src=null,e.Pa=null}function jt(e){this.src=e,this.a={},this.b=0}function qt(e,t){var n=t.type;n in e.a&&q(e.a[n],t)&&(Bt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function zt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ta&&o.listener==t&&o.capture==!!n&&o.Pa==r)return i}return-1}jt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=zt(e,t,r,i);return-1<a?(t=e[a],n||(t.Ka=!1)):((t=new Ut(t,this.src,o,!!r,i)).Ka=n,e.push(t)),t};var Ht="closure_lm_"+(1e6*Math.random()|0),Kt={};function Wt(e,t,n,r,i){if(r&&r.once)Qt(e,t,n,r,i);else if(p(t))for(var o=0;o<t.length;o++)Wt(e,t[o],n,r,i);else n=rn(n),e&&e[Ft]?an(e,t,n,y(r)?!!r.capture:!!r,i):Gt(e,t,n,!1,r,i)}function Gt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i,s=tn(e);if(s||(e[Ht]=s=new jt(e)),!(n=s.add(t,n,r,a,o)).proxy)if(r=function(){var e=en,t=Rt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ot||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Zt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function Qt(e,t,n,r,i){if(p(t))for(var o=0;o<t.length;o++)Qt(e,t[o],n,r,i);else n=rn(n),e&&e[Ft]?sn(e,t,n,y(r)?!!r.capture:!!r,i):Gt(e,t,n,!0,r,i)}function Yt(e,t,n,r,i){if(p(t))for(var o=0;o<t.length;o++)Yt(e,t[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=rn(n),e&&e[Ft]?(e=e.u,(t=String(t).toString())in e.a&&-1<(n=zt(o=e.a[t],n,r,i))&&(Bt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=tn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=zt(t,n,r,i)),(n=-1<e?t[e]:null)&&Xt(n))}function Xt(e){if("number"!=typeof e&&e&&!e.ta){var t=e.src;if(t&&t[Ft])qt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Zt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tn(t))?(qt(n,e),0==n.b&&(n.src=null,t[Ht]=null)):Bt(e)}}}function Zt(e){return e in Kt?Kt[e]:Kt[e]="on"+e}function Jt(e,t,n,r){var i=!0;if((e=tn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ta&&(o=$t(o,r),i=i&&!1!==o)}return i}function $t(e,t){var n=e.listener,r=e.Pa||e.src;return e.Ka&&Xt(e),n.call(r,t)}function en(e,t){if(e.ta)return!0;if(!Rt){if(!t)e:{t=["window","event"];for(var n=a,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Mt(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Jt(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Jt(r[i],e,!1,t),n=n&&o}return n}return $t(e,new Mt(t,this))}function tn(e){return(e=e[Ht])instanceof jt?e:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function rn(e){return m(e)?e:(e[nn]||(e[nn]=function(t){return e.handleEvent(t)}),e[nn])}function on(){lt.call(this),this.u=new jt(this),this.Sb=this,this.Xa=null}function an(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function sn(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function un(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&qt(e.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function cn(e,t,n){if(m(e))n&&(e=k(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=k(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function ln(e){var t=null;return new ze((function(n,r){-1==(t=cn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw a.clearTimeout(t),e}))}function hn(e){if(e.U&&"function"==typeof e.U)return e.U();if(s(e))return e.split("");if(v(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function fn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(v(e)||s(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function dn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof dn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];vn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)vn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function vn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}E(on,lt),on.prototype[Ft]=!0,on.prototype.addEventListener=function(e,t,n,r){Wt(this,e,t,n,r)},on.prototype.removeEventListener=function(e,t,n,r){Yt(this,e,t,n,r)},on.prototype.dispatchEvent=function(e){var t,n=this.Xa;if(n)for(t=[];n;n=n.Xa)t.push(n);n=this.Sb;var r=e.type||e;if(s(e))e=new Pt(e,n);else if(e instanceof Pt)e.target=e.target||n;else{var i=e;X(e=new Pt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=un(a,r,!0,e)&&i}if(i=un(a=e.b=n,r,!0,e)&&i,i=un(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=un(a=e.b=t[o],r,!1,e)&&i;return i},on.prototype.za=function(){if(on.qb.za.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Bt(n[r]);delete t.a[e],t.b--}}this.Xa=null},(e=dn.prototype).U=function(){pn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.X=function(){return pn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return vn(this.b,e)?this.b[e]:t},e.set=function(e,t){vn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof yn?(this.h=void 0!==t?t:e.h,gn(this,e.f),this.i=e.i,this.b=e.b,_n(this,e.l),this.c=e.c,bn(this,Un(e.a)),this.g=e.g):e&&(n=String(e).match(mn))?(this.h=!!t,gn(this,n[1]||"",!0),this.i=En(n[2]||""),this.b=En(n[3]||"",!0),_n(this,n[4]),this.c=En(n[5]||"",!0),bn(this,n[6]||"",!0),this.g=En(n[7]||"")):(this.h=!!t,this.a=new On(null,this.h))}function gn(e,t,n){e.f=n?En(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function _n(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.l=t}else e.l=null}function bn(e,t,n){t instanceof On?(e.a=t,function(e,t){t&&!e.f&&(Pn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ln(this,t),Vn(this,n,e))}),e)),e.f=t}(e.a,e.h)):(n||(t=Tn(t,Rn)),e.a=new On(t,e.h))}function wn(e,t,n){e.a.set(t,n)}function kn(e,t){return e.a.get(t)}function Cn(e){return e instanceof yn?new yn(e):new yn(e,void 0)}function Sn(e,t){var n=new yn(null,void 0);return gn(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function En(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Tn(e,t,n){return s(e)?(e=encodeURI(e).replace(t,In),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function In(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Tn(t,An,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(Tn(t,An,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Tn(n,"/"==n.charAt(0)?Dn:Nn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Tn(n,xn)),e.join("")},yn.prototype.resolve=function(e){var t=new yn(this),n=!!e.f;n?gn(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)_n(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ye(i,"./")||ye(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?bn(t,Un(e.a)):n=!!e.g,n&&(t.g=e.g),t};var An=/[#\/\?@]/g,Nn=/[#\?:]/g,Dn=/[#\?]/g,Rn=/[#\?@]/g,xn=/#/g;function On(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Pn(e){e.a||(e.a=new dn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Mn(e){var t=fn(e);if(void 0===t)throw Error("Keys are undefined");var n=new On(null,void 0);e=hn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];p(o)?Vn(n,i,o):n.add(i,o)}return n}function Ln(e,t){Pn(e),t=Bn(e,t),vn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,vn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&pn(e)))}function Fn(e,t){return Pn(e),t=Bn(e,t),vn(e.a.b,t)}function Vn(e,t,n){Ln(e,t),0<n.length&&(e.c=null,e.a.set(Bn(e,t),K(n)),e.b+=n.length)}function Un(e){var t=new On;return t.c=e.c,e.a&&(t.a=new dn(e.a),t.b=e.b),t}function Bn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=On.prototype).add=function(e,t){Pn(this),this.c=null,e=Bn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Pn(this),this.a.forEach((function(n,r){V(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.X=function(){Pn(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.U=function(e){Pn(this);var t=[];if(s(e))Fn(this,e)&&(t=H(t,this.a.get(Bn(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=H(t,e[n])}return t},e.set=function(e,t){return Pn(this),this.c=null,Fn(this,e=Bn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var jn=!gt||9<=Number(It);function qn(e){var t=document;return s(e)?t.getElementById(e):e}function zn(e,t){W(t,(function(t,n){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Hn.hasOwnProperty(n)?e.setAttribute(Hn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var Hn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Kn(e,t,n){function r(n){n&&t.appendChild(s(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!v(o)||y(o)&&0<o.nodeType?r(o):V(Wn(o)?K(o):o,r)}}function Wn(e){if(e&&"number"==typeof e.length){if(y(e))return"function"==typeof e.item||"string"==typeof e.item;if(m(e))return"function"==typeof e.item}return!1}function Gn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(p(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Zn(i,r),r.push(":"),e(t,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Zn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,e,t),t.join("")}function Qn(){}var Yn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Xn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Zn(e,t){t.push('"',e.replace(Xn,(function(e){var t=Yn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Yn[e]=t),t})),'"')}function Jn(){var e=mr();return gt&&!!It&&11==It||/Edge\/\d+/.test(e)}function $n(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function er(e,t){t=t||a.window;var n="about:blank";e&&(n=be(ke(e)).toString()),t.location.href=n}function tr(e){return!!((e=(e||mr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function nr(e){e=e||a.window;try{e.close()}catch(t){}}function rr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(t.target=r,ye(n,"crios/")&&(t.target="_blank")),dr(mr())==fr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof _e?n:ke(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((Ae("iPhone")&&!Ae("iPod")&&!Ae("iPad")||Ae("iPad")||Ae("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(L(a=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof _e||t instanceof _e||(t="object"==typeof t&&t.qa?t.pa():String(t),we.test(t)||(t="about:invalid#zClosurez"),t=Ee(t)),a.href=be(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=be(t).toString(),a&&(bt&&ye(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=xe('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Fe(e)+'">'),a.document.write(De(e)),a.document.close())):(a=r.open(be(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,or=/^[^@]+@[^@]+$/;function ar(){var e=null;return new ze((function(t){"complete"==a.document.readyState?t():(e=function(){t()},Qt(window,"load",e))})).s((function(t){throw Yt(window,"load",e),t}))}function sr(e){return e=e||mr(),!("file:"!==wr()&&"ionic:"!==wr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ur(){var e=a.window;try{return!(!e||e==e.top)}catch(t){return!1}}function cr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function lr(){return m_.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":m_.a.INTERNAL.hasOwnProperty("node")?"Node":cr()?"Worker":"Browser"}function hr(){var e=lr();return"ReactNative"===e||"Node"===e}var fr="Firefox";function dr(e){var t=e.toLowerCase();return ye(t,"opera/")||ye(t,"opr/")||ye(t,"opios/")?"Opera":ye(t,"iemobile")?"IEMobile":ye(t,"msie")||ye(t,"trident/")?"IE":ye(t,"edge/")?"Edge":ye(t,"firefox/")?fr:ye(t,"silk/")?"Silk":ye(t,"blackberry")?"Blackberry":ye(t,"webos")?"Webos":!ye(t,"safari/")||ye(t,"chrome/")||ye(t,"crios/")||ye(t,"android")?!ye(t,"chrome/")&&!ye(t,"crios/")||ye(t,"edge/")?ye(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":"Chrome":"Safari"}var pr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function vr(e,t){t=t||[];var n,r=[],i={};for(n in pr)i[pr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=lr())?r=dr(i=mr()):"Worker"===r&&(r=dr(i=mr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function mr(){return a.navigator&&a.navigator.userAgent||""}function yr(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function gr(){try{var e=a.localStorage,t=Tr();if(e)return e.setItem(t,"1"),e.removeItem(t),!Jn()||!!a.indexedDB}catch(n){return cr()&&!!a.indexedDB}return!1}function _r(){return(br()||"chrome-extension:"===wr()||sr())&&!hr()&&gr()&&!cr()}function br(){return"http:"===wr()||"https:"===wr()}function wr(){return a.location&&a.location.protocol||null}function kr(e){return!tr(e=e||mr())&&dr(e)!=fr}function Cr(e){return void 0===e?null:Gn(e)}function Sr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!=e[t]&&(n[t]=e[t]);return n}function Er(e){if(null!==e)return JSON.parse(e)}function Tr(e){return e||Math.floor(1e9*Math.random()).toString()}function Ir(e){return"Safari"!=dr(e=e||mr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Ar(){var e=a.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Nr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=mr(),t=lr(),this.b=tr(e)||"ReactNative"===t}function Dr(){var e=a.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Rr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function xr(){return!(!yr("fireauth.oauthhelper",a)&&!yr("fireauth.iframe",a))}Nr.prototype.get=function(){var e=a.navigator;return!e||"boolean"!=typeof e.onLine||!br()&&"chrome-extension:"!==wr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Or,Pr={};function Mr(e){Pr[e]||(Pr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Lr={};Object.defineProperty(Lr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Lr,"abcd",{configurable:!0,enumerable:!0,value:2}),Or=2==Lr.abcd}catch(mt){Or=!1}function Fr(e,t,n){Or?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Vr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Fr(e,n,t[n])}function Ur(e){var t={};return Vr(t,e),t}function Br(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Fr(t,n,Br(e[n]));return t}function jr(e){var t={},n=e[zr],r=e[Hr];if(!(e=e[Kr])||e!=qr&&!n)throw Error("Invalid provider user info!");t[Gr]=r||null,t[Wr]=n||null,Fr(this,Yr,e),Fr(this,Qr,Br(t))}var qr="EMAIL_SIGNIN",zr="email",Hr="newEmail",Kr="requestType",Wr="email",Gr="fromEmail",Qr="data",Yr="operation";function Xr(e,t){this.code=Jr+e,this.message=t||$r[e]||""}function Zr(e){var t=e&&e.code;return t?new Xr(t.substring(Jr.length),e.message):null}E(Xr,Error),Xr.prototype.A=function(){return{code:this.code,message:this.message}},Xr.prototype.toJSON=function(){return this.A()};var Jr="auth/",$r={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ei(e){var t=kn(e=Cn(e),ti)||null,n=kn(e,ni)||null,r=kn(e,oi)||null;if(r=r&&si[r]||null,!t||!n||!r)throw new Xr("argument-error",ti+", "+ni+"and "+oi+" are required in a valid action code URL.");Vr(this,{apiKey:t,operation:r,code:n,continueUrl:kn(e,ri)||null,languageCode:kn(e,ii)||null,tenantId:kn(e,ai)||null})}var ti="apiKey",ni="oobCode",ri="continueUrl",ii="languageCode",oi="mode",ai="tenantId",si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:qr,verifyEmail:"VERIFY_EMAIL"};function ui(e){try{return new ei(e)}catch(t){return null}}function ci(e){var t=e[pi];if(void 0===t)throw new Xr("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Xr("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[li];if(n&&"object"==typeof n){t=n[yi];var r=n[vi];if(n=n[mi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Xr("argument-error",vi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Xr("argument-error",mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Xr("argument-error",yi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Xr("missing-android-pkg-name")}}else if(void 0!==n)throw new Xr("argument-error",li+" property must be a non null object when specified.");if(this.f=null,(t=e[di])&&"object"==typeof t){if("string"==typeof(t=t[gi])&&t.length)this.f=t;else if(void 0!==t)throw new Xr("argument-error",gi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Xr("argument-error",di+" property must be a non null object when specified.");if(void 0!==(t=e[fi])&&"boolean"!=typeof t)throw new Xr("argument-error",fi+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[hi])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Xr("argument-error",hi+" property must be a non empty string when specified.");this.i=e||null}var li="android",hi="dynamicLinkDomain",fi="handleCodeInApp",di="iOS",pi="url",vi="installApp",mi="minimumVersion",yi="packageName",gi="bundleId";function _i(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var bi=null,wi=null;function ki(e){this.f=e.sub,S(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Ci(e){return(e=Si(e))&&e.sub&&e.iss&&e.aud&&e.exp?new ki(e):null}function Si(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(function(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=wi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!bi){bi={},wi={};for(var e=0;65>e;e++)bi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),wi[bi[e]]=e,62<=e&&(wi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t+=String.fromCharCode(e)})),t}(e))}catch(r){}return null}ki.prototype.R=function(){return this.c},ki.prototype.g=function(){return this.b};var Ei,Ti={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ii(e){for(var t in Ti)if(Ti[t].id===e)return{firebaseEndpoint:(e=Ti[t]).cb,secureTokenEndpoint:e.ib};return null}Ei=Ii("__EID__")?"__EID__":void 0;var Ai="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ni=["client_id","response_type","scope","redirect_uri","state"],Di={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Ni},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Ni},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Ni},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ai},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function Ri(e){for(var t in Di)if(Di[t].Fa==e)return Di[t];return null}function xi(e){var t={};t["facebook.com"]=Fi,t["google.com"]=Ui,t["github.com"]=Vi,t["twitter.com"]=Bi;var n=e&&e[Pi];try{if(n)return t[n]?new t[n](e):new Li(e);if(void 0!==e[Oi])return new Mi(e)}catch(r){}return null}var Oi="idToken",Pi="providerId";function Mi(e){var t=e[Pi];if(!t&&e[Oi]){var n=Ci(e[Oi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Fr(this,"providerId",t),Fr(this,"isNewUser",n)}function Li(e){Mi.call(this,e),Fr(this,"profile",Br((e=Er(e.rawUserInfo||"{}"))||{}))}function Fi(e){if(Li.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vi(e){if(Li.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",this.profile&&this.profile.login||null)}function Ui(e){if(Li.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Bi(e){if(Li.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",e.screenName||null)}function ji(e){var t=Cn(e),n=kn(t,"link"),r=kn(Cn(n),"link");return t=kn(t,"deep_link_id"),kn(Cn(t),"link")||t||r||n||e}function qi(){}function zi(e,t){return e.then((function(e){if(e[Na]){var n=Ci(e[Na]);if(!n||t!=n.f)throw new Xr("user-mismatch");return e}throw new Xr("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==Jr+"user-not-found"?new Xr("user-mismatch"):e}))}function Hi(e,t){if(!t)throw new Xr("internal-error","failed to construct a credential");this.a=t,Fr(this,"providerId",e),Fr(this,"signInMethod",e)}function Ki(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Wi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Hi(e.providerId,e.pendingToken)}catch(t){}return null}function Gi(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Fr(this,"idToken",t.idToken),t.accessToken&&Fr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Fr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Xr("internal-error","failed to construct a credential");Fr(this,"accessToken",t.oauthToken),Fr(this,"secret",t.oauthTokenSecret)}Fr(this,"providerId",e),Fr(this,"signInMethod",n)}function Qi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Mn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Yi(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Gi(e.providerId,t,e.signInMethod)}catch(n){}}return null}function Xi(e,t){this.Fc=t||[],Vr(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(Ri(e)||{}).Ea||null,this.bb=null}function Zi(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Xr("argument-error",'SAML provider IDs must be prefixed with "saml."');Xi.call(this,e,[])}function Ji(e){Xi.call(this,e,Ni),this.a=[]}function $i(){Ji.call(this,"facebook.com")}function eo(e){if(!e)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new $i).credential({accessToken:t})}function to(){Ji.call(this,"github.com")}function no(e){if(!e)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new to).credential({accessToken:t})}function ro(){Ji.call(this,"google.com"),this.ya("profile")}function io(e,t){var n=e;return y(e)&&(n=e.idToken,t=e.accessToken),(new ro).credential({idToken:n,accessToken:t})}function oo(){Xi.call(this,"twitter.com",Ai)}function ao(e,t){var n=e;if(y(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Xr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Gi("twitter.com",n,"twitter.com")}function so(e,t,n){this.a=e,this.c=t,Fr(this,"providerId","password"),Fr(this,"signInMethod",n===co.EMAIL_LINK_SIGN_IN_METHOD?co.EMAIL_LINK_SIGN_IN_METHOD:co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function uo(e){return e&&e.email&&e.password?new so(e.email,e.password,e.signInMethod):null}function co(){Vr(this,{providerId:"password",isOAuthProvider:!1})}function lo(e,t){if(!(t=ho(t)))throw new Xr("argument-error","Invalid email link!");return new so(e,t.code,co.EMAIL_LINK_SIGN_IN_METHOD)}function ho(e){return(e=ui(e=ji(e)))&&e.operation===qr?e:null}function fo(e){if(!(e.Va&&e.Ua||e.Ha&&e.ba))throw new Xr("internal-error");this.a=e,Fr(this,"providerId","phone"),Fr(this,"signInMethod","phone")}function po(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new fo(t)}return null}function vo(e){return e.a.Ha&&e.a.ba?{temporaryProof:e.a.Ha,phoneNumber:e.a.ba}:{sessionInfo:e.a.Va,code:e.a.Ua}}function mo(e){try{this.a=e||m_.a.auth()}catch(t){throw new Xr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Vr(this,{providerId:"phone",isOAuthProvider:!1})}function yo(e,t){if(!e)throw new Xr("missing-verification-id");if(!t)throw new Xr("missing-verification-code");return new fo({Va:e,Ua:t})}function go(e){if(e.temporaryProof&&e.phoneNumber)return new fo({Ha:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return io(o,n);case"facebook.com":return eo(n);case"github.com":return no(n);case"twitter.com":return ao(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new Hi(t,a):new Gi(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Ji(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function _o(e){if(!e.isOAuthProvider)throw new Xr("invalid-oauth-provider")}function bo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Xr("invalid-auth-event");if(this.g&&this.a)throw new Xr("invalid-auth-event");if(this.g&&!this.f)throw new Xr("invalid-auth-event")}function wo(e){return(e=e||{}).type?new bo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Zr(e.error),e.postBody,e.tenantId):null}function ko(){this.b=null,this.a=[]}E(Li,Mi),E(Fi,Li),E(Vi,Li),E(Ui,Li),E(Bi,Li),Hi.prototype.na=function(e){return Ga(e,Ki(this))},Hi.prototype.b=function(e,t){var n=Ki(this);return n.idToken=t,Qa(e,n)},Hi.prototype.f=function(e,t){return zi(Ya(e,Ki(this)),t)},Hi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Gi.prototype.na=function(e){return Ga(e,Qi(this))},Gi.prototype.b=function(e,t){var n=Qi(this);return n.idToken=t,Qa(e,n)},Gi.prototype.f=function(e,t){return zi(Ya(e,Qi(this)),t)},Gi.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Xi.prototype.Ga=function(e){return this.zb=Q(e),this},E(Zi,Xi),E(Ji,Xi),Ji.prototype.ya=function(e){return j(this.a,e)||this.a.push(e),this},Ji.prototype.Hb=function(){return K(this.a)},Ji.prototype.credential=function(e,t){var n;if(!(n=y(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new Xr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Gi(this.providerId,n,this.providerId)},E($i,Ji),Fr($i,"PROVIDER_ID","facebook.com"),Fr($i,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(to,Ji),Fr(to,"PROVIDER_ID","github.com"),Fr(to,"GITHUB_SIGN_IN_METHOD","github.com"),E(ro,Ji),Fr(ro,"PROVIDER_ID","google.com"),Fr(ro,"GOOGLE_SIGN_IN_METHOD","google.com"),E(oo,Xi),Fr(oo,"PROVIDER_ID","twitter.com"),Fr(oo,"TWITTER_SIGN_IN_METHOD","twitter.com"),so.prototype.na=function(e){return this.signInMethod==co.EMAIL_LINK_SIGN_IN_METHOD?Ss(e,rs,{email:this.a,oobCode:this.c}):Ss(e,bs,{email:this.a,password:this.c})},so.prototype.b=function(e,t){return this.signInMethod==co.EMAIL_LINK_SIGN_IN_METHOD?Ss(e,is,{idToken:t,email:this.a,oobCode:this.c}):Ss(e,ps,{idToken:t,email:this.a,password:this.c})},so.prototype.f=function(e,t){return zi(this.na(e),t)},so.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Vr(co,{PROVIDER_ID:"password"}),Vr(co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Vr(co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fo.prototype.na=function(e){return e.Wa(vo(this))},fo.prototype.b=function(e,t){var n=vo(this);return n.idToken=t,Ss(e,ks,n)},fo.prototype.f=function(e,t){var n=vo(this);return n.operation="REAUTH",zi(e=Ss(e,Cs,n),t)},fo.prototype.A=function(){var e={providerId:"phone"};return this.a.Va&&(e.verificationId=this.a.Va),this.a.Ua&&(e.verificationCode=this.a.Ua),this.a.Ha&&(e.temporaryProof=this.a.Ha),this.a.ba&&(e.phoneNumber=this.a.ba),e},mo.prototype.Wa=function(e,t){var n=this.a.b;return Xe(t.verify()).then((function(r){if(!s(r))throw new Xr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return function(e,t){return Ss(e,fs,t)}(n,{phoneNumber:e,recaptchaToken:r}).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new Xr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Vr(mo,{PROVIDER_ID:"phone"}),Vr(mo,{PHONE_SIGN_IN_METHOD:"phone"}),bo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},bo.prototype.R=function(){return this.h},bo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Co,So=null;function Eo(e){var t="unauthorized-domain",n=void 0,r=Cn(e);e=r.b,"chrome-extension"==(r=r.f)?n=Le("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Le("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Xr.call(this,t,n)}function To(e,t,n){Xr.call(this,e,n),(e=t||{}).Ab&&Fr(this,"email",e.Ab),e.ba&&Fr(this,"phoneNumber",e.ba),e.credential&&Fr(this,"credential",e.credential),e.Qb&&Fr(this,"tenantId",e.Qb)}function Io(e){if(e.code){var t=e.code||"";0==t.indexOf(Jr)&&(t=t.substring(Jr.length));var n={credential:go(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new Xr(t,e.message||void 0);return new To(t,n,e.message)}return null}function Ao(){}function No(){}function Do(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Ro(){}function xo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=k(this.fc,this),this.a.onerror=k(this.Ib,this),this.a.onprogress=k(this.gc,this),this.a.ontimeout=k(this.kc,this)}function Oo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Po(e,t,n){this.reset(e,t,n,void 0,void 0)}function Mo(e){this.f=e,this.b=this.c=this.a=null}function Lo(e,t){this.name=e,this.value=t}E(Eo,Xr),E(To,Xr),To.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&X(e,t),e},To.prototype.toJSON=function(){return this.A()},Ao.prototype.c=null,E(No,Ao),No.prototype.a=function(){var e=Do(this);return e?new ActiveXObject(e):new XMLHttpRequest},No.prototype.b=function(){var e={};return Do(this)&&(e[0]=!0,e[1]=!0),e},Co=new No,E(Ro,Ao),Ro.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new xo;throw Error("Unsupported browser")},Ro.prototype.b=function(){return{}},(e=xo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Oo(this,4)},e.Ib=function(){this.status=500,this.response=this.responseText="",Oo(this,4)},e.kc=function(){this.Ib()},e.gc=function(){this.status=200,Oo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Po.prototype.a=null,Po.prototype.reset=function(e,t,n,r,i){r||S(),delete this.a},Lo.prototype.toString=function(){return this.name};var Fo=new Lo("SEVERE",1e3),Vo=new Lo("WARNING",900),Uo=new Lo("CONFIG",700),Bo=new Lo("FINE",500);Mo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(N("Root logger has no level set."),null)}(this).value)for(m(t)&&(t=t()),e=new Po(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var jo={},qo=null;function zo(e){var t;if(qo||(qo=new Mo(""),jo[""]=qo,qo.c=Uo),!(t=jo[e])){t=new Mo(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=zo(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,jo[e]=t}return t}function Ho(e,t){e&&e.log(Bo,t,void 0)}function Ko(e){this.f=e}function Wo(e){on.call(this),this.o=e,this.readyState=Go,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=zo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}E(Ko,Ao),Ko.prototype.a=function(){return new Wo(this.f)},Ko.prototype.b=function(e){return function(){return e}}({}),E(Wo,on);var Go=0;function Qo(e){e.c.read().then(e.ec.bind(e)).catch(e.Oa.bind(e))}function Yo(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Xo(e)}function Xo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Zo(e){on.call(this),this.headers=new dn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Jo,this.v=this.P=!1}(e=Wo.prototype).open=function(e,t){if(this.readyState!=Go)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,Xo(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Oa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Yo(this,!1)),this.readyState=Go},e.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Xo(this)),this.a&&(this.readyState=3,Xo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==a.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,Qo(this)):e.text().then(this.ic.bind(this),this.Oa.bind(this)))))},e.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Yo(this,!0):Xo(this),3==this.readyState&&Qo(this)}},e.ic=function(e){this.a&&(this.response=this.responseText=e,Yo(this,!0))},e.hc=function(e){this.a&&(this.response=e,Yo(this,!0))},e.Oa=function(e){var t=this.h;t&&t.log(Vo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&Yo(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Vo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Vo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},E(Zo,on);var Jo="";Zo.prototype.b=zo("goog.net.XhrIo");var $o=/^https?$/i,ea=["POST","PUT"];function ta(e){return"content-type"==e.toLowerCase()}function na(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ra(e),oa(e)}function ra(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function ia(e){if(e.c&&void 0!==o)if(e.w[1]&&4==sa(e)&&2==ua(e))Ho(e.b,ca(e,"Local request error detected and ignored"));else if(e.i&&4==sa(e))cn(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==sa(e)){Ho(e.b,ca(e,"Request complete")),e.c=!1;try{var t,n=ua(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.l).match(mn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!$o.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<sa(e)?e.a.statusText:""}catch(l){Ho(e.b,"Can not get status: "+l.message),c=""}e.h=c+" ["+ua(e)+"]",ra(e)}}finally{oa(e)}}}function oa(e,t){if(e.a){aa(e);var n=e.a,r=e.w[0]?h:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(Fo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function aa(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(a.clearTimeout(e.o),e.o=null)}function sa(e){return e.a?e.a.readyState:0}function ua(e){try{return 2<sa(e)?e.a.status:-1}catch(t){return-1}}function ca(e,t){return t+" ["+e.O+" "+e.l+" "+ua(e)+"]"}function la(e){var t=wa;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function ha(e,t,n){e.a=!0,e.c=n,e.f=!t,va(e)}function fa(e){if(e.a){if(!e.u)throw new ma(e);e.u=!1}}function da(e,t,n,r){e.g.push([t,n,r]),e.a&&va(e)}function pa(e){return B(e.g,(function(e){return m(e[1])}))}function va(e){if(e.h&&e.a&&pa(e)){var t=e.h,n=_a[t];n&&(a.clearTimeout(n.a),delete _a[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var u=o.call(i||e.o,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(T(t)||"function"==typeof a.Promise&&t instanceof a.Promise)&&(r=!0,e.i=!0)}catch(c){t=c,e.f=!0,pa(e)||(n=!0)}}e.c=t,r&&(u=k(e.m,e,!0),r=k(e.m,e,!1),t instanceof la?(da(t,u,r),t.w=!0):t.then(u,r)),n&&(t=new ga(t),_a[t.a]=t,e.h=t.a)}function ma(){I.call(this)}function ya(){I.call(this)}function ga(e){this.a=a.setTimeout(k(this.c,this),0),this.b=e}(e=Zo.prototype).Ia=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ho(this.b,ca(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Ho(this.b,ca(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),oa(this))},e.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),oa(this,!0)),Zo.qb.za.call(this)},e.Lb=function(){this.va||(this.J||this.i||this.f?ia(this):this.yc())},e.yc=function(){ia(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Jo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Fo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Ho(this.b,"Can not get response: "+t.message),null}},la.prototype.cancel=function(e){if(this.a)this.c instanceof la&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new ya(this),fa(this),ha(this,!1,e))}},la.prototype.m=function(e,t){this.i=!1,ha(this,e,t)},la.prototype.then=function(e,t,n){var r,i,o=new ze((function(e,t){r=e,i=t}));return da(this,r,(function(e){e instanceof ya?o.cancel():i(e)})),o.then(e,t,n)},la.prototype.$goog_Thenable=!0,E(ma,I),ma.prototype.message="Deferred has already fired",ma.prototype.name="AlreadyCalledError",E(ya,I),ya.prototype.message="Deferred was canceled",ya.prototype.name="CanceledError",ga.prototype.c=function(){throw delete _a[this.a],this.b};var _a={};function ba(e){var t={},n=t.document||document,r=re(e).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},s=new la(o),u=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(u=window.setTimeout((function(){ka(i,!0);var e=new Ea(Sa,"Timeout reached for loading script "+r);fa(s),ha(s,!1,e)}),h),o.Ia=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(ka(i,t.gd||!1,u),fa(s),ha(s,!0,null))},i.onerror=function(){ka(i,!0,u);var e=new Ea(Ca,"Error while loading script "+r);fa(s),ha(s,!1,e)},X(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),zn(i,o),function(e,t){L(e,"HTMLScriptElement"),e.src=re(t),null===l&&(l=(t=(t=a.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""),(t=l)&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),s}function wa(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&ka(e,!0,this.Ia)}}function ka(e,t,n){null!=n&&a.clearTimeout(n),e.onload=h,e.onerror=h,e.onreadystatechange=h,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Ca=0,Sa=1;function Ea(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),I.call(this,n),this.code=e}function Ta(e){this.f=e}function Ia(e,t,n){if(this.c=e,this.l=(e=t||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||Da,this.g=Q(e.secureTokenHeaders||Ra),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||xa,this.a=Q(e.firebaseHeaders||Oa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=a.XMLHttpRequest||n&&m_.a.INTERNAL.node&&m_.a.INTERNAL.node.XMLHttpRequest)&&!cr())throw new Xr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=cr()?new Ko(self):hr()?new Ta(n):new Ro,this.b=null}E(Ea,I),E(Ta,Ao),Ta.prototype.a=function(){return new this.f},Ta.prototype.b=function(){return{}};var Aa,Na="idToken",Da=new Nr(3e4,6e4),Ra={"Content-Type":"application/x-www-form-urlencoded"},xa=new Nr(3e4,6e4),Oa={"Content-Type":"application/json"};function Pa(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Ma(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function La(e,t,n,r,i,o,s){(function(){var e=mr();return!((e="Chrome"!=dr(e)?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||gt&&It&&!(9<It))})()||cr()?e=k(e.o,e):(Aa||(Aa=new ze((function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(a[Va]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){da(e,null,t,void 0)}(ba(ie(Fa,{onload:Va})),(function(){t(Error("CORS_UNSUPPORTED"))})))}(e,t)}))),e=k(e.m,e)),e(t,n,r,i,o,s)}Ia.prototype.R=function(){return this.b},Ia.prototype.o=function(e,t,n,r,i,o){if(cr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new Xr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new Zo(this.f);if(o){u.g=Math.max(0,o);var c=setTimeout((function(){u.dispatchEvent("timeout")}),o)}an(u,"complete",(function(){c&&clearTimeout(c);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Ho(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),sn(u,"ready",(function(){c&&clearTimeout(c),dt(this)})),sn(u,"timeout",(function(){c&&clearTimeout(c),dt(this),t&&t(null)})),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():Co.a(),e.w=function(e){return e.c||(e.c=e.b())}(e.B?e.B:Co),e.a.onreadystatechange=k(e.Lb,e);try{Ho(e.b,ca(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(u){return Ho(e.b,ca(e,"Error opening Xhr: "+u.message)),void na(e,u)}t=r||"";var o=new dn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(v(e)||s(e))V(e,t,void 0);else for(var n=fn(e),r=hn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=ta,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(o.X()),r=a.FormData&&t instanceof a.FormData,!j(ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{aa(e),0<e.g&&(e.v=function(e){return gt&&Nt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),Ho(e.b,ca(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=k(e.Ia,e)):e.o=cn(e.Ia,e.g,e)),Ho(e.b,ca(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(u){Ho(e.b,ca(e,"Send error: "+u.message)),na(e,u)}}(u,e,n,r,i)};var Fa=new Z(ee,"https://apis.google.com/js/client.js?onload=%{onload}"),Va="__fcb"+Math.floor(1e6*Math.random()).toString();function Ua(e){if(!s(e=e.email)||!or.test(e))throw new Xr("invalid-email")}function Ba(e){"email"in e&&Ua(e)}function ja(e){if(!e[Na])throw new Xr("internal-error")}function qa(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Xr("internal-error")}else{if(!e.sessionInfo)throw new Xr("missing-verification-id");if(!e.code)throw new Xr("missing-verification-code")}}Ia.prototype.m=function(e,t,n,r,i){var o=this;Aa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ia.prototype.ob=function(){return Ss(this,vs,{})},Ia.prototype.rb=function(e,t){return Ss(this,ds,{idToken:e,email:t})},Ia.prototype.sb=function(e,t){return Ss(this,ps,{idToken:e,password:t})};var za={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ha(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Xr("internal-error")}function Ka(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Fn(e=new On(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function Wa(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Io(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Io(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Io(e)):e.errorMessage&&(t=Es(e.errorMessage)),t)throw t;if(!e[Na])throw new Xr("internal-error")}function Ga(e,t){return t.returnIdpCredential=!0,Ss(e,ms,t)}function Qa(e,t){return t.returnIdpCredential=!0,Ss(e,gs,t)}function Ya(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Ss(e,ys,t)}function Xa(e){if(!e.oobCode)throw new Xr("invalid-action-code")}(e=Ia.prototype).tb=function(e,t){var n={idToken:e},r=[];return W(za,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ss(this,ds,n)},e.kb=function(e,t){return X(e={requestType:"PASSWORD_RESET",email:e},t),Ss(this,us,e)},e.lb=function(e,t){return X(e={requestType:"EMAIL_SIGNIN",email:e},t),Ss(this,as,e)},e.jb=function(e,t){return X(e={requestType:"VERIFY_EMAIL",idToken:e},t),Ss(this,ss,e)},e.Wa=function(e){return Ss(this,ws,e)},e.ab=function(e,t){return Ss(this,hs,{oobCode:e,newPassword:t})},e.Ma=function(e){return Ss(this,Ja,{oobCode:e})},e.Ya=function(e){return Ss(this,Za,{oobCode:e})};var Za={endpoint:"setAccountInfo",D:Xa,fa:"email",F:!0},Ja={endpoint:"resetPassword",D:Xa,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Xr("internal-error")},F:!0},$a={endpoint:"signupNewUser",D:function(e){if(Ua(e),!e.password)throw new Xr("weak-password")},K:ja,T:!0,F:!0},es={endpoint:"createAuthUri",F:!0},ts={endpoint:"deleteAccount",V:["idToken"]},ns={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!p(e.deleteProvider))throw new Xr("internal-error")}},rs={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Ua,K:ja,T:!0,F:!0},is={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Ua,K:ja,T:!0},os={endpoint:"getAccountInfo"},as={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Xr("internal-error");Ua(e)},fa:"email",F:!0},ss={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Xr("internal-error")},fa:"email",F:!0},us={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Xr("internal-error");Ua(e)},fa:"email",F:!0},cs={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},ls={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new Xr("internal-error")}},hs={endpoint:"resetPassword",D:Xa,fa:"email",F:!0},fs={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},ds={endpoint:"setAccountInfo",V:["idToken"],D:Ba,T:!0},ps={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(Ba(e),!e.password)throw new Xr("weak-password")},K:ja,T:!0},vs={endpoint:"signupNewUser",K:ja,T:!0,F:!0},ms={endpoint:"verifyAssertion",D:Ha,Ra:Ka,K:Wa,T:!0,F:!0},ys={endpoint:"verifyAssertion",D:Ha,Ra:Ka,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Xr("user-not-found");if(e.errorMessage)throw Es(e.errorMessage);if(!e[Na])throw new Xr("internal-error")},T:!0,F:!0},gs={endpoint:"verifyAssertion",D:function(e){if(Ha(e),!e.idToken)throw new Xr("internal-error")},Ra:Ka,K:Wa,T:!0},_s={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Xr("invalid-custom-token")},K:ja,T:!0,F:!0},bs={endpoint:"verifyPassword",D:function(e){if(Ua(e),!e.password)throw new Xr("wrong-password")},K:ja,T:!0,F:!0},ws={endpoint:"verifyPhoneNumber",D:qa,K:ja,F:!0},ks={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Xr("internal-error");qa(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Io(e);ja(e)}},Cs={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:qa,K:ja,F:!0};function Ss(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.V))return Ze(new Xr("internal-error"));var r,i=t.Kb||"POST";return Xe(n).then(t.D).then((function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o){var a=Cn(e.h+t);wn(a,"key",e.c),o&&wn(a,"cb",S().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&wn(a,u,r[u]);return new ze((function(t,o){La(e,a.toString(),(function(e){e?e.error?o(Ts(e,i||{})):t(e):o(new Xr("network-request-failed"))}),n,s?void 0:Gn(Sr(r)),e.a,e.i.get())}))}(e,t.endpoint,i,n,t.Yb,t.wb||!1)})).then((function(e){return r=e,t.Ra?t.Ra(n,r):r})).then(t.K).then((function(){if(!t.fa)return r;if(!(t.fa in r))throw new Xr("internal-error");return r[t.fa]}))}function Es(e){return Ts({error:{errors:[{message:e}],code:400,message:e}})}function Ts(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Xr(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",X(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Xr(r[i],t);return!t&&e&&(t=Cr(e)),new Xr("internal-error",t)}function Is(e){this.b=e,this.a=null,this.gb=function(e){return(Rs||(Rs=new ze((function(e,t){function n(){Ar(),yr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Ar(),t(Error("Network Error"))},timeout:Ns.get()})}if(yr("gapi.iframes.Iframe"))e();else if(yr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){yr("gapi.load")?n():t(Error("Network Error"))},Xe(ba(r=ie(As,{onload:r}))).s((function(){t(Error("Network Error"))}))}})).s((function(e){throw Rs=null,e})))).then((function(){return new ze((function(t,n){yr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Ds.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var As=new Z(ee,"https://apis.google.com/js/api.js?onload=%{onload}"),Ns=new Nr(3e4,6e4),Ds=new Nr(5e3,15e3),Rs=null;function xs(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Sn(this.i,"/__/auth/iframe"),wn(this.a,"apiKey",this.g),wn(this.a,"appName",this.h),this.b=null,this.c=[]}function Os(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Ps(e){try{return m_.a.app(e).auth().Ca()}catch(t){return[]}}function Ms(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Ls(e){var t=$n();return function(e){return Ss(e,cs,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Cn(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Cn(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:ir.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Eo($n())}))}function Fs(e){return e.l?e.l:(e.l=ar().then((function(){if(!e.o){var t=e.c,n=e.h,r=Ps(e.b),i=new xs(e.u,e.f,e.b);i.f=t,i.b=n,i.c=K(r||[]),e.o=i.toString()}e.i=new Is(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.gb.then((function(){e.a.register("authEvent",t,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=wo(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Xe(n)}return n.status="ERROR",Xe(n)}))}(e)})),e.l)}function Vs(e){return e.m||(e.v=e.c?vr(e.c,Ps(e.b)):null,e.m=new Ia(e.f,Ii(e.h),e.v)),e.m}function Us(e,t,n,r,i,o,a,s,u,c,l){return(e=new Os(e,t,n,r,i)).l=o,e.g=a,e.i=s,e.b=Q(u||null),e.f=c,e.nb(l).toString()}function Bs(e){if(this.a=e||m_.a.INTERNAL.reactNative&&m_.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Xr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function js(e){this.b=e,this.a={},this.f=k(this.c,this)}xs.prototype.toString=function(){return this.f?wn(this.a,"v",this.f):Ln(this.a.a,"v"),this.b?wn(this.a,"eid",this.b):Ln(this.a.a,"eid"),this.c.length?wn(this.a,"fw",this.c.join(",")):Ln(this.a.a,"fw"),this.a.toString()},Os.prototype.nb=function(e){return this.h=e,this},Os.prototype.toString=function(){var e=Sn(this.o,"/__/auth/handler");if(wn(e,"apiKey",this.m),wn(e,"appName",this.c),wn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=m_.a.app(this.c).auth().ha()}catch(s){n=null}for(var r in t.bb=n,wn(e,"providerId",this.a.providerId),n=Sr((t=this.a).zb))n[r]=n[r].toString();r=t.Fc,n=Q(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}t.eb&&t.bb&&!n[t.eb]&&(n[t.eb]=t.bb),G(n)||wn(e,"customParameters",Cr(n))}if("function"==typeof this.a.Hb&&(t=this.a.Hb()).length&&wn(e,"scopes",t.join(",")),this.l?wn(e,"redirectUrl",this.l):Ln(e.a,"redirectUrl"),this.g?wn(e,"eventId",this.g):Ln(e.a,"eventId"),this.i?wn(e,"v",this.i):Ln(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!kn(e,a)&&wn(e,a,this.b[a]);return this.h?wn(e,"tid",this.h):Ln(e.a,"tid"),this.f?wn(e,"eid",this.f):Ln(e.a,"eid"),(a=Ps(this.c)).length&&wn(e,"fw",a.join(",")),e.toString()},(e=Ms.prototype).Fb=function(e,t,n){var r=new Xr("popup-closed-by-user"),i=new Xr("web-storage-unsupported"),o=this,a=!1;return this.ia().then((function(){(function(e){var t={type:"webStorageSupport"};return Fs(e).then((function(){return function(e,t){return e.gb.then((function(){return new ze((function(n){e.a.send(t.type,t,n,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&nr(e),t(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(e){return new ze((function(t){return function n(){ln(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return ln(n).then((function(){t(r)}))}))},e.Ob=function(){var e=mr();return!kr(e)&&!Ir(e)},e.Jb=function(){return!1},e.Db=function(e,t,n,r,i,o,a,s){if(!e)return Ze(new Xr("popup-blocked"));if(a&&!kr())return this.ia().s((function(t){nr(e),i(t)})),r(),Xe();this.a||(this.a=Ls(Vs(this)));var u=this;return this.a.then((function(){var t=u.ia().s((function(t){throw nr(e),i(t),t}));return r(),t})).then((function(){_o(n),a||er(Us(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Eb=function(e,t,n,r){this.a||(this.a=Ls(Vs(this)));var i=this;return this.a.then((function(){_o(t),er(Us(i.u,i.f,i.b,e,t,$n(),n,i.c,void 0,i.h,r))})).s((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ia=function(){var e=this;return Fs(this).then((function(){return e.i.gb})).s((function(){throw e.a=null,new Xr("network-request-failed")}))},e.Rb=function(){return!0},e.Aa=function(e){this.g.push(e)},e.Na=function(e){z(this.g,(function(t){return t==e}))},(e=Bs.prototype).get=function(e){return Xe(this.a.getItem(e)).then((function(e){return e&&Er(e)}))},e.set=function(e,t){return Xe(this.a.setItem(e,Cr(t)))},e.S=function(e){return Xe(this.a.removeItem(e))},e.$=function(){},e.ea=function(){};var qs,zs=[];function Hs(e,t,n){G(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Ks(e){this.a=e}function Ws(e){this.c=e,this.b=!1,this.a=[]}function Gs(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Ze(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ze((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),e.a.push(c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Qs(e,c),t})).s((function(t){throw Qs(e,c),t}))}function Qs(e,t){if(t){var n=t.messageChannel;n&&(n.port1.removeEventListener("message",t.onMessage),n.port1.close()),z(e.a,(function(e){return e==t}))}}function Ys(){if(!Zs())throw new Xr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=a.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var e=this;cr()&&self?(this.l=function(){var e=cr()?self:null;if(V(zs,(function(n){n.b==e&&(t=n)})),!t){var t=new js(e);zs.push(t)}return t}(),Hs(this.l,"keyChanged",(function(t,n){return nu(e).then((function(t){return 0<t.length&&V(e.a,(function(e){e(t)})),{keyProcessed:j(t,n.key)}}))})),Hs(this.l,"ping",(function(){return Xe(["keyChanged"])}))):function(){var e=a.navigator;return e&&e.serviceWorker?Xe().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).s((function(){return null})):Xe(null)}().then((function(t){(e.h=t)&&(e.g=new Ws(new Ks(t)),Gs(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&j(t[0].value,"keyChanged")&&(e.o=!0)})).s((function(){})))}))}function Xs(e){return e.m||(e.m=function e(t){return new ze((function(n,r){var i=t.u.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(t){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(e){return new ze((function(t,n){var r=e.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(t).then((function(){return e(t)})).then((function(e){n(e)})).s((function(e){r(e)}))}}))}(e)),e.m}function Zs(){try{return!!a.indexedDB}catch(mt){return!1}}function Js(e){return e.objectStore("firebaseLocalStorage")}function $s(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function eu(e){return new ze((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function tu(e,t){return e.g&&e.h&&function(){var e=a.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Gs(e.g,"keyChanged",{key:t},e.o).then((function(){})).s((function(){})):Xe()}function nu(e){return Xs(e).then((function(e){var t=Js($s(e,!1));return t.getAll?eu(t.getAll()):new ze((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function ru(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function iu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Xe().then((function(){if(Zs()){var e=Tr(),r="__sak"+e;return qs||(qs=new Ys),(n=qs).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.$((function(e){V(t.a,(function(t){t(e)}))})),e}))}function ou(){this.a={},this.type="inMemory"}function au(){if(!function(){var e="Node"==lr();if(!(e=su()||e&&m_.a.INTERNAL.node&&m_.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new Xr("internal-error","The LocalStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=su()||m_.a.INTERNAL.node.localStorage,this.type="localStorage"}function su(){try{var e=a.localStorage,t=Tr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function uu(){this.type="nullStorage"}function cu(){if(!function(){var e="Node"==lr();if(!(e=lu()||e&&m_.a.INTERNAL.node&&m_.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new Xr("internal-error","The SessionStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=lu()||m_.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function lu(){try{var e=a.sessionStorage,t=Tr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function hu(){var e={};e.Browser=pu,e.Node=vu,e.ReactNative=mu,e.Worker=yu,this.a=e[lr()]}js.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];V(r,(function(t){i.push(Xe().then((function(){return t(e.origin,e.data.data)})))})),$e(i).then((function(r){var i=[];V(r,(function(e){i.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})})),V(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Ks.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Ws.prototype.close=function(){for(;0<this.a.length;)Qs(this,this.a[0]);this.b=!0},(e=Ys.prototype).set=function(e,t){var n,r=!1,i=this;return Xs(this).then((function(t){return eu((t=Js($s(n=t,!0))).get(e))})).then((function(o){var a=Js($s(n,!0));return o?(o.value=t,eu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,eu(a.add(o)))})).then((function(){return i.c[e]=t,tu(i,e)})).ka((function(){r&&i.b--}))},e.get=function(e){return Xs(this).then((function(t){return eu(Js($s(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.S=function(e){var t=!1,n=this;return Xs(this).then((function(r){return t=!0,n.b++,eu(Js($s(r,!0)).delete(e))})).then((function(){return delete n.c[e],tu(n,e)})).ka((function(){t&&n.b--}))},e.$=function(e){0==this.a.length&&function(e){ru(e),function t(){e.f=setTimeout((function(){e.i=nu(e).then((function(t){0<t.length&&V(e.a,(function(e){e(t)}))})).then((function(){t()})).s((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},e.ea=function(e){z(this.a,(function(t){return t==e})),0==this.a.length&&ru(this)},(e=iu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.S=function(e){return this.b.then((function(t){return t.S(e)}))},e.$=function(e){this.a.push(e)},e.ea=function(e){z(this.a,(function(t){return t==e}))},(e=ou.prototype).get=function(e){return Xe(this.a[e])},e.set=function(e,t){return this.a[e]=t,Xe()},e.S=function(e){return delete this.a[e],Xe()},e.$=function(){},e.ea=function(){},(e=au.prototype).get=function(e){var t=this;return Xe().then((function(){return Er(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Xe().then((function(){var r=Cr(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Xe().then((function(){t.a.removeItem(e)}))},e.$=function(e){a.window&&Wt(a.window,"storage",e)},e.ea=function(e){a.window&&Yt(a.window,"storage",e)},(e=uu.prototype).get=function(){return Xe(null)},e.set=function(){return Xe()},e.S=function(){return Xe()},e.$=function(){},e.ea=function(){},(e=cu.prototype).get=function(e){var t=this;return Xe().then((function(){return Er(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Xe().then((function(){var r=Cr(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Xe().then((function(){t.a.removeItem(e)}))},e.$=function(){},e.ea=function(){};var fu,du,pu={C:au,Ta:cu},vu={C:au,Ta:cu},mu={C:Bs,Ta:uu},yu={C:au,Ta:uu},gu={ad:"local",NONE:"none",cd:"session"};function _u(){var e=!(Ir(mr())||!ur()),t=kr(),n=gr();this.m=e,this.h=t,this.l=n,this.a={},fu||(fu=new hu),e=fu;try{this.g=!Jn()&&xr()||!a.indexedDB?new e.a.C:new iu(cr()?new ou:new e.a.C)}catch(r){this.g=new ou,this.h=!0}try{this.i=new e.a.Ta}catch(r){this.i=new ou}this.u=new ou,this.f=k(this.Pb,this),this.b={}}function bu(){return du||(du=new _u),du}function wu(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function ku(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Cu(e,t,n){return n=ku(t,n),"local"==t.C&&(e.b[n]=null),wu(e,t.C).S(n)}function Su(e){e.c&&(clearInterval(e.c),e.c=null)}function Eu(e){this.a=e,this.b=bu()}(e=_u.prototype).get=function(e,t){return wu(this,e.C).get(ku(e,t))},e.set=function(e,t,n){var r=ku(e,n),i=this,o=wu(this,e.C);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.C&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=ku(e,t),this.l&&(this.b[e]=a.localStorage.getItem(e)),G(this.a)&&(wu(this,"local").$(this.f),this.h||(Jn()||!xr())&&a.indexedDB||!this.l||function(e){Su(e),e.c=setInterval((function(){for(var t in e.a){var n=a.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Mt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Pb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=ku(e,t),this.a[e]&&(z(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),G(this.a)&&(wu(this,"local").ea(this.f),Su(this))},e.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?wu(this,"local").ea(this.f):Su(this),this.m)if(n=a.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?a.localStorage.setItem(t,r):a.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===a.localStorage.getItem(t)||(o.b[t]=a.localStorage.getItem(t),o.$a(t))},gt&&It&&10==It&&a.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else V(e,k(this.$a,this))},e.$a=function(e){this.a[e]&&V(this.a[e],(function(e){e()}))};var Tu,Iu={name:"authEvent",C:"local"};function Au(){this.a=bu()}function Nu(e,t){this.b=Du,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0!==Tu||(Tu=a.Int32Array?new Int32Array(Fu):Fu),this.reset()}E(Nu,(function(){this.b=-1}));for(var Du=64,Ru=Du-1,xu=[],Ou=0;Ou<Ru;Ou++)xu[Ou]=0;var Pu=H(128,xu);function Mu(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){var o=(0|n[t-16])+(((i=0|n[t-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+(((r=0|n[t-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Tu[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Lu(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(s(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Mu(e),i=0);else{if(!v(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Mu(e),i=0)}}e.c=i,e.g+=n}Nu.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):K(this.h)};var Fu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Vu(){Nu.call(this,8,Uu)}E(Vu,Nu);var Uu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Bu(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new Au,this.g=new Eu(this.h),this.f=null,this.b=[],this.a=this.c=null}function ju(e){return new Xr("invalid-cordova-configuration",e)}function qu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function zu(e){return e.f||(e.f=e.ia().then((function(){return new ze((function(t){e.Aa((function n(r){return t(r),e.Na(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Hu(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=ji(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Er(kn(o=Cn(i),"firebaseError")||null))?Zr(o):null)?new bo(r.c,r.b,null,null,o,null,r.R()):new bo(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}qu(e,i)}))}var n=new bo("unknown",null,null,null,new Xr("no-auth-event")),r=!1,i=ln(500).then((function(){return Hu(e).then((function(){r||qu(e,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(yr("BuildInfo.packageName",a).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(n){console.error(n)}},So||(So=new ko),function(e){var t=So;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=yr("universalLinks.subscribe",a))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Hu(e){var t=null;return function(e){return e.b.get(Iu,e.a).then((function(e){return wo(e)}))}(e.g).then((function(n){return t=n,Cu((n=e.g).b,Iu,n.a)})).then((function(){return t}))}function Ku(e){this.a=e,this.b=bu()}(e=Bu.prototype).ia=function(){return this.Da?this.Da:this.Da=(sr(void 0)?ar().then((function(){return new ze((function(e,t){var n=a.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Ze(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof yr("universalLinks.subscribe",a))throw ju("cordova-universal-links-plugin-fix is not installed");if(void 0===yr("BuildInfo.packageName",a))throw ju("cordova-plugin-buildinfo is not installed");if("function"!=typeof yr("cordova.plugins.browsertab.openUrl",a))throw ju("cordova-plugin-browsertab is not installed");if("function"!=typeof yr("cordova.InAppBrowser.open",a))throw ju("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Xr("cordova-not-ready")}))},e.Fb=function(e,t){return t(new Xr("operation-not-supported-in-this-environment")),Xe()},e.Db=function(){return Ze(new Xr("operation-not-supported-in-this-environment"))},e.Rb=function(){return!1},e.Ob=function(){return!0},e.Jb=function(){return!0},e.Eb=function(e,t,n,r){if(this.c)return Ze(new Xr("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Xe().then((function(){return _o(t),zu(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),s=new bo(t,r,null,o,new Xr("no-auth-event"),null,i),u=yr("BuildInfo.packageName",a);if("string"!=typeof u)throw new Xr("invalid-cordova-configuration");var c=yr("BuildInfo.displayName",a),l={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!mr().toLowerCase().match(/android/))return Ze(new Xr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(e){var t=new Vu;Lu(t,e),e=[];var n=8*t.g;Lu(t,Pu,56>t.c?56-t.c:t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Mu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return U(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}(o),l.sessionId=o;var h=Us(e.u,e.i,e.l,t,n,null,r,e.m,l,e.o,i);return e.ia().then((function(){var t=e.h;return e.v.a.set(Iu,s.A(),t)})).then((function(){var t=yr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof t)throw new Xr("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=yr("cordova.plugins.browsertab.openUrl",a)))throw new Xr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=yr("cordova.InAppBrowser.open",a)))throw new Xr("invalid-cordova-configuration");t=mr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new ze((function(e,t){u=function(){var t=yr("cordova.plugins.browsertab.close",a);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(u),l=function(){Dr()&&c()},o.addEventListener("resume",c=function(){s||(s=ln(2e3).then((function(){t(new Xr("redirect-cancelled-by-user"))})))},!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(e){return Hu(i).then((function(){throw e}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Na(u),i.c=null}))},e.Aa=function(e){this.b.push(e),zu(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new bo("unknown",null,null,null,new Xr("no-auth-event")),e(t))}))},e.Na=function(e){z(this.b,(function(t){return t==e}))};var Wu={name:"pendingRedirect",C:"session"};function Gu(e){return Cu(e.b,Wu,e.a)}function Qu(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=k(this.o,this),this.b=new uc,this.w=new dc,this.g=new Ku(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Yu(this.B,this.u,this.m,Ei)}function Yu(e,t,n,r){var i=m_.a.SDK_VERSION||null;return sr()?new Bu(e,t,n,i,r):new Ms(e,t,n,i,r)}function Xu(e){e.f||(e.f=!0,e.a.Aa(e.l));var t=e.a;return e.a.ia().s((function(n){throw e.a==t&&e.reset(),n}))}function Zu(e){e.a.Ob()&&Xu(e).s((function(t){var n=new bo("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));rc(t)&&e.o(n)})),e.a.Jb()||cc(e.b)}function Ju(e,t){j(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Wu,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Gu(e.g).then((function(){Xu(e).s((function(t){var n=new bo("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));rc(t)&&e.o(n)}))})):Zu(e)})).s((function(){Zu(e)}))}function $u(e,t){z(e.h,(function(e){return e==t}))}Qu.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=Yu(this.B,this.u,this.m),this.i={}},Qu.prototype.o=function(e){if(!e)throw new Xr("invalid-auth-event");if(6e5<=S()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=S())),t=!0;break}}return cc(this.b),t};var ec=new Nr(2e3,1e4),tc=new Nr(3e4,6e4);function nc(e,t,n,r,i,o,a){return e.a.Db(t,n,r,(function(){e.f||(e.f=!0,e.a.Aa(e.l))}),(function(){e.reset()}),i,o,a)}function rc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function ic(e,t,n,r,i){var o;return function(e){return e.b.set(Wu,"pending",e.a)}(e.g).then((function(){return e.a.Eb(t,n,r,i).s((function(t){if(rc(t))throw new Xr("operation-not-supported-in-this-environment");return o=t,Gu(e.g).then((function(){throw o}))})).then((function(){return e.a.Rb()?new ze((function(){})):Gu(e.g).then((function(){return e.oa()})).then((function(){})).s((function(){}))}))}))}function oc(e,t,n,r,i){return e.a.Fb(r,(function(e){t.ja(n,null,e,i)}),ec.get())}Qu.prototype.oa=function(){return this.b.oa()};var ac={};function sc(e,t,n){var r=t+":"+n;return ac[r]||(ac[r]=new Qu(e,t,n)),ac[r]}function uc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function cc(e){e.g||(e.g=!0,fc(e,!1,null,null))}function lc(e){e.g&&!e.i&&fc(e,!1,null,null)}function hc(e,t){if(e.b=function(){return Xe(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function fc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Ze(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):hc(e,n):hc(e,{user:null}),e.f=[],e.c=[]}function dc(){}function pc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function vc(e,t){this.a=t,Fr(this,"verificationId",e)}function mc(e,t,n,r){return new mo(e).Wa(t,n).then((function(e){return new vc(e,r)}))}function yc(e){var t=Si(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Xr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Vr(this,{token:e,expirationTime:Rr(1e3*t.exp),authTime:Rr(1e3*t.auth_time),issuedAtTime:Rr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function gc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function _c(e){this.f=e,this.b=this.a=null,this.c=0}function bc(e,t){var n=t[Na],r=t.refreshToken;t=wc(t.expiresIn),e.b=n,e.c=t,e.a=r}function wc(e){return S()+1e3*parseInt(e,10)}function kc(e,t){this.a=e||null,this.b=t||null,Vr(this,{lastSignInTime:Rr(t||null),creationTime:Rr(e||null)})}function Cc(e,t,n,r,i,o){Vr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Sc(e,t){for(var n in Pt.call(this,e),t)this[n]=t[n]}function Ec(e,t,n){this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=m_.a.SDK_VERSION?vr(m_.a.SDK_VERSION):null,this.a=new Ia(this.l,Ii(Ei),e),this.b=new _c(this.a),xc(this,t[Na]),bc(this.b,t),Fr(this,"refreshToken",this.b.a),Mc(this,n||{}),on.call(this),this.J=!1,this.o&&_r()&&(this.i=sc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(e){return new gc((function(){return e.G(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-S()-3e5;return 0<t?t:0}))}(this),this.W=k(this.Ja,this);var r=this;this.ga=null,this.xa=function(e){r.ua(e.g)},this.Z=null,this.P=[],this.wa=function(e){Ic(r,e.c)},this.Y=null}function Tc(e,t){e.Z&&Yt(e.Z,"languageCodeChanged",e.xa),(e.Z=t)&&Wt(t,"languageCodeChanged",e.xa)}function Ic(e,t){e.P=t,Ma(e.a,m_.a.SDK_VERSION?vr(m_.a.SDK_VERSION,e.P):null)}function Ac(e,t){e.Y&&Yt(e.Y,"frameworkChanged",e.wa),(e.Y=t)&&Wt(t,"frameworkChanged",e.wa)}function Nc(e){try{return m_.a.app(e.m).auth()}catch(t){throw new Xr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Dc(e){e.B||e.w.b||(e.w.start(),Yt(e,"tokenChanged",e.W),Wt(e,"tokenChanged",e.W))}function Rc(e){Yt(e,"tokenChanged",e.W),e.w.stop()}function xc(e,t){e.ma=t,Fr(e,"_lat",t)}function Oc(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return $e(t).then((function(){return e}))}function Pc(e){e.i&&!e.J&&(e.J=!0,Ju(e.i,e))}function Mc(e,t){Vr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new kc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Lc(){}function Fc(e){return Xe().then((function(){if(e.B)throw new Xr("app-deleted")}))}function Vc(e){return U(e.providerData,(function(e){return e.providerId}))}function Uc(e,t){t&&(Bc(e,t.providerId),e.providerData.push(t))}function Bc(e,t){z(e.providerData,(function(e){return e.providerId==t}))}function jc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Fr(e,t,n)}function qc(e,t){e!=t&&(Vr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),Fr(e,"metadata",t.metadata?function(e){return new kc(e.a,e.b)}(t.metadata):new kc),V(t.providerData,(function(t){Uc(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),Fr(e,"refreshToken",e.b.a))}function zc(e){return e.G().then((function(t){var n=e.isAnonymous;return function(e,t){return Ss(e.a,os,{idToken:t}).then(k(e.zc,e))}(e,t).then((function(){return n||jc(e,"isAnonymous",!1),t}))}))}function Hc(e,t){t[Na]&&e.ma!=t[Na]&&(bc(e.b,t),e.dispatchEvent(new Sc("tokenChanged")),xc(e,t[Na]),jc(e,"refreshToken",e.b.a))}function Kc(e,t){return zc(e).then((function(){if(j(Vc(e),t))return Oc(e).then((function(){throw new Xr("provider-already-linked")}))}))}function Wc(e,t,n){return Ur({user:e,credential:go(t),additionalUserInfo:t=xi(t),operationType:n})}function Gc(e,t){return Hc(e,t),e.reload().then((function(){return e}))}function Qc(e,t,n,r,i){if(!_r())return Ze(new Xr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Ze(e.h);var o=Ri(n.providerId),a=Tr(e.uid+":::"),s=null;(!kr()||ur())&&e.o&&n.isOAuthProvider&&(s=Us(e.o,e.l,e.m,t,n,null,a,m_.a.SDK_VERSION||null,null,null,e.tenantId));var u=rr(s,o&&o.sa,o&&o.ra);return r=r().then((function(){if(Xc(e),!i)return e.G().then((function(){}))})).then((function(){return nc(e.i,u,t,n,a,!!s,e.tenantId)})).then((function(){return new ze((function(n,r){e.ja(t,null,new Xr("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=a,e.c=oc(e.i,e,t,u,a)}))})).then((function(e){return u&&nr(u),e?Ur(e):null})).s((function(e){throw u&&nr(u),e})),Zc(e,r,i)}function Yc(e,t,n,r,i){if(!_r())return Ze(new Xr("operation-not-supported-in-this-environment"));if(e.h&&!i)return Ze(e.h);var o=null,a=Tr(e.uid+":::");return r=r().then((function(){if(Xc(e),!i)return e.G().then((function(){}))})).then((function(){return e.ca=a,Oc(e)})).then((function(t){return e.da&&(t=(t=e.da).b.set(el,e.A(),t.a)),t})).then((function(){return ic(e.i,t,n,a,e.tenantId)})).s((function(t){if(o=t,e.da)return tl(e.da);throw o})).then((function(){if(o)throw o})),Zc(e,r,i)}function Xc(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new Xr("internal-error");throw new Xr("auth-domain-config-required")}}function Zc(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),Ze(e.h)):t.s((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new Sc("userInvalidated")),e.h=t),t}))}(e,t,n);return e.I.push(r),r.ka((function(){q(e.I,r)})),r}function Jc(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[Na]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-S())/1e3;var r=new Ec(t,n,e);return e.providerData&&V(e.providerData,(function(e){e&&Uc(r,Ur(e))})),e.redirectEventId&&(r.ca=e.redirectEventId),r}function $c(e){this.a=e,this.b=bu()}uc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},uc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(fc(this,!0,null,e.a),Xe()):t.Ba(n,r)?function(e,t,n){n=n.Ba(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.R(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){fc(e,s,t,null)})).s((function(t){fc(e,s,null,t)}))}(this,e,t):Ze(new Xr("invalid-auth-event")):(fc(this,!1,null,null),Xe())}else Ze(new Xr("invalid-auth-event"))},uc.prototype.oa=function(){var e=this;return new ze((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new Xr("timeout");e.a&&e.a.cancel(),e.a=ln(tc.get()).then((function(){e.b||(e.g=!0,fc(e,!0,null,t))}))}(e))}))},dc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),Xe()):t.Ba(n,r)?function(e,t){var n=e.b,r=e.c;t.Ba(r,n)(e.g,e.f,e.R(),e.i).then((function(e){t.ja(r,e,null,n)})).s((function(e){t.ja(r,null,e,n)}))}(e,t):Ze(new Xr("invalid-auth-event"))}else Ze(new Xr("invalid-auth-event"))},vc.prototype.confirm=function(e){return e=yo(this.verificationId,e),this.a(e)},gc.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=ln(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then((function(){return function(){var e=a.document,t=null;return Dr()||!e?Xe():new ze((function(n){t=function(){Dr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return t.h()})).then((function(){e(t,!0)})).s((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},gc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},_c.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},_c.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Ze(new Xr("user-token-expired")):e||!this.b||S()>this.c-3e4?this.a?function(e,t){return function(e,t){return new ze((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?La(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(Ts(e)):e.access_token&&e.refresh_token?n(e):r(new Xr("internal-error")):r(new Xr("network-request-failed"))}),"POST",Mn(t).toString(),e.g,e.u.get()):r(new Xr("internal-error"))}))}(e.f,t).then((function(t){return e.b=t.access_token,e.c=wc(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Xe(null):Xe({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},kc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(Sc,Pt),E(Ec,on),Ec.prototype.ua=function(e){this.ga=e,Pa(this.a,e)},Ec.prototype.ha=function(){return this.ga},Ec.prototype.Ca=function(){return K(this.P)},Ec.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Fr(Ec.prototype,"providerId","firebase"),(e=Ec.prototype).reload=function(){var e=this;return Zc(this,Fc(this).then((function(){return zc(e).then((function(){return Oc(e)})).then(Lc)})))},e.dc=function(e){return this.G(e).then((function(e){return new yc(e)}))},e.G=function(e){var t=this;return Zc(this,Fc(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new Xr("internal-error");return e.accessToken!=t.ma&&(xc(t,e.accessToken),t.dispatchEvent(new Sc("tokenChanged"))),jc(t,"refreshToken",e.refreshToken),e.accessToken})))},e.zc=function(e){if(!(e=e.users)||!e.length)throw new Xr("internal-error");Mc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?U(e,(function(e){return new Cc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Uc(this,t[n]);jc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.Ac=function(e){return Mr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(e)},e.hb=function(e){var t=this,n=null;return Zc(this,e.f(this.a,this.uid).then((function(e){return Hc(t,e),n=Wc(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},e.rc=function(e){return Mr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(e)},e.fb=function(e){var t=this,n=null;return Zc(this,Kc(this,e.providerId).then((function(){return t.G()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Wc(t,e,"link"),Gc(t,e)})).then((function(){return n})))},e.sc=function(e,t){var n=this;return Zc(this,Kc(this,"phone").then((function(){return mc(Nc(n),e,t,k(n.fb,n))})))},e.Bc=function(e,t){var n=this;return Zc(this,Xe().then((function(){return mc(Nc(n),e,t,k(n.hb,n))})),!0)},e.rb=function(e){var t=this;return Zc(this,this.G().then((function(n){return t.a.rb(n,e)})).then((function(e){return Hc(t,e),t.reload()})))},e.Sc=function(e){var t=this;return Zc(this,this.G().then((function(n){return e.b(t.a,n)})).then((function(e){return Hc(t,e),t.reload()})))},e.sb=function(e){var t=this;return Zc(this,this.G().then((function(n){return t.a.sb(n,e)})).then((function(e){return Hc(t,e),t.reload()})))},e.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Fc(this);var t=this;return Zc(this,this.G().then((function(n){return t.a.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Hc(t,e),jc(t,"displayName",e.displayName||null),jc(t,"photoURL",e.photoUrl||null),V(t.providerData,(function(e){"password"===e.providerId&&(Fr(e,"displayName",t.displayName),Fr(e,"photoURL",t.photoURL))})),Oc(t)})).then(Lc))},e.Qc=function(e){var t=this;return Zc(this,zc(this).then((function(n){return j(Vc(t),e)?function(e,t,n){return Ss(e,ns,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return V(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),V(Vc(t),(function(e){n[e]||Bc(t,e)})),n[mo.PROVIDER_ID]||Fr(t,"phoneNumber",null),Oc(t)})):Oc(t).then((function(){throw new Xr("no-such-provider")}))})))},e.delete=function(){var e=this;return Zc(this,this.G().then((function(t){return Ss(e.a,ts,{idToken:t})})).then((function(){e.dispatchEvent(new Sc("userDeleted"))}))).then((function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");Tc(e,null),Ac(e,null),e.I=[],e.B=!0,Rc(e),Fr(e,"refreshToken",null),e.i&&$u(e.i,e)}))},e.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},e.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?k(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?k(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?k(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?k(this.Cb,this):null},e.tc=function(e){var t=this;return Qc(this,"linkViaPopup",e,(function(){return Kc(t,e.providerId).then((function(){return Oc(t)}))}),!1)},e.Cc=function(e){return Qc(this,"reauthViaPopup",e,(function(){return Xe()}),!0)},e.uc=function(e){var t=this;return Yc(this,"linkViaRedirect",e,(function(){return Kc(t,e.providerId)}),!1)},e.Dc=function(e){return Yc(this,"reauthViaRedirect",e,(function(){return Xe()}),!0)},e.Bb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Zc(this,this.G().then((function(n){return Qa(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Wc(i,e,"link"),Gc(i,e)})).then((function(){return o})))},e.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Zc(this,Xe().then((function(){return zi(Ya(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Wc(i,e,"reauthenticate"),Hc(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},e.jb=function(e){var t=this,n=null;return Zc(this,this.G().then((function(t){return n=t,void 0===e||G(e)?{}:_i(new ci(e))})).then((function(e){return t.a.jb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.toJSON=function(){return this.A()},e.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&X(e,this.metadata.A()),V(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var el={name:"redirectUser",C:"session"};function tl(e){return Cu(e.b,el,e.a)}function nl(e){this.a=e,this.b=bu(),this.c=null,this.f=function(e){var t=ol("local"),n=ol("session"),r=ol("none");return function(e,t,n){var r=ku(t,n),i=wu(e,t.C);return e.get(t,n).then((function(o){var s=null;try{s=Er(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),e.set(t,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(il,e.a).then((function(e){return e?ol(e):t}))}))}))})).then((function(t){return e.c=t,rl(e,t.C)})).s((function(){e.c||(e.c=t)}))}(this),this.b.addListener(ol("local"),this.a,k(this.g,this))}function rl(e,t){var n,r=[];for(n in gu)gu[n]!==t&&r.push(Cu(e.b,ol(gu[n]),e.a));return r.push(Cu(e.b,il,e.a)),function(e){return new ze((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)Je(e[s],C(o,s),a);else t(i)}))}(r)}nl.prototype.g=function(){var e=this,t=ol("local");cl(this,(function(){return Xe().then((function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null})).then((function(n){if(n)return rl(e,"local").then((function(){e.c=t}))}))}))};var il={name:"persistence",C:"session"};function ol(e){return{name:"authUser",C:e}}function al(e,t){return cl(e,(function(){return e.b.set(e.c,t.A(),e.a)}))}function sl(e){return cl(e,(function(){return Cu(e.b,e.c,e.a)}))}function ul(e,t){return cl(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Jc(e||{})}))}))}function cl(e,t){return e.f=e.f.then(t,t),e.f}function ll(e){if(this.l=!1,Fr(this,"settings",new pc),Fr(this,"app",e),!gl(this).options||!gl(this).options.apiKey)throw new Xr("invalid-api-key");e=m_.a.SDK_VERSION?vr(m_.a.SDK_VERSION):null,this.b=new Ia(gl(this).options&&gl(this).options.apiKey,Ii(Ei),e),this.O=[],this.m=[],this.J=[],this.Ub=m_.a.INTERNAL.createSubscribe(k(this.oc,this)),this.W=void 0,this.Vb=m_.a.INTERNAL.createSubscribe(k(this.pc,this)),ml(this,null),this.h=new nl(gl(this).options.apiKey+":"+gl(this).name),this.w=new $c(gl(this).options.apiKey+":"+gl(this).name),this.Y=kl(this,function(e){var t=gl(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(el,e.a).then((function(e){return e&&t&&(e.authDomain=t),Jc(e||{})}))}(e.w,gl(e).options.authDomain).then((function(t){return(e.B=t)&&(t.da=e.w),tl(e.w)}));return kl(e,t)}(e).then((function(){return ul(e.h,t)})).then((function(t){return t?(t.da=e.w,e.B&&(e.B.ca||null)==(t.ca||null)?t:t.reload().then((function(){return al(e.h,t).then((function(){return t}))})).s((function(n){return"auth/network-request-failed"==n.code?t:sl(e.h)}))):null})).then((function(t){ml(e,t||null)}));return kl(e,n)}(this)),this.i=kl(this,function(e){return e.Y.then((function(){return pl(e)})).s((function(){})).then((function(){if(!e.l)return e.ma()})).s((function(){})).then((function(){if(!e.l){e.ga=!0;var t=e.h;t.b.addListener(ol("local"),t.a,e.ma)}}))}(this)),this.ga=!1,this.ma=k(this.Nc,this),this.ub=k(this.aa,this),this.wa=k(this.bc,this),this.xa=k(this.mc,this),this.Ja=k(this.nc,this),this.a=null,function(e){var t=gl(e).options.authDomain,n=gl(e).options.apiKey;t&&_r()&&(e.Tb=e.Y.then((function(){if(!e.l){if(e.a=sc(t,n,gl(e).name),Ju(e.a,e),_l(e)&&Pc(_l(e)),e.B){Pc(e.B);var r=e.B;r.ua(e.ha()),Tc(r,e),Ic(r=e.B,e.I),Ac(r,e),e.B=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=k(this.delete,this),this.INTERNAL.logFramework=k(this.vc,this),this.o=0,on.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ha()},set:function(e){this.ua(e)},enumerable:!1}),e.Z=null,Object.defineProperty(e,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),e.P=null}(this),this.I=[]}function hl(e){Pt.call(this,"languageCodeChanged"),this.g=e}function fl(e){Pt.call(this,"frameworkChanged"),this.c=e}function dl(e){return e.Tb||Ze(new Xr("auth-domain-config-required"))}function pl(e){if(!_r())return Ze(new Xr("operation-not-supported-in-this-environment"));var t=dl(e).then((function(){return e.a.oa()})).then((function(e){return e?Ur(e):null}));return kl(e,t)}function vl(e,t){var n={};return n.apiKey=gl(e).options.apiKey,n.authDomain=gl(e).options.authDomain,n.appName=gl(e).name,e.Y.then((function(){return function(e,t,n,r){var i=new Ec(e,t);return n&&(i.da=n),r&&Ic(i,r),i.reload().then((function(){return i}))}(n,t,e.w,e.Ca())})).then((function(t){return _l(e)&&t.uid==_l(e).uid?(qc(_l(e),t),e.aa(t)):(ml(e,t),Pc(t),e.aa(t))})).then((function(){wl(e)}))}function ml(e,t){_l(e)&&(function(e,t){z(e.O,(function(e){return e==t}))}(_l(e),e.ub),Yt(_l(e),"tokenChanged",e.wa),Yt(_l(e),"userDeleted",e.xa),Yt(_l(e),"userInvalidated",e.Ja),Rc(_l(e))),t&&(t.O.push(e.ub),Wt(t,"tokenChanged",e.wa),Wt(t,"userDeleted",e.xa),Wt(t,"userInvalidated",e.Ja),0<e.o&&Dc(t)),Fr(e,"currentUser",t),t&&(t.ua(e.ha()),Tc(t,e),Ic(t,e.I),Ac(t,e))}function yl(e,t){var n=null,r=null;return kl(e,t.then((function(t){return n=go(t),r=xi(t),vl(e,t)})).then((function(){return Ur({user:_l(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function gl(e){return e.app}function _l(e){return e.currentUser}function bl(e){return _l(e)&&_l(e)._lat||null}function wl(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](bl(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](bl(e))}}function kl(e,t){return e.O.push(t),t.ka((function(){q(e.O,t)})),t}function Cl(){}function Sl(){this.a={},this.b=1e12}nl.prototype.mb=function(e){var t=null,n=this;return function(e){var t=new Xr("invalid-persistence-type"),n=new Xr("unsupported-persistence-type");e:{for(r in gu)if(gu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(lr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!gr()&&"none"!==e)throw n}}(e),cl(this,(function(){return e!=n.c.C?n.b.get(n.c,n.a).then((function(r){return t=r,rl(n,e)})).then((function(){if(n.c=ol(e),t)return n.b.set(n.c,t,n.a)})):Xe()}))},E(ll,on),E(hl,Pt),E(fl,Pt),(e=ll.prototype).mb=function(e){return kl(this,e=this.h.mb(e))},e.ua=function(e){this.Z===e||this.l||(this.Z=e,Pa(this.b,this.Z),this.dispatchEvent(new hl(this.ha())))},e.ha=function(){return this.Z},e.Tc=function(){var e=a.navigator;this.ua(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.vc=function(e){this.I.push(e),Ma(this.b,m_.a.SDK_VERSION?vr(m_.a.SDK_VERSION,this.I):null),this.dispatchEvent(new fl(this.I))},e.Ca=function(){return K(this.I)},e.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},e.R=function(){return this.P},e.toJSON=function(){return{apiKey:gl(this).options.apiKey,authDomain:gl(this).options.authDomain,appName:gl(this).name,currentUser:_l(this)&&_l(this).A()}},e.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?k(this.ac,this):null},e.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Ga(i.b,e).then((function(e){return o=go(e),a=xi(e),e}));return kl(this,e=i.Y.then((function(){return s})).then((function(e){return vl(i,e)})).then((function(){return Ur({user:_l(i),credential:o,additionalUserInfo:a,operationType:"signIn"})})))},e.Lc=function(e){if(!_r())return Ze(new Xr("operation-not-supported-in-this-environment"));var t=this,n=Ri(e.providerId),r=Tr(),i=null;(!kr()||ur())&&gl(this).options.authDomain&&e.isOAuthProvider&&(i=Us(gl(this).options.authDomain,gl(this).options.apiKey,gl(this).name,"signInViaPopup",e,null,r,m_.a.SDK_VERSION||null,null,null,this.R()));var o=rr(i,n&&n.sa,n&&n.ra);return kl(this,n=dl(this).then((function(n){return nc(n,o,"signInViaPopup",e,r,!!i,t.R())})).then((function(){return new ze((function(e,n){t.ja("signInViaPopup",null,new Xr("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=r,t.c=oc(t.a,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&nr(o),e?Ur(e):null})).s((function(e){throw o&&nr(o),e})))},e.Mc=function(e){if(!_r())return Ze(new Xr("operation-not-supported-in-this-environment"));var t=this;return kl(this,dl(this).then((function(){return function(e){return cl(e,(function(){return e.b.set(il,e.c.C,e.a)}))}(t.h)})).then((function(){return ic(t.a,"signInViaRedirect",e,void 0,t.R())})))},e.oa=function(){var e=this;return pl(this).then((function(t){return e.a&&lc(e.a.b),t})).s((function(t){throw e.a&&lc(e.a.b),t}))},e.Rc=function(e){if(!e)return Ze(new Xr("null-user"));if(this.P!=e.tenantId)return Ze(new Xr("tenant-id-mismatch"));var t=this,n={};n.apiKey=gl(this).options.apiKey,n.authDomain=gl(this).options.authDomain,n.appName=gl(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[Na]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-S())/1e3,t=new Ec(t,o),n&&(t.da=n),r&&Ic(t,r),qc(t,e),t}(e,n,t.w,t.Ca());return kl(this,this.i.then((function(){if(gl(t).options.apiKey!=e.l)return r.reload()})).then((function(){return _l(t)&&e.uid==_l(t).uid?(qc(_l(t),e),t.aa(e)):(ml(t,r),Pc(r),t.aa(r))})).then((function(){wl(t)})))},e.pb=function(){var e=this;return kl(this,this.i.then((function(){return e.a&&lc(e.a.b),_l(e)?(ml(e,null),sl(e.h).then((function(){wl(e)}))):Xe()})))},e.Nc=function(){var e=this;return ul(this.h,gl(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=_l(e)&&t){n=_l(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return qc(_l(e),t),_l(e).G();(_l(e)||t)&&(ml(e,t),t&&(Pc(t),t.da=e.w),e.a&&Ju(e.a,e),wl(e))}}))},e.aa=function(e){return al(this.h,e)},e.bc=function(){wl(this),this.aa(_l(this))},e.mc=function(){this.pb()},e.nc=function(){this.pb()},e.oc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(_l(t))}))},e.pc=function(e){var t=this;!function(e,t){e.J.push(t),kl(e,e.i.then((function(){!e.l&&j(e.J,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(bl(e)))})))}(this,(function(){e.next(_l(t))}))},e.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){m(e)?e(_l(r)):m(e.next)&&e.next(_l(r))})),this.Ub(e,t,n)},e.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),m(e)?e(_l(r)):m(e.next)&&e.next(_l(r))})),this.Vb(e,t,n)},e.cc=function(e){var t=this;return kl(this,this.i.then((function(){return _l(t)?_l(t).G(e).then((function(e){return{accessToken:e}})):null})))},e.Hc=function(e){var t=this;return this.i.then((function(){return yl(t,Ss(t.b,_s,{token:e}))})).then((function(e){var n=e.user;return jc(n,"isAnonymous",!1),t.aa(n),e}))},e.Ic=function(e,t){var n=this;return this.i.then((function(){return yl(n,Ss(n.b,bs,{email:e,password:t}))}))},e.Xb=function(e,t){var n=this;return this.i.then((function(){return yl(n,Ss(n.b,$a,{email:e,password:t}))}))},e.Sa=function(e){var t=this;return this.i.then((function(){return yl(t,e.na(t.b))}))},e.Gc=function(e){return Mr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(e)},e.ob=function(){var e=this;return this.i.then((function(){var t=_l(e);if(t&&t.isAnonymous){var n=Ur({providerId:null,isNewUser:!1});return Ur({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return yl(e,e.b.ob()).then((function(t){var n=t.user;return jc(n,"isAnonymous",!0),e.aa(n),t}))}))},e.getUid=function(){return _l(this)&&_l(this).uid||null},e.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&_l(this)&&Dc(_l(this))},e.Ec=function(e){var t=this;V(this.m,(function(n){n==e&&t.o--})),0>this.o&&(this.o=0),0==this.o&&_l(this)&&Rc(_l(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),kl(this,this.i.then((function(){t.l||j(t.m,e)&&e(bl(t))})))},e.removeAuthTokenListener=function(e){z(this.m,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(ol("local"),e.a,this.ma),this.a&&($u(this.a,this),lc(this.a.b)),Promise.resolve()},e.$b=function(e){return kl(this,function(e,t){return Ss(e,es,{identifier:t,continueUri:br()?$n():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.b,e))},e.qc=function(e){return!!ho(e)},e.lb=function(e,t){var n=this;return kl(this,Xe().then((function(){var e=new ci(t);if(!e.c)throw new Xr("argument-error",fi+" must be true when sending sign in link to email");return _i(e)})).then((function(t){return n.b.lb(e,t)})).then((function(){})))},e.Uc=function(e){return this.Ma(e).then((function(e){return e.data.email}))},e.ab=function(e,t){return kl(this,this.b.ab(e,t).then((function(){})))},e.Ma=function(e){return kl(this,this.b.Ma(e).then((function(e){return new jr(e)})))},e.Ya=function(e){return kl(this,this.b.Ya(e).then((function(){})))},e.kb=function(e,t){var n=this;return kl(this,Xe().then((function(){return void 0===t||G(t)?{}:_i(new ci(t))})).then((function(t){return n.b.kb(e,t)})).then((function(){})))},e.Kc=function(e,t){return kl(this,mc(this,e,t,k(this.Sa,this)))},e.Jc=function(e,t){var n=this;return kl(this,Xe().then((function(){var r=t||$n(),i=lo(e,r);if(!(r=ho(r)))throw new Xr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Xr("tenant-id-mismatch");return n.Sa(i)})))},Cl.prototype.render=function(){},Cl.prototype.reset=function(){},Cl.prototype.getResponse=function(){},Cl.prototype.execute=function(){};var El=null;function Tl(e,t){return(t=Il(t))&&e.a[t]||null}function Il(e){return(e=void 0===e?1e12:e)?e.toString():null}function Al(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=qn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Wt(this.f,"click",this.i)}function Nl(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Dl(){}Sl.prototype.render=function(e,t){return this.a[this.b.toString()]=new Al(e,t),this.b++},Sl.prototype.reset=function(e){var t=Tl(this,e);e=Il(e),t&&e&&(t.delete(),delete this.a[e])},Sl.prototype.getResponse=function(e){return(e=Tl(this,e))?e.getResponse():null},Sl.prototype.execute=function(e){(e=Tl(this,e))&&e.execute()},Al.prototype.getResponse=function(){return Nl(this),this.b},Al.prototype.execute=function(){Nl(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Al.prototype.delete=function(){Nl(this),this.g=!0,clearTimeout(this.a),this.a=null,Yt(this.f,"click",this.i)},Dl.prototype.g=function(){return El||(El=new Sl),Xe(El)},Dl.prototype.c=function(){};var Rl=null;function xl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ol=new Z(ee,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Pl=new Nr(3e4,6e4);xl.prototype.g=function(e){var t=this;return new ze((function(n,r){var i=setTimeout((function(){r(new Xr("network-request-failed"))}),Pl.get());!a.grecaptcha||e!==t.f&&!t.b?(a[t.a]=function(){if(a.grecaptcha){t.f=e;var o=a.grecaptcha.render;a.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new Xr("internal-error"));delete a[t.a]},Xe(ba(ie(Ol,{onload:t.a,hl:e||""}))).s((function(){clearTimeout(i),r(new Xr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},xl.prototype.c=function(){this.b--};var Ml=null;function Ll(e,t,n,r,i,o,s){if(Fr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,s?(Rl||(Rl=new Dl),s=Rl):(Ml||(Ml=new xl),s=Ml),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ul])throw new Xr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Bl],!a.document)throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!qn(t)||!this.i&&qn(t).hasChildNodes())throw new Xr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ia(e,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Fl];this.a[Fl]=function(e){if(jl(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=yr(c,a);"function"==typeof t&&t(e)}};var l=this.a[Vl];this.a[Vl]=function(){if(jl(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=yr(l,a);"function"==typeof e&&e()}}}var Fl="callback",Vl="expired-callback",Ul="sitekey",Bl="size";function jl(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function ql(e,t){return e.h.push(t),t.ka((function(){q(e.h,t)})),t}function zl(e){if(e.B)throw new Xr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Hl(e,t,n){var r=!1;try{this.b=n||m_.a.app()}catch(a){throw new Xr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Xr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ca()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=m_.a.SDK_VERSION?vr(m_.a.SDK_VERSION,o):null,Ll.call(this,n,e,t,(function(){try{var e=i.b.auth().ha()}catch(t){e=null}return e}),o,Ii(Ei),r)}function Kl(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Xr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],0>i||i>=Wl.length)throw new Xr("internal-error","Argument validator received an unsupported number of arguments.");n=Wl[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new Xr("argument-error",e+" failed: "+r)}(e=Ll.prototype).Da=function(){var e=this;return this.f?this.f:this.f=ql(this,Xe().then((function(){if(br()&&!cr())return ar();throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.v())})).then((function(t){return e.g=t,Ss(e.o,ls,{})})).then((function(t){e.a[Ul]=t.recaptchaSiteKey})).s((function(t){throw e.f=null,t})))},e.render=function(){zl(this);var e=this;return ql(this,this.Da().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=qn(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!jn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Fe(a.name),'"'),a.type){o.push(' type="',Fe(a.type),'"');var u={};X(u,a),delete u.type,a=u}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(s(a)?o.className=a:p(a)?o.className=a.join(" "):zn(o,a)),2<r.length&&Kn(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){zl(this);var e=this;return ql(this,this.render().then((function(t){return new ze((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.l.push((function t(r){r&&(function(e,t){z(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){zl(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){zl(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=qn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},E(Hl,Ll);var Wl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gl(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:s}}function Ql(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:u}}function Yl(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:y}}function Xl(e,t){return{name:e||"",M:"a function",optional:!!t,N:m}}function Zl(e,t){return{name:e||"",M:"null",optional:!!t,N:d}}function Jl(e){return{name:e?e+"Credential":"credential",M:e?"a valid "+e+" credential":"a valid credential",optional:!1,N:function(t){return!!t&&!(!t.na||e&&t.providerId!==e)}}}function $l(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&s(e.type)&&m(e.verify))}}}function eh(e,t,n,r){return{name:n||"",M:e.M+" or "+t.M,optional:!!r,N:function(n){return e.N(n)||t.N(n)}}}function th(e,t){for(var n in t){var r=t[n].name;e[r]=ih(r,e[n],t[n].j)}}function nh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:C((function(e){return this[e]}),n),set:C((function(e,t,n,r){Kl(e,[n],[r],!0),this[t]=r}),r,n,t[n].Za),enumerable:!0})}}function rh(e,t,n,r){e[t]=ih(t,n,r)}function ih(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Kl(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}th(ll.prototype,{Ya:{name:"applyActionCode",j:[Gl("code")]},Ma:{name:"checkActionCode",j:[Gl("code")]},ab:{name:"confirmPasswordReset",j:[Gl("code"),Gl("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Gl("email"),Gl("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Gl("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Gl("emailLink")]},wc:{name:"onAuthStateChanged",j:[eh(Yl(),Xl(),"nextOrObserver"),Xl("opt_error",!0),Xl("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[eh(Yl(),Xl(),"nextOrObserver"),Xl("opt_error",!0),Xl("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Gl("email"),eh(Yl("opt_actionCodeSettings",!0),Zl(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Gl("email"),Yl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Gl("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Jl()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[Jl()]},Hc:{name:"signInWithCustomToken",j:[Gl("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Gl("email"),Gl("password")]},Jc:{name:"signInWithEmailLink",j:[Gl("email"),Gl("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Gl("phoneNumber"),$l()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[eh({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof Ec)}},Zl(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Gl("code")]}}),nh(ll.prototype,{lc:{name:"languageCode",Za:eh(Gl(),Zl(),"languageCode")},ti:{name:"tenantId",Za:eh(Gl(),Zl(),"tenantId")}}),(ll.Persistence=gu).LOCAL="local",ll.Persistence.SESSION="session",ll.Persistence.NONE="none",th(Ec.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Ql("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[Ql("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Jl()]},fb:{name:"linkWithCredential",j:[Jl()]},sc:{name:"linkWithPhoneNumber",j:[Gl("phoneNumber"),$l()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Jl()]},hb:{name:"reauthenticateWithCredential",j:[Jl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Gl("phoneNumber"),$l()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[eh(Yl("opt_actionCodeSettings",!0),Zl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},Qc:{name:"unlink",j:[Gl("provider")]},rb:{name:"updateEmail",j:[Gl("email")]},sb:{name:"updatePassword",j:[Gl("password")]},Sc:{name:"updatePhoneNumber",j:[Jl("phone")]},tb:{name:"updateProfile",j:[Yl("profile")]}}),th(Sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),th(Cl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),th(ze.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),nh(pc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:Ql("appVerificationDisabledForTesting")}}),th(vc.prototype,{confirm:{name:"confirm",j:[Gl("verificationCode")]}}),rh(qi,"fromJSON",(function(e){e=s(e)?JSON.parse(e):e;for(var t,n=[Yi,uo,po,Wi],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[eh(Gl(),Yl(),"json")]),rh(co,"credential",(function(e,t){return new so(e,t)}),[Gl("email"),Gl("password")]),th(so.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),th($i.prototype,{ya:{name:"addScope",j:[Gl("scope")]},Ga:{name:"setCustomParameters",j:[Yl("customOAuthParameters")]}}),rh($i,"credential",eo,[eh(Gl(),Yl(),"token")]),rh(co,"credentialWithLink",lo,[Gl("email"),Gl("emailLink")]),th(to.prototype,{ya:{name:"addScope",j:[Gl("scope")]},Ga:{name:"setCustomParameters",j:[Yl("customOAuthParameters")]}}),rh(to,"credential",no,[eh(Gl(),Yl(),"token")]),th(ro.prototype,{ya:{name:"addScope",j:[Gl("scope")]},Ga:{name:"setCustomParameters",j:[Yl("customOAuthParameters")]}}),rh(ro,"credential",io,[eh(Gl(),eh(Yl(),Zl()),"idToken"),eh(Gl(),Zl(),"accessToken",!0)]),th(oo.prototype,{Ga:{name:"setCustomParameters",j:[Yl("customOAuthParameters")]}}),rh(oo,"credential",ao,[eh(Gl(),Yl(),"token"),Gl("secret",!0)]),th(Ji.prototype,{ya:{name:"addScope",j:[Gl("scope")]},credential:{name:"credential",j:[eh(Gl(),eh(Yl(),Zl()),"optionsOrIdToken"),eh(Gl(),Zl(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[Yl("customOAuthParameters")]}}),th(Gi.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),th(Hi.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),rh(mo,"credential",yo,[Gl("verificationId"),Gl("verificationCode")]),th(mo.prototype,{Wa:{name:"verifyPhoneNumber",j:[Gl("phoneNumber"),$l()]}}),th(fo.prototype,{A:{name:"toJSON",j:[Gl(null,!0)]}}),th(Xr.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),th(To.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),th(Eo.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),th(Hl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rh(ei,"parseLink",ui,[Gl("link")]),function(){if(void 0===m_.a||!m_.a.INTERNAL||!m_.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ll,AuthCredential:qi,Error:Xr};rh(e,"EmailAuthProvider",co,[]),rh(e,"FacebookAuthProvider",$i,[]),rh(e,"GithubAuthProvider",to,[]),rh(e,"GoogleAuthProvider",ro,[]),rh(e,"TwitterAuthProvider",oo,[]),rh(e,"OAuthProvider",Ji,[Gl("providerId")]),rh(e,"SAMLAuthProvider",Zi,[Gl("providerId")]),rh(e,"PhoneAuthProvider",mo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof ll)}}]),rh(e,"RecaptchaVerifier",Hl,[eh(Gl(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Yl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof m_.a.app.App)}}]),rh(e,"ActionCodeURL",ei,[]),m_.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new ll(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),m_.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:k((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:k(e.cc,e),addAuthTokenListener:k(e.Wb,e),removeAuthTokenListener:k(e.Ec,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),m_.a.registerVersion("@firebase/auth","0.13.5"),m_.a.INTERNAL.extendNamespace({User:Ec})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var y_,g_=function e(){_classCallCheck(this,e)},__=y_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"enablePersistence",value:function(e){return{ngModule:y_,providers:[{provide:Sd,useValue:!0},{provide:Ed,useValue:e}]}}}]),e}(),b_=function(){function e(t,n){_classCallCheck(this,e),this.auth=t,this.router=n}return _createClass(e,[{key:"canActivate",value:function(e,t){return Nf.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.getUser();case 2:return t=!!e.sent,e.abrupt("return",(t||this.router.navigate(["/"]),t));case 4:case"end":return e.stop()}}),e,this)})))}}]),e}(),w_=function e(){_classCallCheck(this,e)},k_=function e(){_classCallCheck(this,e)},C_=new rs(is,[os],(function(e){return function(e){for(var t={},n=[],r=!1,i=0;i<e.length;i++){var o=e[i];o.token===Nt&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,t[Kn(o.token)]=o}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}([Sr(512,en,tn,[[8,[If,Md,Hd,i_]],[3,en],je]),Sr(5120,Mi,Oo,[[3,Mi]]),Sr(4608,ms,ys,[Mi,[2,vs]]),Sr(5120,gi,Po,[Ji]),Sr(5120,Ai,Ni,[]),Sr(5120,Cn,Ro,[]),Sr(5120,Sn,xo,[]),Sr(4608,Ec,Tc,[Ns]),Sr(6144,kt,null,[Ec]),Sr(4608,gc,bc,[]),Sr(5120,Gu,(function(e,t,n,r,i,o,a,s){return[new mc(e,t,n),new Sc(r),new wc(i,o,a,s)]}),[Ns,Ji,xi,Ns,Ns,gc,Pi,[2,_c]]),Sr(4608,Qu,Qu,[Gu,Ji]),Sr(135680,Zu,Zu,[Ns]),Sr(4608,nc,nc,[Qu,Zu,Ai]),Sr(5120,rv,Hm,[]),Sr(5120,Kv,Km,[]),Sr(4608,gm,zm,[Ns,rv,Kv]),Sr(5120,sn,Wm,[nc,gm,Ji]),Sr(6144,Xu,null,[Zu]),Sr(4608,ao,ao,[Ji]),Sr(5120,ql,bf,[Zh]),Sr(4608,sf,sf,[]),Sr(6144,of,null,[sf]),Sr(135680,uf,uf,[Zh,_o,zi,Rt,of]),Sr(4608,af,af,[]),Sr(5120,cf,vf,[Zh,Os,lf]),Sr(5120,Sf,Cf,[wf]),Sr(5120,Oi,(function(e){return[e]}),[Sf]),Sr(4608,Rp,Lm,[sn,Ns]),Sr(5120,s_,d_,[l_,xi]),Sr(4608,u_,u_,[s_]),Sr(4608,c_,c_,[s_]),Sr(5120,hd,dd,[sd,Ji,[2,ud]]),Sr(4608,vd,vd,[sd,[2,ud],xi,Ji]),Sr(4608,Rd,Rd,[sd,[2,ud],[2,Sd],[2,Td],xi,Ji,[2,Ed]]),Sr(4608,Wy,Wy,[Ay,Fy,en,Hy,Ly,Rt,Ji,Ns,Np,[2,ls]]),Sr(5120,Gy,Qy,[Wy]),Sr(5120,tg,ng,[Wy]),Sr(4608,b_,b_,[xd,Zh]),Sr(1073742336,As,As,[]),Sr(1024,Xe,Pc,[]),Sr(1024,lo,(function(){return[df()]}),[]),Sr(512,wf,wf,[Rt]),Sr(256,h_,"ngsw-worker.js",[]),Sr(256,l_,{enabled:!0},[]),Sr(1024,Ti,(function(e,t,n,r,i,o){return[(a=e,Hu("probe",Wu),Hu("coreTokens",Object.assign({},Ku,(a||[]).reduce((function(e,t){return e[t.name]=t.token,e}),{}))),function(){return Wu}),kf(t),f_(n,r,i,o)];var a}),[[2,lo],wf,Rt,h_,l_,xi]),Sr(512,Ii,Ii,[[2,Ti]]),Sr(131584,yo,yo,[Ji,Pi,Rt,Xe,en,Ii]),Sr(1073742336,Mo,Mo,[yo]),Sr(1073742336,Mc,Mc,[[3,Mc]]),Sr(1024,hf,yf,[[3,Zh]]),Sr(512,bl,wl,[]),Sr(512,tf,tf,[]),Sr(256,lf,{},[]),Sr(1024,us,mf,[as,[2,cs],lf]),Sr(512,ls,ls,[us,as]),Sr(512,zi,zi,[]),Sr(512,_o,ko,[zi,[2,bo]]),Sr(1024,Hh,(function(){return[[{path:"",component:Af},{path:"profile",component:Ld,canActivate:[b_]}]]}),[]),Sr(1024,Zh,_f,[yo,bl,tf,ls,Rt,_o,zi,Hh,lf,[2,Wh],[2,qh]]),Sr(1073742336,pf,pf,[[2,hf],[2,Zh]]),Sr(1073742336,w_,w_,[]),Sr(1073742336,Qm,Qm,[]),Sr(1073742336,p_,p_,[]),Sr(1073742336,pd,pd,[xi]),Sr(1073742336,g_,g_,[]),Sr(1073742336,__,__,[]),Sr(1073742336,Dp,Dp,[]),Sr(1073742336,fp,fp,[[2,hp],[2,_c]]),Sr(1073742336,Yg,Yg,[]),Sr(1073742336,$d,$d,[]),Sr(1073742336,Sp,Sp,[]),Sr(1073742336,ny,ny,[]),Sr(1073742336,gy,gy,[]),Sr(1073742336,Yy,Yy,[]),Sr(1073742336,og,og,[]),Sr(1073742336,ag,ag,[]),Sr(1073742336,Ip,Ip,[]),Sr(1073742336,zg,zg,[]),Sr(1073742336,Ug,Ug,[]),Sr(1073742336,k_,k_,[]),Sr(1073742336,is,is,[]),Sr(256,Nt,!0,[]),Sr(256,Gm,"BrowserAnimations",[]),Sr(256,sd,{apiKey:"AIzaSyDBpECTEM9GZVwmiadpiNJeg24vdvEvE48",authDomain:"uc3m-dsi-groceries.firebaseapp.com",databaseURL:"https://uc3m-dsi-groceries.firebaseio.com",projectId:"uc3m-dsi-groceries",storageBucket:"uc3m-dsi-groceries.appspot.com",messagingSenderId:"994830273101",appId:"1:994830273101:web:c5df1966e082aaf0ea6a04"},[]),Sr(256,ud,void 0,[])])}));(function(){if(Je)throw new Error("Cannot enable prod mode after platform setup.");Ze=!1})(),Oc().bootstrapModuleFactory(C_).catch((function(e){return console.error(e)}))},zVF4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var d=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,p.prototype.create),i}return r.__extends(t,e),t}(Error),p=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?v(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new d(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function v(e,t){return e.replace(m,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var m=/\{\$([^}]+)}/g;function y(e){return JSON.parse(e)}var g=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=y(c(o[0])||""),n=y(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}},_=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),b=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function w(){}function k(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=p,t.FirebaseError=d,t.Sha1=_,t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new b(e,t);return n.subscribe.bind(n)},t.decode=g,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=k,t.getUA=f,t.isAdmin=function(e){var t=g(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},t.isElectron=function(){return f().indexOf("Electron/")>=0},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){var e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isUWP=function(){return f().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){var t=g(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=g(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=g(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=y,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(k(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(k(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(k(e,t,r)+"must be a valid firebase namespace.")}},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);